{
  "$schema": "./system-rules.schema.json",
  "version": "1.0.0",
  "lastUpdated": "2025-12-19",
  "thresholds": {
    "cpu": {
      "warning": 80,
      "critical": 90,
      "description": "CPU 사용률 임계값. 80% 이상 경고, 90% 이상 심각 (업계 표준)"
    },
    "memory": {
      "warning": 80,
      "critical": 90,
      "description": "메모리 사용률 임계값. 80% 이상 경고, 90% 이상 심각 (업계 표준)"
    },
    "disk": {
      "warning": 80,
      "critical": 90,
      "description": "디스크 사용률 임계값. 80% 이상 경고, 90% 이상 심각 (여유 10% 확보)"
    },
    "network": {
      "warning": 70,
      "critical": 85,
      "description": "네트워크 사용률 임계값. 70% 이상 경고, 85% 이상 심각"
    },
    "responseTime": {
      "warning": 2000,
      "critical": 5000,
      "description": "응답 시간 임계값(ms). 2초 이상 경고, 5초 이상 심각"
    }
  },
  "statusRules": [
    {
      "name": "critical_cpu_memory",
      "condition": "CPU >= critical AND Memory >= critical",
      "resultStatus": "critical",
      "priority": 1
    },
    {
      "name": "critical_single_metric",
      "condition": "ANY metric >= critical",
      "resultStatus": "critical",
      "priority": 2
    },
    {
      "name": "warning_multiple_metrics",
      "condition": "2+ metrics >= warning",
      "resultStatus": "warning",
      "priority": 3
    },
    {
      "name": "warning_single_metric",
      "condition": "ANY metric >= warning",
      "resultStatus": "warning",
      "priority": 4
    },
    {
      "name": "default_online",
      "condition": "ALL metrics < warning",
      "resultStatus": "online",
      "priority": 99
    }
  ],
  "alertRules": [
    {
      "id": "cpu_critical",
      "name": "CPU 심각 경고",
      "metricType": "cpu",
      "operator": ">=",
      "threshold": 90,
      "severity": "critical",
      "enabled": true,
      "description": "CPU 사용률이 90%를 초과하면 즉시 알림 (업계 표준)"
    },
    {
      "id": "cpu_warning",
      "name": "CPU 경고",
      "metricType": "cpu",
      "operator": ">=",
      "threshold": 80,
      "severity": "warning",
      "enabled": true,
      "description": "CPU 사용률이 80%를 초과하면 주의 알림 (업계 표준)"
    },
    {
      "id": "memory_critical",
      "name": "메모리 심각 경고",
      "metricType": "memory",
      "operator": ">=",
      "threshold": 90,
      "severity": "critical",
      "enabled": true,
      "description": "메모리 사용률이 90%를 초과하면 즉시 알림"
    },
    {
      "id": "memory_warning",
      "name": "메모리 경고",
      "metricType": "memory",
      "operator": ">=",
      "threshold": 80,
      "severity": "warning",
      "enabled": true,
      "description": "메모리 사용률이 80%를 초과하면 주의 알림 (업계 표준)"
    },
    {
      "id": "disk_critical",
      "name": "디스크 심각 경고",
      "metricType": "disk",
      "operator": ">=",
      "threshold": 90,
      "severity": "critical",
      "enabled": true,
      "description": "디스크 사용률이 90%를 초과하면 즉시 알림 (여유 10% 확보)"
    },
    {
      "id": "disk_warning",
      "name": "디스크 경고",
      "metricType": "disk",
      "operator": ">=",
      "threshold": 80,
      "severity": "warning",
      "enabled": true,
      "description": "디스크 사용률이 80%를 초과하면 주의 알림"
    },
    {
      "id": "response_time_critical",
      "name": "응답 지연 심각",
      "metricType": "response_time",
      "operator": ">=",
      "threshold": 5000,
      "severity": "critical",
      "enabled": true,
      "description": "응답 시간이 5초를 초과하면 즉시 알림"
    }
  ],
  "metadata": {
    "description": "OpenManager VIBE v5 시스템 모니터링 규칙 설정",
    "maintainer": "OpenManager Team",
    "aiInstructions": "이 규칙 파일은 서버 모니터링의 Single Source of Truth입니다. 임계값 관련 질문 시 이 설정을 참조하여 정확한 수치로 답변하세요. 예: 'CPU 85% 이상이면 심각(critical) 상태입니다.'"
  }
}
