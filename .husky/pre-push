#!/usr/bin/env sh

echo "ğŸš€ Pre-push ë¹ ë¥¸ ê²€ì¦ ì‹œì‘..."

# ğŸ“š ë¬¸ì„œ ë¶„ì„ ë° ì •ë¦¬
echo "ğŸ“š ë¬¸ì„œ ë¶„ì„ ë° ì •ë¦¬..."
npm run docs:analyze
if [ $? -ne 0 ]; then
  echo "âŒ ë¬¸ì„œ ë¶„ì„ ì‹¤íŒ¨!"
  exit 1
fi

npm run docs:autopurge
if [ $? -ne 0 ]; then
  echo "âŒ ë¬¸ì„œ ìë™ ì •ë¦¬ ì‹¤íŒ¨!"
  exit 1
fi

# ë¹ ë¥¸ ê²€ì¦ë§Œ ì‹¤í–‰ (íƒ€ì… ì²´í¬ + ë¦°íŠ¸)
echo "ğŸ” ë¹ ë¥¸ í’ˆì§ˆ ê²€ì‚¬..."
npm run validate:quick
if [ $? -ne 0 ]; then
  echo "âŒ ë¹ ë¥¸ ê²€ì¦ ì‹¤íŒ¨! ë‹¤ìŒ í•­ëª©ë“¤ì„ í™•ì¸í•˜ì„¸ìš”:"
  echo "   - TypeScript íƒ€ì… ì—ëŸ¬"
  echo "   - ESLint ì—ëŸ¬"
  exit 1
fi

echo "âœ… Pre-push ë¹ ë¥¸ ê²€ì¦ ì™„ë£Œ! ğŸ‰" 