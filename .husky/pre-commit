#!/bin/sh

# 환경 변수로 스킵 가능
if [ "$HUSKY" = "0" ]; then
    echo "⏭️  HUSKY=0 설정으로 검증을 건너뜁니다."
    exit 0
fi

echo "🧹 변경된 파일만 검사 중..."

# 핵심 수정: lint-staged만 실행 (변경된 파일만 검사)
npx lint-staged

# 추가 검사: 중국어 문자 (중요 정책)
if [ -f "scripts/check-chinese-characters.js" ]; then
    node scripts/check-chinese-characters.js --quiet
fi

echo "✅ Pre-commit 완료!"