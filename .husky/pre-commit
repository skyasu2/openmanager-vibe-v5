#!/usr/bin/env bash

# Pre-commit Hook: Code Quality Check
# ëª©ì : ESLint/Prettier ìë™ ìˆ˜ì • (staged filesë§Œ)

set -e

# ë¬¸ì„œ/í…ŒìŠ¤íŠ¸ ê²€ì¦ (Soft Warning)
# ì†ŒìŠ¤ ë³€ê²½ ì‹œ ë¬¸ì„œ/í…ŒìŠ¤íŠ¸ ì—…ë°ì´íŠ¸ ì—¬ë¶€ í™•ì¸
./.husky/pre-commit-doc-validation || true

# lint-staged: ESLint + Prettier (fast, staged files only)
echo "ğŸ” Running lint-staged (ESLint + Prettier)..."
export NODE_OPTIONS='--max-old-space-size=8192'
npx lint-staged || {
  echo "âŒ Linting/Formatting failed"
  echo "ğŸ’¡ Some files were auto-fixed. Please review and re-add them."
  exit 1
}

exit 0
