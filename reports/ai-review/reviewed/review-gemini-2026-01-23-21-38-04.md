# âœ¨ AI ìë™ ì½”ë“œ ë¦¬ë·° ë¦¬í¬íŠ¸ (Engine: GEMINI)

**ë‚ ì§œ**: 2026-01-23 21-38-04
**ì»¤ë°‹**: `3fb63804a`
**ë¸Œëœì¹˜**: `main`
**AI ì—”ì§„**: **GEMINI**

---

## ğŸ” ì‹¤ì‹œê°„ ê²€ì¦ ê²°ê³¼ (2026-01-23 21:38:05)

```
ESLint: ìë™ ê²€ì¦ (pre-push)
TypeScript: ìë™ ê²€ì¦ (pre-push)
```

**ê²€ì¦ ë¡œê·¸ íŒŒì¼**:
- ESLint: `logs/validation/`
- TypeScript: `logs/validation/`

---

## ğŸ“Š ë³€ê²½ì‚¬í•­ ìš”ì•½

**ì»¤ë°‹**: `3fb63804a737f724485b132f119e60f75d22c28e`
**ë©”ì‹œì§€**: test: add 5 Vercel-safe integration test suites (+97 tests)

## ğŸ“„ tests/integration/auth-middleware-integration.test.ts

```diff
diff --git a/tests/integration/auth-middleware-integration.test.ts b/tests/integration/auth-middleware-integration.test.ts
new file mode 100644
index 000000000..1e2dc2517
--- /dev/null
+++ b/tests/integration/auth-middleware-integration.test.ts
@@ -0,0 +1,347 @@
+/**
+ * ğŸ”— Auth Middleware Integration Test
+ *
+ * withAuth â†’ checkAPIAuth â†’ Response í†µí•© í…ŒìŠ¤íŠ¸
+ *
+ * Vercel ë¬´ë£Œ í‹°ì–´ ì•ˆì „:
+ * - âœ… ì™¸ë¶€ API í˜¸ì¶œ ì—†ìŒ
+ * - âœ… NextAuth ì„¸ì…˜ Mock
+ * - âœ… 10ì´ˆ ì´ë‚´ ì‹¤í–‰
+ *
+ * @vitest-environment node
+ */
+
+import { NextRequest, NextResponse } from 'next/server';
+import { afterEach, beforeEach, describe, expect, it, vi } from 'vitest';
+
+// Mock dependencies
+vi.mock('@/config/constants', () => ({
+  SECURITY: {
+    API: {
+      MAX_KEY_LENGTH: 256,
+    },
+  },
+}));
+
+vi.mock('@/config/guestMode.server', () => ({
+  isGuestFullAccessEnabledServer: vi.fn(() => false),
+}));
+
+vi.mock('@/lib/logging', () => ({
+  logger: {
+    info: vi.fn(),
+    error: vi.fn(),
+    warn: vi.fn(),
+    debug: vi.fn(),
+  },
+}));
+
+vi.mock('@/lib/security/security-logger', () => ({
+  securityLogger: {
+    logSecurityEvent: vi.fn(),
+    logAuthFailure: vi.fn(),
+  },
+}));
+
+// Import after mocks
+import { isGuestFullAccessEnabledServer } from '@/config/guestMode.server';
+import { checkAPIAuth, withAuth } from '@/lib/auth/api-auth';
+
+describe('Auth Middleware Integration', () => {
+  const originalEnv = process.env;
+
+  beforeEach(() => {
+    vi.clearAllMocks();
+    process.env = { ...originalEnv };
+  });
+
+  afterEach(() => {
+    process.env = originalEnv;
+    vi.resetAllMocks();
+  });
+
+  describe('checkAPIAuth', () => {
+    describe('ê°œë°œ í™˜ê²½', () => {
+      it('NODE_ENV=developmentì—ì„œ ì¸ì¦ ìš°íšŒ', async () => {
+        // Given
+        process.env.NODE_ENV = 'development';
+        const request = new NextRequest('http://localhost:3000/api/test');
+
+        // When
+        const result = await checkAPIAuth(request);
+
+        // Then
+        expect(result).toBeNull();
+      });
+
+      it('NODE_ENV=testì—ì„œ ì¸ì¦ ìš°íšŒ', async () => {
+        // Given
+        process.env.NODE_ENV = 'test';
+        const request = new NextRequest('http://localhost:3000/api/test');
+
+        // When
+        const result = await checkAPIAuth(request);
+
+        // Then
+        expect(result).toBeNull();
+      });
+    });
+
+    describe('ê²ŒìŠ¤íŠ¸ í’€ ì•¡ì„¸ìŠ¤ ëª¨ë“œ', () => {
+      it('ê²ŒìŠ¤íŠ¸ ëª¨ë“œ í™œì„±í™” ì‹œ ì¸ì¦ ìš°íšŒ', async () => {
+        // Given
+        process.env.NODE_ENV = 'production';
+        vi.mocked(isGuestFullAccessEnabledServer).mockReturnValue(true);
```

## ğŸ“„ tests/integration/dashboard-pipeline.test.ts

```diff
diff --git a/tests/integration/dashboard-pipeline.test.ts b/tests/integration/dashboard-pipeline.test.ts
new file mode 100644
index 000000000..dcdc46edc
--- /dev/null
+++ b/tests/integration/dashboard-pipeline.test.ts
@@ -0,0 +1,292 @@
+/**
+ * ğŸ”— /api/dashboard Integration Test
+ *
+ * Dashboard API â†’ DataSource â†’ Stats Calculation í†µí•© í…ŒìŠ¤íŠ¸
+ *
+ * Vercel ë¬´ë£Œ í‹°ì–´ ì•ˆì „:
+ * - âœ… ì™¸ë¶€ API í˜¸ì¶œ ì—†ìŒ (ëª¨ë“  ì˜ì¡´ì„± Mock)
+ * - âœ… Supabase ì—°ê²° ì—†ìŒ
+ * - âœ… 10ì´ˆ ì´ë‚´ ì‹¤í–‰
+ *
+ * @vitest-environment node
+ */
+
+import { NextRequest } from 'next/server';
+import { afterEach, beforeEach, describe, expect, it, vi } from 'vitest';
+
+// Mock dependencies
+vi.mock('@/services/data/UnifiedServerDataSource', () => ({
+  getServerMetricsFromUnifiedSource: vi.fn(),
+  getUnifiedServerDataSource: vi.fn(() => ({
+    getServers: vi.fn(),
+  })),
+}));
+
+vi.mock('@/config/SystemConfiguration', () => ({
+  getSystemConfig: vi.fn(() => ({
+    totalServers: 15,
+    environment: { mode: 'test' },
+  })),
+}));
+
+vi.mock('@/lib/logging', () => ({
+  logger: {
+    info: vi.fn(),
+    error: vi.fn(),
+    warn: vi.fn(),
+    debug: vi.fn(),
+  },
+}));
+
+vi.mock('@/utils/debug', () => ({
+  default: {
+    log: vi.fn(),
+    error: vi.fn(),
+  },
+}));
+
+vi.mock('@/lib/api/zod-middleware', () => ({
+  createApiRoute: vi.fn(() => ({
+    response: vi.fn().mockReturnThis(),
+    configure: vi.fn().mockReturnThis(),
+    build: vi.fn(
+      (handler: (req: NextRequest, ctx: unknown) => Promise<unknown>) => handler
+    ),
+    body: vi.fn().mockReturnThis(),
+  })),
+}));
+
+// Import after mocks
+import {
+  getServerMetricsFromUnifiedSource,
+  getUnifiedServerDataSource,
+} from '@/services/data/UnifiedServerDataSource';
+import { GET, POST } from '@/app/api/dashboard/route';
+
+// Mock server data
+const mockServers = [
+  {
+    id: 'web-01',
+    name: 'Web Server 01',
+    type: 'web',
+    status: 'online',
+    cpu: 45,
+    memory: 60,
+    disk: 30,
+    network: 25,
+  },
+  {
+    id: 'api-01',
+    name: 'API Server 01',
+    type: 'api',
+    status: 'warning',
+    cpu: 75,
+    memory: 80,
+    disk: 45,
+    network: 50,
+  },
+  {
+    id: 'db-01',
+    name: 'Database Server 01',
+    type: 'database',
+    status: 'critical',
+    cpu: 90,
+    memory: 95,
```

## ğŸ“„ tests/integration/metrics-current-cycle.test.ts

```diff
diff --git a/tests/integration/metrics-current-cycle.test.ts b/tests/integration/metrics-current-cycle.test.ts
new file mode 100644
index 000000000..15560f0b2
--- /dev/null
+++ b/tests/integration/metrics-current-cycle.test.ts
@@ -0,0 +1,426 @@
+/**
+ * ğŸ”— Metrics Current Cycle Integration Test
+ *
+ * ë©”íŠ¸ë¦­ API ì‹œê°„ ì •ê·œí™” ë° ì‚¬ì´í´ ìƒì„± ë¡œì§ í†µí•© í…ŒìŠ¤íŠ¸
+ *
+ * Vercel ë¬´ë£Œ í‹°ì–´ ì•ˆì „:
+ * - âœ… ì™¸ë¶€ API í˜¸ì¶œ ì—†ìŒ (ìˆœìˆ˜ í•¨ìˆ˜ í…ŒìŠ¤íŠ¸)
+ * - âœ… ì‹œê°„ ê¸°ë°˜ ë¡œì§ í…ŒìŠ¤íŠ¸ (ê°€ìƒ ì‹œê°„ ì‚¬ìš©)
+ * - âœ… 10ì´ˆ ì´ë‚´ ì‹¤í–‰
+ *
+ * @vitest-environment node
+ */
+
+import { afterEach, beforeEach, describe, expect, it, vi } from 'vitest';
+
+// ì‹œê°„ ì •ê·œí™” í•¨ìˆ˜ (API routeì—ì„œ ì¶”ì¶œ)
+function normalizeTimestamp(timestamp: number): number {
+  const minuteMs = 60 * 1000;
+  return Math.floor(timestamp / minuteMs) * minuteMs;
+}
+
+// 24ì‹œê°„ ìˆœí™˜ ê³„ì‚° í•¨ìˆ˜
+function get24HourCycle(timestamp: number): number {
+  const dayMs = 24 * 60 * 60 * 1000;
+  return timestamp % dayMs;
+}
+
+// 10ë¶„ ìŠ¬ë¡¯ ê³„ì‚°
+function getBaseline10MinSlot(cycleTime: number): number {
+  const tenMinMs = 10 * 60 * 1000;
+  return Math.floor(cycleTime / tenMinMs);
+}
+
+// FNV-1a í•´ì‹œ
+function fnv1aHash(seed: number | string): number {
+  let hash = 0x811c9dc5;
+  const str = typeof seed === 'number' ? seed.toString() : seed;
+  for (let i = 0; i < str.length; i++) {
+    hash ^= str.charCodeAt(i);
+    hash = (hash * 0x01000193) >>> 0;
+  }
+  return hash / 0xffffffff;
+}
+
+// ì‚¬ì´í´ ì‹œë‚˜ë¦¬ì˜¤ ì •ì˜
+const cycleScenarios = [
+  {
+    name: 'backup_cycle',
+    description: 'ì•¼ê°„ ë°±ì—… ë° ì •ë¦¬',
+    affectedServers: ['backup-01', 'database-01', 'file-01'],
+  },
+  {
+    name: 'maintenance_cycle',
+    description: 'ìƒˆë²½ íŒ¨ì¹˜ ë° ì¬ì‹œì‘',
+    affectedServers: ['web-01', 'api-01', 'security-01'],
+  },
+  {
+    name: 'traffic_cycle',
+    description: 'ì¶œê·¼ì‹œê°„ íŠ¸ë˜í”½ í­ì¦',
+    affectedServers: ['web-01', 'web-02', 'load_balancer-01'],
+  },
+  {
+    name: 'database_cycle',
+    description: 'ì ì‹¬ì‹œê°„ ì£¼ë¬¸ í­ì¦',
+    affectedServers: ['database-01', 'api-01', 'cache-01'],
+  },
+  {
+    name: 'network_cycle',
+    description: 'í‡´ê·¼ì‹œê°„ íŒŒì¼ ë‹¤ìš´ë¡œë“œ',
+    affectedServers: ['file-01', 'web-03', 'load_balancer-01'],
+  },
+  {
+    name: 'batch_cycle',
+    description: 'ì €ë… ë°ì´í„° ì²˜ë¦¬',
+    affectedServers: ['api-02', 'database-02', 'monitoring-01'],
+  },
+];
+
+// ì¥ì•  ì§„í–‰ ë‹¨ê³„ ê³„ì‚°
+function getIncidentPhase(progress: number) {
+  if (progress < 0.2)
+    return { phase: 'normal', intensity: 0.0, description: 'ì •ìƒ ìš´ì˜' };
+  if (progress < 0.5)
+    return { phase: 'incident', intensity: 0.7, description: 'ì¥ì•  ë°œìƒ' };
+  if (progress < 0.8)
+    return { phase: 'peak', intensity: 1.0, description: 'ì¥ì•  ì‹¬í™”' };
+  if (progress < 0.95)
+    return { phase: 'resolving', intensity: 0.3, description: 'í•´ê²° ì¤‘' };
+  return { phase: 'resolved', intensity: 0.0, description: 'í•´ê²° ì™„ë£Œ' };
+}
+
+// ì‚¬ì´í´ ì •ë³´ ê³„ì‚°
+function getIncidentCycleInfo(hour: number, minute: number) {
+  const timeSlot = Math.floor(hour / 4);
```

## ğŸ“„ tests/integration/scenario-data-flow.test.ts

```diff
diff --git a/tests/integration/scenario-data-flow.test.ts b/tests/integration/scenario-data-flow.test.ts
new file mode 100644
index 000000000..137cb9264
--- /dev/null
+++ b/tests/integration/scenario-data-flow.test.ts
@@ -0,0 +1,351 @@
+/**
+ * ğŸ”— Scenario Data Flow Integration Test
+ *
+ * ScenarioLoader â†’ HourlyData â†’ MetricsProvider í†µí•© í…ŒìŠ¤íŠ¸
+ *
+ * Vercel ë¬´ë£Œ í‹°ì–´ ì•ˆì „:
+ * - âœ… íŒŒì¼ ì‹œìŠ¤í…œ Mock (ì‹¤ì œ íŒŒì¼ ì½ê¸° ì—†ìŒ)
+ * - âœ… ì™¸ë¶€ API í˜¸ì¶œ ì—†ìŒ
+ * - âœ… 10ì´ˆ ì´ë‚´ ì‹¤í–‰
+ *
+ * @vitest-environment node
+ */
+
+import { afterEach, beforeEach, describe, expect, it, vi } from 'vitest';
+
+// Mock fs module
+vi.mock('fs', () => ({
+  readFileSync: vi.fn(),
+  existsSync: vi.fn(),
+}));
+
+vi.mock('path', () => ({
+  join: vi.fn((...args: string[]) => args.join('/')),
+  resolve: vi.fn((...args: string[]) => args.join('/')),
+}));
+
+vi.mock('@/lib/logging', () => ({
+  logger: {
+    info: vi.fn(),
+    error: vi.fn(),
+    warn: vi.fn(),
+    debug: vi.fn(),
+  },
+}));
+
+// Mock hourly data structure
+const mockHourlyData = {
+  hour: 14,
+  timestamp: '2024-01-15T14:00:00Z',
+  scenario: {
+    name: 'traffic_cycle',
+    description: 'ì¶œê·¼ì‹œê°„ íŠ¸ë˜í”½ í­ì¦',
+    phase: 'peak',
+    intensity: 0.8,
+  },
+  servers: [
+    {
+      serverId: 'web-01',
+      serverType: 'web',
+      cpu: 75,
+      memory: 80,
+      disk: 45,
+      network: 90,
+      status: 'warning',
+      location: 'Seoul',
+      logs: ['[WARN] High traffic detected', '[INFO] Scaling up instances'],
+    },
+    {
+      serverId: 'api-01',
+      serverType: 'api',
+      cpu: 60,
+      memory: 65,
+      disk: 30,
+      network: 70,
+      status: 'online',
+      location: 'Seoul',
+      logs: ['[INFO] Processing requests normally'],
+    },
+    {
+      serverId: 'database-01',
+      serverType: 'database',
+      cpu: 85,
+      memory: 90,
+      disk: 60,
+      network: 40,
+      status: 'critical',
+      location: 'Seoul',
+      logs: [
+        '[CRITICAL] Memory pressure detected',
+        '[ERROR] Query timeout occurred',
+      ],
+    },
+  ],
+};
+
+describe('Scenario Data Flow Integration', () => {
+  beforeEach(() => {
+    vi.clearAllMocks();
+    vi.useFakeTimers();
+  });
+
+  afterEach(() => {
+    vi.useRealTimers();
+    vi.resetAllMocks();
```

## ğŸ“„ tests/integration/servers-all-integration.test.ts

```diff
diff --git a/tests/integration/servers-all-integration.test.ts b/tests/integration/servers-all-integration.test.ts
new file mode 100644
index 000000000..738d576b2
--- /dev/null
+++ b/tests/integration/servers-all-integration.test.ts
@@ -0,0 +1,467 @@
+/**
+ * ğŸ”— /api/servers/all Integration Test
+ *
+ * ì„œë²„ ì •ë ¬/ê²€ìƒ‰/í˜ì´ì§€ë„¤ì´ì…˜ í†µí•© ë¡œì§ í…ŒìŠ¤íŠ¸
+ *
+ * Vercel ë¬´ë£Œ í‹°ì–´ ì•ˆì „:
+ * - âœ… ì™¸ë¶€ API í˜¸ì¶œ ì—†ìŒ (ìˆœìˆ˜ í•¨ìˆ˜ í…ŒìŠ¤íŠ¸)
+ * - âœ… DB ì—°ê²° ì—†ìŒ
+ * - âœ… 10ì´ˆ ì´ë‚´ ì‹¤í–‰
+ *
+ * @vitest-environment node
+ */
+
+import { describe, expect, it } from 'vitest';
+
+// ğŸ¯ API ë¼ìš°íŠ¸ì—ì„œ ì¶”ì¶œí•œ ìˆœìˆ˜ í•¨ìˆ˜ë“¤ í…ŒìŠ¤íŠ¸
+
+// ìœ íš¨í•œ ì •ë ¬ í‚¤ ëª©ë¡
+const VALID_SORT_KEYS = [
+  'name',
+  'cpu',
+  'memory',
+  'disk',
+  'network',
+  'uptime',
+] as const;
+
+type SortableKey = (typeof VALID_SORT_KEYS)[number];
+
+interface Server {
+  id: string;
+  name: string;
+  hostname?: string;
+  type: string;
+  status: string;
+  cpu: number;
+  memory: number;
+  disk: number;
+  network: number;
+  uptime?: number;
+  location?: string;
+}
+
+// ì •ë ¬ í‚¤ ê²€ì¦ í•¨ìˆ˜
+function validateSortBy(value: string | null): SortableKey {
+  if (!value || !VALID_SORT_KEYS.includes(value as SortableKey)) {
+    return 'name';
+  }
+  return value as SortableKey;
+}
+
+// ì„œë²„ ì •ë ¬ ë¹„êµ í•¨ìˆ˜ ìƒì„±
+function createServerComparator(
+  sortBy: SortableKey,
+  sortOrder: 'asc' | 'desc'
+): (a: Server, b: Server) => number {
+  const dir = sortOrder === 'asc' ? 1 : -1;
+
+  const comparators: Record<SortableKey, (a: Server, b: Server) => number> = {
+    cpu: (a, b) => (a.cpu - b.cpu) * dir,
+    memory: (a, b) => (a.memory - b.memory) * dir,
+    disk: (a, b) => (a.disk - b.disk) * dir,
+    network: (a, b) => {
+      const aNetwork = typeof a.network === 'number' ? a.network : 0;
+      const bNetwork = typeof b.network === 'number' ? b.network : 0;
+      return (aNetwork - bNetwork) * dir;
+    },
+    uptime: (a, b) => {
+      const aUptime = typeof a.uptime === 'number' ? a.uptime : 0;
+      const bUptime = typeof b.uptime === 'number' ? b.uptime : 0;
+      return (aUptime - bUptime) * dir;
+    },
+    name: (a, b) => (a.name || '').localeCompare(b.name || '') * dir,
+  };
+
+  return comparators[sortBy];
+}
+
+// ê²€ìƒ‰ í•„í„° í•¨ìˆ˜
+function filterServers(servers: Server[], search: string): Server[] {
+  if (!search) return servers;
+
+  const searchLower = search.toLowerCase();
+  return servers.filter(
+    (server) =>
+      server.name.toLowerCase().includes(searchLower) ||
+      (server.hostname || '').toLowerCase().includes(searchLower) ||
+      server.status.toLowerCase().includes(searchLower) ||
+      (server.type || '').toLowerCase().includes(searchLower)
+  );
+}
+
+// í˜ì´ì§€ë„¤ì´ì…˜ ê³„ì‚°
+function paginate<T>(items: T[], page: number, limit: number) {
```

---

## âœ¨ AI ë¦¬ë·° ê²°ê³¼

# Git ë³€ê²½ì‚¬í•­ ë¦¬ë·° ë³´ê³ ì„œ

**ê²€í† ì**: Gemini (Principal Software Architect)
**ë‚ ì§œ**: 2026-01-23
**ëŒ€ìƒ ì»¤ë°‹**: `3fb63804a737f724485b132f119e60f75d22c28e`
**íŒì •**: **â›” ë³€ê²½ ìš”ì²­ (Request Changes)**
**ì¢…í•© ì ìˆ˜**: 4/10

---

## ğŸ›¡ï¸ ìš”ì•½ (Executive Summary)
Vercel í™˜ê²½ì—ì„œì˜ ì•ˆì „í•œ í†µí•© í…ŒìŠ¤íŠ¸ë¥¼ ì¶”ê°€í•˜ë ¤ëŠ” ì˜ë„ëŠ” ë§¤ìš° í›Œë¥­í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ì¼ë¶€ í…ŒìŠ¤íŠ¸ íŒŒì¼ì—ì„œ **ì‹¤ì œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œë¥¼ í…ŒìŠ¤íŠ¸í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, í…ŒìŠ¤íŠ¸ íŒŒì¼ ë‚´ë¶€ì— ë³µì‚¬ëœ ë¡œì§ì„ í…ŒìŠ¤íŠ¸**í•˜ê³  ìˆëŠ” ì¹˜ëª…ì ì¸ ì„¤ê³„ ê²°í•¨ì´ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” "í†µí•© í…ŒìŠ¤íŠ¸"ì˜ ëª©ì ì„ ë‹¬ì„±í•˜ì§€ ëª»í•˜ë©°, í–¥í›„ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë³€ê²½ ì‹œ í…ŒìŠ¤íŠ¸ê°€ ì‹¤ì œ ë™ì‘ì„ ë³´ì¥í•˜ì§€ ëª»í•˜ê²Œ ë§Œë“­ë‹ˆë‹¤. ë˜í•œ, import ê²½ë¡œì˜ ì˜¤íƒ€ë¡œ ë³´ì´ëŠ” êµ¬ë¬¸ ì˜¤ë¥˜ê°€ ë‹¤ìˆ˜ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤.

---

## ğŸ” ìƒì„¸ ê²€í†  ê²°ê³¼

### 1. ğŸš¨ Critical Issues (í•„ìˆ˜ ìˆ˜ì • ì‚¬í•­)

#### A. Anti-Pattern: ë¡œì§ ë³µì œ í…ŒìŠ¤íŠ¸ (Fake Integration Tests)
ê°€ì¥ ì‹¬ê°í•œ ë¬¸ì œì…ë‹ˆë‹¤. `metrics-current-cycle.test.ts`ì™€ `servers-all-integration.test.ts` íŒŒì¼ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ê²€ì¦í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, í…ŒìŠ¤íŠ¸ íŒŒì¼ ë‚´ë¶€ì— **ì¬ì •ì˜ëœ(ë³µì‚¬ëœ) í•¨ìˆ˜ë“¤**ì„ í…ŒìŠ¤íŠ¸í•˜ê³  ìˆìŠµë‹ˆë‹¤.

*   **ëŒ€ìƒ íŒŒì¼**:
    *   `tests/integration/metrics-current-cycle.test.ts`
    *   `tests/integration/servers-all-integration.test.ts`
*   **ë¬¸ì œ ì½”ë“œ**:
    ```typescript
    // metrics-current-cycle.test.ts
    // âŒ ì‹¤ì œ ì½”ë“œë¥¼ importí•˜ì§€ ì•Šê³  í…ŒìŠ¤íŠ¸ íŒŒì¼ ë‚´ì— í•¨ìˆ˜ë¥¼ ì¬ì‘ì„±í•¨
    function normalizeTimestamp(timestamp: number): number { ... }
    function get24HourCycle(timestamp: number): number { ... }

    // servers-all-integration.test.ts
    // âŒ ë§ˆì°¬ê°€ì§€ë¡œ ì •ë ¬ ë¡œì§ì„ í…ŒìŠ¤íŠ¸ íŒŒì¼ ë‚´ì— ì¬ì‘ì„±í•¨
    function createServerComparator(...) { ... }
    ```
*   **ìœ„í—˜ì„±**: `src/` ë‚´ë¶€ì˜ ì‹¤ì œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ìˆ˜ì •ë˜ì–´ë„, ì´ í…ŒìŠ¤íŠ¸ëŠ” ì—¬ì „íˆ "í†µê³¼"í•  ê²ƒì…ë‹ˆë‹¤. ì´ëŠ” ì˜ëª»ëœ ì•ˆì •ê°ì„ ì£¼ëŠ”(False Negative) í…ŒìŠ¤íŠ¸ê°€ ë©ë‹ˆë‹¤.
*   **í•´ê²° ë°©ì•ˆ**:
    1.  í•´ë‹¹ ë¡œì§(`normalizeTimestamp`, ì •ë ¬ ë¡œì§ ë“±)ì„ `src/lib/utils/` ë˜ëŠ” `src/services/` ë‚´ì˜ ë³„ë„ ëª¨ë“ˆë¡œ ë¶„ë¦¬í•˜ì—¬ `export` í•˜ì‹­ì‹œì˜¤.
    2.  í…ŒìŠ¤íŠ¸ íŒŒì¼ì—ì„œëŠ” í•´ë‹¹ ëª¨ë“ˆì„ `import`í•˜ì—¬ í…ŒìŠ¤íŠ¸í•´ì•¼ í•©ë‹ˆë‹¤.
    3.  ë§Œì•½ ë¦¬íŒ©í† ë§ì´ ì–´ë µë‹¤ë©´, API Route í•¸ë“¤ëŸ¬ ìì²´ë¥¼ importí•˜ê³  Mock Requestë¥¼ ë³´ë‚´ ê²°ê³¼ë¥¼ ê²€ì¦í•˜ëŠ” ì§„ì •í•œ ì˜ë¯¸ì˜ í†µí•© í…ŒìŠ¤íŠ¸ë¡œ ë³€ê²½í•´ì•¼ í•©ë‹ˆë‹¤.

#### B. Import ê²½ë¡œ ë¬¸ë²• ì˜¤ë¥˜ (Syntax Error)
ì œê³µëœ Diff ìƒì—ì„œ ëª¨ë“  `vi.mock` ë° `import` ê²½ë¡œì— ë¶ˆí•„ìš”í•œ ê³µë°±ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. (Pre-push hookì´ í†µê³¼ë˜ì—ˆë‹¤ê³  í•˜ì…¨ìœ¼ë‚˜, ì½”ë“œìƒìœ¼ë¡œëŠ” ëª…ë°±í•œ ì˜¤ë¥˜ì…ë‹ˆë‹¤.)

*   **ìœ„ì¹˜**: ëª¨ë“  ì‹ ê·œ í…ŒìŠ¤íŠ¸ íŒŒì¼
*   **ë¬¸ì œ ì½”ë“œ**:
    ```typescript
    vi.mock(' @/config/constants', ...); // âŒ '@' ì•ì˜ ê³µë°±
    import ... from ' @/lib/auth/api-auth'; // âŒ '@' ì•ì˜ ê³µë°±
    ```
*   **í•´ê²° ë°©ì•ˆ**: `' @/...'`ë¥¼ `'@/...'`ë¡œ ìˆ˜ì •í•˜ì‹­ì‹œì˜¤. (ë‹¨ìˆœ Copy-paste ì´ìŠˆë¼ë©´ ë¬´ì‹œí•˜ì…”ë„ ì¢‹ìœ¼ë‚˜, ì½”ë“œ ë² ì´ìŠ¤ ë°˜ì˜ ì „ í™•ì¸ í•„ìˆ˜)

### 2. ğŸ’¡ ê°œì„  ê¶Œì¥ ì‚¬í•­ (Suggestions)

#### A. `auth-middleware-integration.test.ts`
*   **Mocks**: `vi.mock`ì„ ì‚¬ìš©í•˜ì—¬ ì˜ì¡´ì„±ì„ ê²©ë¦¬í•œ ì ì€ ì¢‹ìŠµë‹ˆë‹¤.
*   **í™˜ê²½ ë³€ìˆ˜ ë³µì›**: `afterEach`ì—ì„œ `process.env`ë¥¼ ë³µì›í•˜ëŠ” íŒ¨í„´ì€ í›Œë¥­í•©ë‹ˆë‹¤.

#### B. `scenario-data-flow.test.ts`
*   **File System Mock**: `fs` ëª¨ë“ˆì„ ëª¨í‚¹í•˜ì—¬ ì‹œë‚˜ë¦¬ì˜¤ ë°ì´í„° íë¦„ì„ í…ŒìŠ¤íŠ¸í•˜ëŠ” ì ‘ê·¼ì€ ì¢‹ìŠµë‹ˆë‹¤.
*   **ê°œì„ ì **: ì´ í…ŒìŠ¤íŠ¸ ì—­ì‹œ `mockHourlyData`ë¥¼ í•˜ë“œì½”ë”©í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì‹¤ì œ `ScenarioLoader`ê°€ íŒŒì‹±í•˜ëŠ” ë¡œì§ì„ í…ŒìŠ¤íŠ¸í•˜ë ¤ë©´, ê°€ì§œ íŒŒì¼ ë‚´ìš©ì„ `fs.readFileSync.mockReturnValue(...)`ë¡œ ì£¼ì…í•˜ê³ , ì‹¤ì œ ë¡œë”(Loader) í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ íŒŒì‹± ê²°ê³¼ë¥¼ ê²€ì¦í•˜ëŠ” ê²ƒì´ ë” ê°€ì¹˜ ìˆìŠµë‹ˆë‹¤.

### 3. ğŸ›¡ï¸ ë³´ì•ˆ ë° ì„±ëŠ¥ ê²€í† 
*   **ë³´ì•ˆ**: ë¯¼ê°í•œ ì •ë³´ë‚˜ API í‚¤ê°€ í•˜ë“œì½”ë”©ëœ ë¶€ë¶„ì€ ì—†ìœ¼ë©°, Mockingì„ í†µí•´ ì™¸ë¶€ ìœ ì¶œì„ ë°©ì§€í•œ ì ì€ ì–‘í˜¸í•©ë‹ˆë‹¤.
*   **ì„±ëŠ¥**: ì™¸ë¶€ IOë¥¼ ëª¨ë‘ Mocking ì²˜ë¦¬í•˜ì—¬ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì†ë„(Fast Feedback)ë¥¼ í™•ë³´í•œ ì ì€ ìš°ìˆ˜í•©ë‹ˆë‹¤.

---

## âœ… ì¢…í•© ê²°ë¡ 

ì´ ë³€ê²½ì‚¬í•­ì€ í˜„ì¬ ìƒíƒœë¡œ **ë°°í¬ ë¶ˆê°€ëŠ¥**í•©ë‹ˆë‹¤. íŠ¹íˆ ë¡œì§ì„ ë³µì œí•˜ì—¬ í…ŒìŠ¤íŠ¸í•˜ëŠ” ë°©ì‹ì€ ì¥ê¸°ì ì¸ ìœ ì§€ë³´ìˆ˜ì„±ê³¼ ì‹ ë¢°ì„±ì„ í¬ê²Œ í•´ì¹©ë‹ˆë‹¤.

1.  **ìš°ì„  ìˆœìœ„ 1**: `metrics-current-cycle` ë° `servers-all-integration` í…ŒìŠ¤íŠ¸ì—ì„œ ë³µì‚¬ëœ ë¡œì§ì„ ì œê±°í•˜ê³ , ì‹¤ì œ ì†ŒìŠ¤ ì½”ë“œë¥¼ Import í•˜ë„ë¡ ë¦¬íŒ©í† ë§í•˜ì‹­ì‹œì˜¤. (ì´ë¥¼ ìœ„í•´ ì†ŒìŠ¤ ì½”ë“œì˜ êµ¬ì¡° ë³€ê²½ì´ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.)
2.  **ìš°ì„  ìˆœìœ„ 2**: Import ê²½ë¡œì˜ ê³µë°± ì˜¤íƒ€ë¥¼ ìˆ˜ì •í•˜ì‹­ì‹œì˜¤.

**ìŠ¹ì¸ ì—¬ë¶€**: **ê±°ë¶€ (Reject)** - ìœ„ ì‚¬í•­ë“¤ì´ ìˆ˜ì •ëœ í›„ ì¬ê²€í† ê°€ í•„ìš”í•©ë‹ˆë‹¤.

---

## ğŸ“‹ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] ë²„ê·¸ ìœ„í—˜ ì‚¬í•­ í™•ì¸ ì™„ë£Œ
- [ ] ê°œì„  ì œì•ˆ ê²€í†  ì™„ë£Œ
- [ ] TypeScript ì•ˆì „ì„± í™•ì¸ ì™„ë£Œ
- [ ] ë³´ì•ˆ ì´ìŠˆ í™•ì¸ ì™„ë£Œ
- [ ] ì¢…í•© í‰ê°€ í™•ì¸ ì™„ë£Œ

## ğŸš¨ ì˜¤íƒ(False Positive) ê¸°ë¡

<!-- ê±°ë¶€/ì €ì ìˆ˜ê°€ ì˜¤íƒì¸ ê²½ìš° ì•„ë˜ì— ê¸°ë¡ -->
<!-- ì˜ˆì‹œ: - [x] limit ê²€ì¦ ì´ìŠˆ: Mock í•¸ë“¤ëŸ¬ë¼ ì‹¤ì œ ì˜í–¥ ì—†ìŒ -->


---

**ìƒì„± ì‹œê°„**: 2026-01-23 21:39:27
**ë¦¬ë·° íŒŒì¼**: `/mnt/d/cursor/openmanager-vibe-v5/reports/ai-review/pending/review-gemini-2026-01-23-21-38-04.md`
**AI ì—”ì§„**: GEMINI
