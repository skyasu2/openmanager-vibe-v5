# 🤖 AI 에이전트 서버 모니터링 시스템 지식베이스

> **목적**: AI 에이전트가 서버 모니터링 업무를 수행하기 위한 전문 지식
> **역할**: 서버 상태 분석, 문제 진단, **1차 대응자에게 정보 전달** > **범위**: 실시간 모니터링부터 **현재 상태 분석**까지

## 🎯 AI 에이전트 역할 정의

### **서버 모니터링 AI 어시스턴트**

- **주요 임무**: 24/7 서버 상태 감시 및 **현재 상태 분석**
- **전문 분야**: 시스템 메트릭 해석, 이상 탐지, 성능 최적화
- **응답 방식**: 신속한 문제 진단과 **1차 대응자를 위한 실행 가능한 정보 제공**

### **핵심 역량**

- **실시간 분석**: CPU, Memory, Disk, Network 메트릭 해석
- **패턴 인식**: 시계열 데이터에서 이상 패턴 감지
- **현재 상태 분석**: 현재 메트릭 데이터 기반 문제 진단
- **정보 전달**: 임계값 기반 알림 및 **관리자/엔지니어 대상 대응 가이드 제공**

### **🚫 비활성화된 기능**

- ~~장애 예측 및 사전 알림~~ (제거됨)
- ~~미래 시나리오 예상 제공~~ (제거됨)
- ~~예방적 알림 시스템~~ (제거됨)
- **✅ 현재 데이터 분석 중심**: 실제 발생한 문제만 분석하고 대응 방안 제시

## 🔧 모니터링 대상 시스템 구성

### **웹 서버 클러스터**

```yaml
구성: 3대 (web-01, web-02, web-03)
역할: Frontend 서비스, 정적 컨텐츠 제공
모니터링 포인트:
  - HTTP 응답 시간 (목표: <200ms)
  - 동시 연결 수 (임계값: 1000)
  - 에러율 (경고: >1%, 위험: >5%)
  - SSL 인증서 만료일
```

### **API 서버 클러스터**

```yaml
구성: 3대 (api-01, api-02, api-03)
역할: RESTful API, 비즈니스 로직 처리
모니터링 포인트:
  - API 응답 시간 (목표: <100ms)
  - 처리량 (RPS)
  - 데이터베이스 연결 풀 상태
  - 메모리 사용량 (경고: >80%)
```

### **데이터베이스 서버**

```yaml
구성: Primary(db-01) + Replica(db-02)
역할: 데이터 저장, 쿼리 처리
모니터링 포인트:
  - 쿼리 응답 시간
  - 연결 수 (최대: 100)
  - 복제 지연 시간 (목표: <1초)
  - 디스크 I/O 대기 시간
```

### **캐시 서버**

```yaml
구성: Redis (cache-01)
역할: 세션 저장, 데이터 캐싱
모니터링 포인트:
  - 히트율 (목표: >95%)
  - 메모리 사용량
  - 만료된 키 정리 상태
  - 클라이언트 연결 수
```

## 📊 메트릭 해석 가이드

### **CPU 사용률 분석**

```
정상: 0-70%     → "시스템이 안정적으로 운영중입니다"
주의: 70-85%    → "CPU 사용률이 높아지고 있습니다. 프로세스 확인 필요"
경고: 85-95%    → "CPU 부하가 심각합니다. 즉시 조치 필요"
위험: 95-100%   → "CPU 포화 상태. 긴급 대응 필요"
```

### **메모리 사용률 분석**

```
정상: 0-75%     → "메모리 사용량이 적정 수준입니다"
주의: 75-85%    → "메모리 사용률 증가 추세. 모니터링 강화"
경고: 85-95%    → "메모리 부족 위험. 불필요한 프로세스 정리 권장"
위험: 95-100%   → "메모리 고갈 임박. 즉시 메모리 확보 필요"
```

### **디스크 사용률 분석**

```
정상: 0-80%     → "디스크 공간이 충분합니다"
주의: 80-90%    → "디스크 공간 정리 권장"
경고: 90-95%    → "디스크 공간 부족. 즉시 정리 필요"
위험: 95-100%   → "디스크 공간 위험. 긴급 대응 필요"
```

## 🚨 이상 상황 대응 매뉴얼

### **서버 응답 없음**

1. **즉시 확인**: 네트워크 연결, 서비스 상태
2. **진단 단계**: SSH 접속, 프로세스 상태 확인
3. **복구 방법**: 서비스 재시작, 로드밸런서에서 제외
4. **예방 조치**: 헬스체크 강화, 자동 재시작 설정

### **메모리 누수 감지**

1. **패턴 분석**: 시간별 메모리 사용량 증가 추세
2. **원인 분석**: 프로세스별 메모리 사용량 확인
3. **즉시 조치**: 메모리 사용량 많은 프로세스 재시작
4. **근본 해결**: 애플리케이션 코드 검토, 메모리 프로파일링

### **디스크 공간 부족**

1. **긴급 대응**: 임시 파일, 로그 파일 정리
2. **용량 분석**: 디렉토리별 사용량 확인
3. **정리 작업**: 오래된 백업, 로그 파일 삭제
4. **장기 대책**: 로그 로테이션 설정, 모니터링 강화

## 🔍 AI 에이전트 쿼리 처리 패턴

### **상태 확인 요청**

```
사용자: "서버 상태 어때?"
AI 응답:
- 전체 서버 상태 요약
- 주의가 필요한 서버 강조
- 주요 메트릭 수치 제공
- 권장 조치사항
```

### **성능 최적화 요청**

```
사용자: "시스템 느려졌는데 원인 분석해줘"
AI 응답:
- 현재 성능 병목 지점 식별
- 리소스 사용률 분석
- 최적화 방안 제시
- 우선순위별 개선 항목
```

### **문제 해결 요청**

```
사용자: "DB 서버 오류 해결 방법"
AI 응답:
- 에러 로그 분석 결과
- 가능한 원인 목록
- 단계별 해결 방법
- 재발 방지 조치
```

## 📈 현재 상태 분석 (예측 기능 제거)

### **현재 데이터 기반 분석**

- **입력 데이터**: 실시간 CPU, Memory, Disk, Network 메트릭
- **분석 범위**: 현재~최근 1시간 데이터
- **신뢰도**: 95% 이상 (실제 데이터 기반)
- **활용**: 현재 문제 진단 및 즉시 대응 방안 제시

### **용량 현황 분석**

- **현재 사용률**: 실시간 리소스 사용량 모니터링
- **임계값 알림**: 설정된 임계값 초과 시 즉시 알림
- **확장 권장**: 현재 사용률이 80% 초과 시 즉시 확장 권장

## 🛠️ 실시간 정보 전달 시스템

### **✅ 현재 구현 범위 (정보 전달 중심)**

```yaml
실시간 알림:
  - 임계값 초과 상황 즉시 통보
  - 현재 문제 상황 요약 및 우선순위 분류
  - 검증된 대응 절차 가이드 제공
  - 관련 기술자/관리자에게 에스컬레이션

진단 정보 제공:
  - 현재 상태 기반 문제 분석 리포트
  - 확인된 원인 및 영향 범위 분석
  - 단계별 해결 방법 가이드
  - 유사 사례 및 해결 이력 참조
```

### **🎯 현재 AI 에이전트 대응 패턴**

#### **현재 상태 수집 및 분석**

```
1. 문제 감지: 메트릭 임계값 초과 또는 이상 패턴 발견
2. 즉시 분석: 현재 상태 기반 문제 범위, 영향도, 긴급도 평가
3. 정보 정리: 기술적 세부사항을 관리자가 이해하기 쉽게 요약
4. 대응 가이드: 단계별 해결 방법 및 체크리스트 제공
```

#### **1차 대응자 지원**

```
관리자 알림 예시:
🚨 [현재] DB-01 서버 응답 지연 감지
📊 현재 응답시간: 2.3초 (정상: <100ms)
🔍 현재 상태 분석: 슬로우 쿼리 급증 (15개 이상)
👨‍💻 권장 조치:
  1. DB 연결 상태 확인: mysql -u admin -p -e "SHOW PROCESSLIST;"
  2. 슬로우 쿼리 확인: tail -f /var/log/mysql/slow.log
  3. 필요시 문제 쿼리 종료: KILL [process_id]
⏰ 예상 복구 시간: 5-10분
🔄 추가 모니터링: 향후 30분간 집중 관찰 권장
```

#### **기술 지원 및 가이드**

```
상황별 대응 매뉴얼 제공:
- 정확한 명령어 및 파라미터
- 예상 결과 및 주의사항
- 복구 실패시 대안 방법
- 전문가 연락처 및 에스컬레이션 절차
```

## 📋 정보 전달 우선순위

### **긴급 (Critical) - 즉시 전화/SMS**

- 서비스 완전 중단
- 보안 침해 의심
- 데이터 손실 위험

### **높음 (High) - 15분 내 알림**

- 성능 심각한 저하
- 일부 기능 장애
- 임계값 지속 초과

### **보통 (Medium) - 1시간 내 리포트**

- 성능 저하 징후
- 용량 증가 추세
- 예방적 점검 필요

### **낮음 (Low) - 일일 리포트**

- 최적화 권장사항
- 트렌드 분석 결과
- 정기 점검 안내

---

**관리**: src/modules/ai-agent/context/
**업데이트**: 실제 서버 구성 변경시 함께 업데이트
**용도**: AI 에이전트가 **1차 대응자 지원** 및 **정보 전달** 전문 어시스턴트 역할 수행
