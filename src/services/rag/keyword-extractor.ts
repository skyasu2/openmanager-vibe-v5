/**
 * ğŸ“ ì¿¼ë¦¬ì—ì„œ í‚¤ì›Œë“œ ì¶”ì¶œ
 */
export function extractKeywords(query: string): string[] {
  // í•œêµ­ì–´ì™€ ì˜ì–´ í‚¤ì›Œë“œ ì¶”ì¶œ
  const normalizedQuery = query.toLowerCase().trim();

  // ë¶ˆìš©ì–´ ì œê±°
  const stopWords = new Set([
    // ì˜ì–´ ë¶ˆìš©ì–´
    'the',
    'is',
    'at',
    'which',
    'on',
    'and',
    'or',
    'but',
    'in',
    'with',
    'a',
    'an',
    'as',
    'are',
    'was',
    'were',
    'been',
    'be',
    'have',
    'has',
    'had',
    'do',
    'does',
    'did',
    'will',
    'would',
    'should',
    'could',
    'can',
    'may',
    'might',
    'must',
    'shall',
    'to',
    'of',
    'for',
    'by',
    'from',
    'up',
    'about',
    'into',
    'through',
    'during',
    'before',
    'after',
    'above',
    'below',
    'between',
    'among',
    'this',
    'that',
    'these',
    'those',
    'i',
    'me',
    'my',
    'myself',
    'we',
    'our',
    'ours',
    'ourselves',
    'you',
    'your',
    'yours',
    'yourself',
    'yourselves',
    'he',
    'him',
    'his',
    'himself',
    'she',
    'her',
    'hers',
    'herself',
    'it',
    'its',
    'itself',
    'they',
    'them',
    'their',
    'theirs',
    'themselves',

    // í•œêµ­ì–´ ë¶ˆìš©ì–´
    'ì´',
    'ê·¸',
    'ì €',
    'ì˜',
    'ê°€',
    'ì´ê°€',
    'ì—ì„œ',
    'ìœ¼ë¡œ',
    'ë¡œ',
    'ì—',
    'ê³¼',
    'ì™€',
    'ì„',
    'ë¥¼',
    'ì€',
    'ëŠ”',
    'ë„',
    'ë§Œ',
    'ê¹Œì§€',
    'ë¶€í„°',
    'ì—ê²Œ',
    'ì—ê²Œì„œ',
    'í•œí…Œ',
    'í•œí…Œì„œ',
    'ê»˜',
    'ê»˜ì„œ',
    'ì´ë‹¤',
    'ìˆë‹¤',
    'ì—†ë‹¤',
    'í•˜ë‹¤',
    'ë˜ë‹¤',
    'ê°™ë‹¤',
    'ë‹¤ë¥´ë‹¤',
    'í¬ë‹¤',
    'ì‘ë‹¤',
    'ë§ë‹¤',
    'ì ë‹¤',
    'ì¢‹ë‹¤',
    'ë‚˜ì˜ë‹¤',
    'ìƒˆë¡­ë‹¤',
    'ì˜¤ë˜ë˜ë‹¤',
    'ë†’ë‹¤',
    'ë‚®ë‹¤',
    'ë¹ ë¥´ë‹¤',
    'ëŠë¦¬ë‹¤',
    'ê·¸ë¦¬ê³ ',
    'í•˜ì§€ë§Œ',
    'ê·¸ëŸ¬ë‚˜',
    'ë˜í•œ',
    'ê·¸ë˜ì„œ',
    'ë”°ë¼ì„œ',
    'ê·¸ëŸ°ë°',
    'ë˜ëŠ”',
    'í˜¹ì€',
    'ì–´ë–¤',
    'ë¬´ì—‡',
    'ëˆ„êµ¬',
    'ì–´ë””',
    'ì–¸ì œ',
    'ì™œ',
    'ì–´ë–»ê²Œ',
    'ì–¼ë§ˆë‚˜',
  ]);

  // ë‹¨ì–´ ë¶„ë¦¬ ë° ì •ì œ
  const words = normalizedQuery
    .replace(/[^\w\sê°€-í£]/g, ' ') // íŠ¹ìˆ˜ë¬¸ì ì œê±°
    .split(/\s+/)
    .filter(
      (word) =>
        word.length > 1 && // 1ê¸€ì ì´ìƒ
        word.length < 20 && // 20ê¸€ì ë¯¸ë§Œ
        !stopWords.has(word) && // ë¶ˆìš©ì–´ ì œì™¸
        !/^\d+$/.test(word) // ìˆœìˆ˜ ìˆ«ì ì œì™¸
    )
    .slice(0, 10); // ìµœëŒ€ 10ê°œ í‚¤ì›Œë“œ

  return [...new Set(words)]; // ì¤‘ë³µ ì œê±°
}
