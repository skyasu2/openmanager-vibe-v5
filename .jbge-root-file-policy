# JBGE Root File Policy
# Just Barely Good Enough 문서 관리 정책

## 원칙
- 최소 루트 유지: 루트에는 프로젝트 진입에 필수 문서/설정만 존재해야 합니다.
- 명시적 화이트리스트 우선: 허용 목록이 어떤 블랙리스트/이동 규칙보다 우선합니다.
- 가역성 보장: 자동 이동은 항상 되돌릴 수 있어야 하며, 변경 로그를 남깁니다.
- 예외 명시: AGENTS.md는 항상 루트에 고정되며, 자동화가 이동하지 않습니다.

## 허용된 루트 파일 종류

### Core Documentation
- README.md          # 프로젝트 개요 및 시작 가이드
- CHANGELOG.md       # 최신 변경사항 (현재 버전)
- CHANGELOG-LEGACY.md # 레거시 변경사항 아카이브

### AI Assistant Guides
- CLAUDE.md          # Claude Code 설정 및 사용법
- GEMINI.md          # Gemini CLI 통합 및 워크플로우
- QWEN.md            # Qwen CLI 협업 패턴
- KIRO.md            # Kiro CLI 멀티에이전트 오케스트레이터
- AGENTS.md          # Codex CLI 설정 파일 (항상 루트에 유지)

### Dotfiles & Config (패턴)
- .gitignore, .gitattributes, .eslintrc.*, .prettierrc, .npmrc, .nvmrc
- .jbge-root-file-policy, .jbge-essential-docs, .windsurfrules
- .serena-project.yml, .securityignore

### Configuration Files (허용)
- package.json, tsconfig.json, next.config.mjs 등
- .env 파일들, .gitignore, .eslintrc.json 등

## 금지된 루트 파일
- 기타 모든 .md 파일 → /docs/ 디렉토리로 이동
  (단, AGENTS.md는 예외: Codex CLI 설정으로 루트에 유지)
- 리포트 파일 (*.json, *.md, *.txt) → /reports/ (집계/진단/벤치마크 등)
- 로그 파일 (*.log, *.log.*) → /logs/
- 분석 스크립트 및 산출물 → /scripts/analysis/
- 임시/드래프트 파일 → /temp/ 또는 /docs/drafts/
- 리포트 파일 (*.json, *.log) → /reports/, /logs/ 디렉토리로 이동
- 분석 스크립트 → /scripts/analysis/ 디렉토리로 이동
- 임시 파일, 테스트 파일 → /temp/ 디렉토리로 이동

## 정책 적용
- docs-manager 에이전트가 자동 감시
- quality-assurance 에이전트가 주기적 검사
- 위반 시 자동 이동:
  - .md 파일 → /docs/ 또는 /docs/archive/
    (AGENTS.md는 예외 적용: Codex CLI 설정으로 이동 금지)
  - 리포트 파일 → /reports/
  - 로그 파일 → /logs/  
  - 분석 스크립트 → /scripts/analysis/
  - 임시 파일 → /temp/

### 자동 이동 규칙 상세 (문서정리 Sub-Agent용)
- 우선순위: 허용 화이트리스트 > 예외(AGENTS.md Codex 설정) > 자동 이동 규칙
- /docs/ vs /docs/archive/: 생성일 또는 최종 수정일이 90일 경과 시 /docs/archive/로 이동 권고
- 보고서 패턴: `*report*.(md|txt|json)` 또는 `reports-*.*` → /reports/
- 로그 패턴: `*.log` 또는 `*.log.*` → /logs/
- 분석 스크립트: `*analysis*.(js|ts|mjs)` → /scripts/analysis/
- 드래프트: `DRAFT_*` 또는 `*_draft.*` → /docs/drafts/ (루트에 24시간 초과 시)
- 임시: `tmp-*`, `*.tmp` → /temp/

### 충돌 및 안전장치
- 동일 파일명 존재 시 `name (n).ext` 형식으로 증가 suffix 부여
- 대용량/바이너리 파일은 이동 전 사용자 확인 필요 (200MB 초과)
- 링크/참조 불명확 시 이동 대신 제안만 생성 (PR 템플릿 활용)

### 운영 절차 (자동화 권장)
1) 루트 스캔 → 규칙 매핑 → 이동 계획 생성 (dry-run 리포트)
2) 예외 및 화이트리스트 재확인 (AGENTS.md Codex 설정 고정)
3) 이동 실행 → 변경 요약을 `reports/docs-move-log.md`에 append
4) PR 생성 시 요약 포함: 이동 사유/규칙/대상/충돌 해결 방식
5) 24시간 유예가 필요한 파일은 `DRAFT_` 접두사 부여 후 경고 남김

## 예외 처리
- 임시적으로 필요한 경우 24시간 이내 정리
- 새로운 AI 가이드 추가 시 사전 승인 필요
 - AGENTS.md는 항상 루트에 유지 (Codex CLI 설정으로 예외 규칙 우선)
