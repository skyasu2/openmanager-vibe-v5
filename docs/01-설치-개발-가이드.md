# 🛠️ OpenManager Vibe V5 - 통합 설치 및 개발 가이드

> **프로젝트**: OpenManager Vibe V5 - 지능형 AI 기반 서버 모니터링 시스템  
> **개발환경**: Node.js 18+, Next.js 14, TypeScript, Python 3.9+  
> **배포환경**: Vercel, Docker, AWS, GCP  

---

## 🚀 **빠른 시작**

### **1. 기본 설치 (5분)**

```bash
# 1. 저장소 클론
git clone https://github.com/your-org/openmanager-vibe-v5.git
cd openmanager-vibe-v5

# 2. Node.js 의존성 설치
npm install

# 3. 환경 변수 설정
cp .env.example .env.local

# 4. 개발 서버 시작
npm run dev
```

### **2. 접속 확인**
- **대시보드**: http://localhost:3000
- **AI 에이전트**: 우상단 "AI 에이전트" 버튼 클릭
- **관리자**: http://localhost:3000/admin

---

## 🔧 **상세 설치 가이드**

### **1. 시스템 요구사항**

#### **개발 환경**
```bash
# 필수
Node.js: 18.17.0 이상
npm: 9.0.0 이상
Python: 3.9.0 이상

# 권장
메모리: 8GB 이상
디스크: 10GB 여유 공간
OS: Windows 10/11, macOS 12+, Ubuntu 20.04+
```

#### **프로덕션 환경**
```bash
# Vercel 배포
메모리: 1GB (Hobby) / 3GB (Pro)
빌드 시간: 10분 이하
함수 실행: 10초 이하

# 도커 배포
메모리: 2GB 이상
CPU: 2코어 이상
```

### **2. 환경별 설치**

#### **🖥️ 로컬 개발 환경**

```bash
# 1. Node.js 설치 확인
node --version  # v18.17.0+
npm --version   # 9.0.0+

# 2. Python 설치 확인
python3 --version  # 3.9.0+
pip3 --version

# 3. 프로젝트 설정
git clone <repository-url>
cd openmanager-vibe-v5

# 4. 의존성 설치
npm install

# 5. Python 패키지 설치 (선택사항)
# 경량 버전 (권장)
npm run python:install-lightweight

# 전체 버전 (로컬 개발용)
npm run python:install

# 6. 환경 변수 설정
cp .env.example .env.local
```

**.env.local 설정:**
```bash
# 기본 설정
NODE_ENV=development
NEXT_PUBLIC_APP_URL=http://localhost:3000

# AI 엔진 설정 (선택사항)
PYTHON_PATH=python3
AI_ENGINE_MODE=optimized

# 데이터베이스 설정 (선택사항)
# Supabase 또는 기타 DB 연결 정보
```

#### **☁️ Vercel 배포**

```bash
# 1. Vercel CLI 설치
npm install -g vercel

# 2. 프로젝트 빌드 테스트
npm run build

# 3. Vercel 배포
vercel --prod

# 4. 환경 변수 설정 (Vercel 대시보드)
VERCEL_PLAN=hobby  # 또는 pro
NODE_ENV=production
NEXT_PUBLIC_APP_URL=https://your-domain.vercel.app
```

#### **🐳 Docker 배포**

```dockerfile
# Dockerfile
FROM node:18-alpine AS base

# 의존성 설치
FROM base AS deps
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production

# 빌드
FROM base AS builder
WORKDIR /app
COPY . .
COPY --from=deps /app/node_modules ./node_modules
RUN npm run build

# 실행
FROM base AS runner
WORKDIR /app
ENV NODE_ENV=production
COPY --from=builder /app/public ./public
COPY --from=builder /app/.next/standalone ./
COPY --from=builder /app/.next/static ./.next/static

EXPOSE 3000
CMD ["node", "server.js"]
```

```bash
# Docker 빌드 및 실행
docker build -t openmanager-v5 .
docker run -p 3000:3000 openmanager-v5
```

---

## 🏗️ **개발 환경 설정**

### **1. IDE 설정**

#### **VS Code (권장)**
```json
// .vscode/settings.json
{
  "typescript.preferences.importModuleSpecifier": "relative",
  "editor.formatOnSave": true,
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true
  },
  "files.associations": {
    "*.css": "tailwindcss"
  }
}
```

**추천 확장프로그램:**
- TypeScript Importer
- Tailwind CSS IntelliSense  
- ESLint
- Prettier
- GitLens

#### **Cursor (AI 개발)**
```json
// .cursor/settings.json
{
  "typescript.suggest.autoImports": true,
  "editor.inlineSuggest.enabled": true,
  "github.copilot.enable": {
    "*": true,
    "yaml": false,
    "plaintext": false
  }
}
```

### **2. Git 설정**

```bash
# Git hooks 설정
npm run prepare

# 커밋 메시지 규칙
# feat: 새 기능 추가
# fix: 버그 수정
# docs: 문서 업데이트
# style: 코드 스타일 변경
# refactor: 코드 리팩토링
# test: 테스트 추가/수정
# chore: 기타 작업

# 예시
git commit -m "feat: 순차 서버 생성 API 추가"
git commit -m "fix: AI 엔진 메모리 누수 해결"
```

### **3. 코딩 컨벤션**

#### **파일 구조**
```
src/
├── app/                 # Next.js App Router
│   ├── api/            # API Routes
│   ├── dashboard/      # 대시보드 페이지
│   └── admin/          # 관리자 페이지
├── components/         # React 컴포넌트
│   ├── ui/            # 기본 UI 컴포넌트
│   ├── dashboard/     # 대시보드 전용
│   └── ai/            # AI 관련 컴포넌트
├── modules/           # 기능별 모듈
│   ├── ai-agent/      # AI 에이전트
│   └── shared/        # 공유 유틸리티
├── hooks/             # React Hooks
├── services/          # 비즈니스 로직
├── types/             # TypeScript 타입
└── lib/               # 유틸리티 함수
```

#### **네이밍 컨벤션**
```typescript
// 컴포넌트: PascalCase
export const ServerCard = () => {};
export const AIAssistantModal = () => {};

// 함수: camelCase
export const generateServerData = () => {};
export const processAIQuery = () => {};

// 상수: SCREAMING_SNAKE_CASE
export const API_ENDPOINTS = {
  SERVERS: '/api/servers',
  AI_AGENT: '/api/ai-agent'
};

// 타입/인터페이스: PascalCase
export interface ServerMetrics {
  cpu: number;
  memory: number;
  disk: number;
}

// 파일명: kebab-case
server-generation-progress.tsx
ai-assistant-modal.tsx
use-sequential-server-generation.ts
```

---

## 🧪 **개발 워크플로우**

### **1. 기능 개발 과정**

```bash
# 1. 브랜치 생성
git checkout -b feat/new-server-animation

# 2. 개발 진행
# 파일 수정 및 테스트

# 3. 린트 및 타입 체크
npm run lint
npm run type-check

# 4. 로컬 빌드 테스트
npm run build

# 5. 커밋 및 푸시
git add .
git commit -m "feat: 새로운 서버 애니메이션 추가"
git push origin feat/new-server-animation

# 6. Pull Request 생성
```

### **2. 주요 npm 스크립트**

```json
{
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint",
    "lint:fix": "next lint --fix",
    "type-check": "tsc --noEmit",
    "test": "jest",
    "test:watch": "jest --watch",
    "clean": "rm -rf .next node_modules/.cache",
    "python:install": "pip3 install -r requirements.txt",
    "python:install-lightweight": "pip3 install -r requirements-light.txt",
    "python:test": "python3 -m pytest tests/",
    "ai:test": "node scripts/test-ai-engine.js",
    "sequential:test": "node scripts/test-sequential-generation.js"
  }
}
```

### **3. 테스트 전략**

#### **단위 테스트**
```typescript
// __tests__/components/ServerCard.test.tsx
import { render, screen } from '@testing-library/react';
import { ServerCard } from '@/components/dashboard/ServerCard';

describe('ServerCard', () => {
  const mockServer = {
    id: 'test-1',
    hostname: 'web-server-01',
    status: 'online',
    cpu: 75,
    memory: 68
  };

  it('서버 정보를 올바르게 표시한다', () => {
    render(<ServerCard server={mockServer} />);
    
    expect(screen.getByText('web-server-01')).toBeInTheDocument();
    expect(screen.getByText('75%')).toBeInTheDocument();
  });
});
```

#### **API 테스트**
```typescript
// __tests__/api/servers/next.test.ts
import { POST } from '@/app/api/servers/next/route';

describe('/api/servers/next', () => {
  it('새 서버를 순차적으로 생성한다', async () => {
    const request = new Request('http://localhost:3000/api/servers/next', {
      method: 'POST',
      body: JSON.stringify({ currentCount: 5 })
    });

    const response = await POST(request);
    const data = await response.json();

    expect(data.success).toBe(true);
    expect(data.currentCount).toBe(6);
    expect(data.server).toBeDefined();
  });
});
```

#### **E2E 테스트**
```typescript
// e2e/dashboard.spec.ts
import { test, expect } from '@playwright/test';

test('대시보드 순차 서버 생성', async ({ page }) => {
  await page.goto('/');
  
  // 순차 생성 시작 확인
  await expect(page.locator('[data-testid=server-progress]')).toBeVisible();
  
  // 20초 후 완료 확인
  await page.waitForSelector('[data-testid=generation-complete]', { 
    timeout: 25000 
  });
  
  // 서버 카드들 확인
  const serverCards = page.locator('[data-testid=server-card]');
  await expect(serverCards).toHaveCount(20);
});
```

---

## 🔧 **문제 해결**

### **1. 일반적인 문제들**

#### **의존성 설치 오류**
```bash
# 캐시 정리 후 재설치
npm cache clean --force
rm -rf node_modules package-lock.json
npm install
```

#### **Python 패키지 오류**
```bash
# Python 환경 재설정
python3 -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip3 install -r requirements-light.txt
```

#### **빌드 오류**
```bash
# TypeScript 오류 확인
npm run type-check

# ESLint 오류 자동 수정
npm run lint:fix

# 캐시 정리 후 재빌드
npm run clean
npm run build
```

#### **Vercel 배포 오류**
```bash
# 로컬 빌드 테스트
npm run build

# 번들 크기 확인
npm run analyze

# 환경 변수 확인
vercel env ls
```

### **2. 성능 최적화**

#### **개발 서버 최적화**
```javascript
// next.config.ts
const nextConfig = {
  experimental: {
    turbo: {
      rules: {
        '*.svg': {
          loaders: ['@svgr/webpack']
        }
      }
    }
  },
  
  // 개발 시 빠른 새로고침
  onDemandEntries: {
    maxInactiveAge: 60 * 1000,
    pagesBufferLength: 5
  }
};
```

#### **메모리 사용량 최적화**
```bash
# Node.js 메모리 제한 증가
export NODE_OPTIONS="--max-old-space-size=4096"

# 또는 package.json
"scripts": {
  "dev": "NODE_OPTIONS='--max-old-space-size=4096' next dev",
  "build": "NODE_OPTIONS='--max-old-space-size=4096' next build"
}
```

---

## 📈 **프로덕션 배포**

### **1. 배포 전 체크리스트**

```bash
# ✅ 필수 검사 항목
□ npm run build 성공
□ npm run type-check 통과
□ npm run lint 통과  
□ 환경 변수 설정 완료
□ API 엔드포인트 테스트 완료
□ 순차 서버 생성 테스트 완료
□ AI 에이전트 동작 확인
□ 모바일 반응형 확인
```

### **2. 환경별 배포 설정**

#### **Vercel 배포**
```json
// vercel.json
{
  "framework": "nextjs",
  "buildCommand": "npm run build",
  "outputDirectory": ".next",
  "installCommand": "npm install",
  "functions": {
    "src/app/api/**/*.ts": {
      "maxDuration": 10
    }
  },
  "headers": [
    {
      "source": "/api/(.*)",
      "headers": [
        { "key": "Cache-Control", "value": "no-cache" }
      ]
    }
  ]
}
```

#### **AWS 배포**
```dockerfile
# 프로덕션 최적화 Dockerfile
FROM node:18-alpine AS base
RUN apk add --no-cache libc6-compat python3 py3-pip
WORKDIR /app

FROM base AS deps
COPY package*.json ./
RUN npm ci --only=production --frozen-lockfile

FROM base AS builder
COPY . .
COPY --from=deps /app/node_modules ./node_modules
RUN npm run build

FROM base AS runner
ENV NODE_ENV=production
RUN addgroup --system --gid 1001 nodejs
RUN adduser --system --uid 1001 nextjs

COPY --from=builder /app/public ./public
COPY --from=builder --chown=nextjs:nodejs /app/.next/standalone ./
COPY --from=builder --chown=nextjs:nodejs /app/.next/static ./.next/static

USER nextjs
EXPOSE 3000
ENV PORT=3000

CMD ["node", "server.js"]
```

---

## 🎯 **개발 팁**

### **1. 생산성 향상**

#### **유용한 VS Code 단축키**
```
Ctrl+Shift+P: 명령 팔레트
Ctrl+`: 터미널 열기
Ctrl+Shift+`: 새 터미널
F2: 변수명 일괄 변경
Ctrl+D: 동일 단어 선택
Alt+Shift+F: 코드 포맷팅
```

#### **개발 도구들**
```bash
# React DevTools
npm install -g react-devtools

# Next.js Bundle Analyzer  
npm run analyze

# 성능 모니터링
npm install -g lighthouse

# API 테스트
brew install httpie  # macOS
# 또는 Postman, Insomnia 사용
```

### **2. 디버깅 방법**

#### **프론트엔드 디버깅**
```typescript
// 개발 환경에서만 로그 출력
if (process.env.NODE_ENV === 'development') {
  console.log('🐛 디버그:', data);
}

// React DevTools Profiler 사용
import { Profiler } from 'react';

function onRenderCallback(id, phase, actualDuration) {
  console.log('⏱️ 렌더링 시간:', actualDuration);
}

<Profiler id="ServerCard" onRender={onRenderCallback}>
  <ServerCard />
</Profiler>
```

#### **백엔드 디버깅**
```typescript
// API 응답 시간 측정
export async function POST(request: NextRequest) {
  const startTime = Date.now();
  
  try {
    const result = await processRequest(request);
    const duration = Date.now() - startTime;
    
    console.log(`⏱️ API 처리 시간: ${duration}ms`);
    return NextResponse.json(result);
  } catch (error) {
    console.error('❌ API 오류:', error);
    return NextResponse.json({ error: 'Internal error' }, { status: 500 });
  }
}
```

---

## 🚀 **다음 단계**

### **1. 고급 기능 개발**
- [ ] 서버 타입 확장 (현재 20개 → 50개)
- [ ] AI 엔진 추가 최적화
- [ ] 실시간 알림 시스템
- [ ] 모바일 앱 개발

### **2. 인프라 개선**
- [ ] 마이크로서비스 아키텍처
- [ ] Kubernetes 배포
- [ ] CI/CD 파이프라인 구축
- [ ] 모니터링 시스템 고도화

### **3. 비즈니스 확장**
- [ ] 다국어 지원
- [ ] 엔터프라이즈 기능
- [ ] API 플랫폼화
- [ ] 오픈소스 커뮤니티 구축

---

**🎉 축하합니다! 이제 OpenManager Vibe V5를 완전히 활용할 준비가 되었습니다.**

추가 질문이나 문제가 있으시면 GitHub Issues나 개발팀에 문의해주세요.

---

*최종 업데이트: 2025년 1월 27일* 