# OpenManager Vibe V5 개발 가이드

OpenManager Vibe V5 프로젝트 개발을 위한 환경 설정, 워크플로우, 코딩 컨벤션 및 프로젝트 구조에 대한 가이드입니다.

## V5 개발 환경 설정

### 필수 요구사항

- **Node.js**: 18.17.0 이상 (LTS 버전 권장)
- **npm** 또는 **yarn**: 최신 버전
- **Git**: 최신 버전
- **IDE**: Visual Studio Code 또는 Cursor 권장 (Cursor AI 활용)

### 개발 환경 구성 단계

1. **저장소 복제**:
```bash
git clone https://github.com/your-username/openmanager-vibe-v5.git
cd openmanager-vibe-v5
```

2. **의존성 설치**:
```bash
npm install
# 또는
yarn install
```

3. **환경 변수 설정**:
   - 프로젝트 루트에 `.env.local` 파일 생성:
```
UPSTASH_REDIS_REST_URL=your_upstash_redis_url
UPSTASH_REDIS_REST_TOKEN=your_upstash_redis_token
SUPABASE_URL=your_supabase_project_url
SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key
NEXT_PUBLIC_APP_URL=http://localhost:3000
```

4. **개발 서버 실행**:
```bash
npm run dev
# 또는
yarn dev
```

5. **로컬 환경 접속**:
   - 브라우저에서 `http://localhost:3000` 접속

### 추가 개발 도구 설정

- **ESLint 및 Prettier**:
  - 설정 파일: `.eslintrc.js`, `.prettierrc`
  - VS Code 익스텐션 설치 권장

- **TypeScript 설정**:
  - `tsconfig.json`에 정의된 설정 사용
  - 타입 체크: `npm run type-check`

- **Husky 및 lint-staged**:
  - 커밋 전 자동 린팅 및 포맷팅

## Vibe Coding 워크플로우

Vibe Coding은 AI 도구를 효과적으로 활용한 개발 방법론입니다. V5 프로젝트에 적용되는 워크플로우는 다음과 같습니다:

### 1. 기능 설계 (Claude/GPT-4 활용)

- **요구사항 분석**: 구현할 기능의 요구사항을 명확히 정의
- **아키텍처 설계**: 시스템 컴포넌트 구조 설계
- **API 설계**: REST API 엔드포인트 정의
- **UI/UX 설계**: 사용자 인터페이스 스케치

**설계 프롬프트 예시**:
```
OpenManager Vibe V5에서 서버 성능 모니터링 대시보드를 설계해주세요.
요구사항:
1. CPU, 메모리, 디스크, 네트워크 사용량을 실시간으로 표시
2. 과거 24시간, 7일, 30일 데이터 트렌드 차트 표시
3. 임계값 초과 시 알림 설정 기능
4. 서버별 필터링 및 그룹화 기능
```

### 2. 코드 구현 (Cursor AI 활용)

- **스켈레톤 코드 생성**: 기본 구조 자동 생성
- **기능 구현**: AI 제안을 기반으로 세부 기능 구현
- **테스트 코드 작성**: 유닛 테스트 및 통합 테스트

**구현 프롬프트 예시**:
```
다음 요구사항에 맞는 서버 성능 모니터링 컴포넌트를 Next.js와 TailwindCSS로 구현해주세요:
- 서버의 CPU, 메모리, 디스크 사용률을 게이지 차트로 표시
- 실시간 업데이트(5초 간격)
- 임계값 초과 시 붉은색으로 강조
- 반응형 디자인 (모바일/데스크톱)
```

### 3. 검토 및 최적화

- **코드 리뷰**: 자동 생성된 코드 검토 및 수정
- **성능 최적화**: 렌더링 최적화, 메모이제이션 적용
- **접근성 개선**: 웹 접근성 표준 준수
- **보안 검토**: 잠재적 보안 취약점 점검

### 4. 배포 및 모니터링

- **CI/CD 파이프라인**: GitHub Actions로 자동화된 테스트 및 배포
- **성능 모니터링**: Vercel Analytics으로 실제 사용자 경험 모니터링
- **피드백 수집**: 사용자 피드백 기반 반복 개선

## 코딩 컨벤션

일관된 코드 스타일을 유지하기 위한 컨벤션입니다.

### 파일 및 폴더 명명 규칙

- **컴포넌트 파일**: PascalCase (예: `ServerStatusCard.tsx`)
- **유틸리티 파일**: camelCase (예: `formatBytes.ts`)
- **폴더명**: kebab-case (예: `server-monitoring`)
- **페이지 파일**: `page.tsx` 또는 `route.ts` (Next.js App Router 규칙)

### TypeScript 규칙

- **타입 정의**: 명시적 타입 선언 지향
- **인터페이스 vs 타입**: 확장 가능성이 있는 경우 인터페이스, 그렇지 않으면 타입
- **타입 위치**: 공통 타입은 `src/types` 디렉토리에 모듈별로 정리
- **타입 접미사**: 인터페이스는 명사형, Props는 `ComponentNameProps` 형식

```typescript
// 좋은 예시
interface ServerStats {
  id: string;
  name: string;
  status: ServerStatus;
  metrics: ServerMetrics;
}

type ServerStatus = 'healthy' | 'warning' | 'critical' | 'offline';

interface ServerMetrics {
  cpu: number;
  memory: number;
  disk: number;
  network: NetworkMetrics;
}

interface NetworkMetrics {
  rx: number;
  tx: number;
}
```

### React 컴포넌트 규칙

- **함수형 컴포넌트** 사용
- **hooks 규칙** 준수
- **소품 구조분해** 적용
- **적절한 메모이제이션** (useMemo, useCallback)

```tsx
// 좋은 예시
import { memo, useState } from 'react';

interface ServerCardProps {
  server: ServerStats;
  onRefresh: () => void;
}

export const ServerCard = memo(function ServerCard({ server, onRefresh }: ServerCardProps) {
  const [isExpanded, setIsExpanded] = useState(false);
  
  const statusColor = {
    healthy: 'text-green-500',
    warning: 'text-yellow-500',
    critical: 'text-red-500',
    offline: 'text-gray-500'
  }[server.status];
  
  return (
    <div className="border rounded-lg p-4 shadow-sm">
      <div className="flex justify-between">
        <h3 className="font-medium">{server.name}</h3>
        <span className={statusColor}>{server.status}</span>
      </div>
      {/* 나머지 UI */}
    </div>
  );
});
```

### 상태 관리 규칙

- **지역 상태**: `useState` 사용
- **컴포넌트 간 상태**: Context API 또는 Zustand 사용
- **서버 상태**: SWR 또는 TanStack Query 사용
- **전역 상태 최소화**: 필요한 상태만 전역으로 관리

### CSS 및 스타일링

- **TailwindCSS** 클래스 우선 사용
- **컴포넌트 분리**: UI 논리와 비즈니스 로직 분리
- **반응형 디자인**: 모바일 우선 접근 방식
- **테마**: 다크/라이트 모드 지원 (`next-themes`)

## 프로젝트 구조 설명

OpenManager Vibe V5의 프로젝트 구조와 각 폴더의 역할입니다.

```
openmanager-vibe-v5/
├── src/                    # 소스 코드
│   ├── app/                # Next.js App Router
│   │   ├── api/            # API 라우트
│   │   │   ├── health/     # 상태 확인 API
│   │   │   ├── mcp/        # MCP(Monitoring Command Processor) API
│   │   │   └── monitoring/ # 모니터링 관련 API
│   │   ├── chat/           # 채팅 인터페이스 페이지
│   │   ├── dashboard/      # 대시보드 페이지
│   │   └── monitoring/     # 모니터링 페이지
│   ├── components/         # 재사용 컴포넌트
│   │   ├── monitoring/     # 모니터링 관련 컴포넌트
│   │   └── ui/             # 기본 UI 컴포넌트
│   ├── config/             # 설정 파일
│   ├── data/               # 정적 데이터 및 상수
│   ├── hooks/              # 커스텀 React 훅
│   ├── lib/                # 유틸리티 함수
│   │   └── monitoring/     # 모니터링 관련 유틸리티
│   ├── modules/            # 핵심 비즈니스 모듈
│   │   ├── mcp/            # MCP 모듈
│   │   │   └── core/       # MCP 핵심 기능
│   │   └── storage/        # 스토리지 모듈
│   │       └── hybrid/     # 하이브리드 스토리지 구현
│   └── types/              # TypeScript 타입 정의
├── public/                 # 정적 파일
├── docs/                   # 문서
├── .env.example            # 환경 변수 예시
├── .eslintrc.js            # ESLint 설정
├── .prettierrc             # Prettier 설정
├── next.config.ts          # Next.js 설정
├── package.json            # 패키지 정보
├── postcss.config.js       # PostCSS 설정
├── tailwind.config.js      # Tailwind CSS 설정
└── tsconfig.json           # TypeScript 설정
```

### 주요 폴더 및 파일 설명

#### `/src/app/`
App Router 기반의 페이지 구조입니다. 각 폴더는 경로에 해당합니다.

#### `/src/app/api/`
REST API 엔드포인트를 구현합니다. 각 폴더는 API 그룹을 나타냅니다.

#### `/src/components/`
재사용 가능한 React 컴포넌트를 포함합니다.
- `ui/`: 버튼, 카드 등 기본 UI 요소
- `monitoring/`: 모니터링 관련 특화 컴포넌트

#### `/src/hooks/`
커스텀 React 훅을 포함합니다.
- 예: `useServerStats.ts`, `useRealTimeUpdates.ts`

#### `/src/lib/`
유틸리티 함수와 헬퍼를 포함합니다.
- 예: `formatters.ts`, `api-client.ts`

#### `/src/modules/`
핵심 비즈니스 로직을 포함하는 모듈입니다.
- `mcp/`: 자연어 처리 및 명령 해석
- `storage/`: 데이터 저장 및 캐싱 로직

#### `/src/types/`
프로젝트 전체에서 사용되는 TypeScript 타입 정의입니다.
- 예: `server.ts`, `metrics.ts`, `api.ts`

## 모범 사례 및 팁

- **컴포넌트 설계**: 작고 재사용 가능한 컴포넌트 만들기
- **성능 최적화**: React DevTools로 렌더링 성능 모니터링
- **접근성**: ARIA 속성 및 시맨틱 HTML 사용
- **테스트**: 중요 컴포넌트 및 유틸리티에 대한 테스트 작성
- **문서화**: JSDoc 스타일 주석으로 함수 및 컴포넌트 문서화
- **Git 사용**: 작은 단위로 자주 커밋, 명확한 커밋 메시지 작성

---

본 가이드는 OpenManager Vibe V5 프로젝트의 개발 표준을 설명합니다. 팀원 모두가 이 가이드라인을 따라 일관된 코드 베이스를 유지해 주시기 바랍니다.