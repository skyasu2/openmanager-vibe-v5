# OpenManager Vibe v5 - 프로젝트 가이드

## 📋 프로젝트 개요

OpenManager Vibe v5는 기업 환경을 위한 프로덕션 레디 서버 모니터링 플랫폼입니다.

### 🎯 핵심 기능

- **실시간 서버 모니터링**: 30개 서버 (Kubernetes 10개, AWS 10개, 온프레미스 10개)
- **이중화 저장소**: Supabase (24시간 보관) + Redis (5분 TTL 캐시)
- **지능형 쿼리**: Redis → Supabase 순차 조회
- **MCP 기반 AI 분석**: 실시간 인과관계 분석
- **더미↔프로덕션 즉시 전환**: 환경변수로 모드 변경

## 🏗️ 아키텍처

### 수집기 아키텍처
```
환경변수 COLLECTOR_MODE
    ↓
[더미 모드]     [프로덕션 모드]
    ↓               ↓
DummyGenerator → [Prometheus/CloudWatch/CustomAPI]
    ↓               ↓
    Storage Service (Redis + Supabase)
    ↓
    Dashboard + AI Analysis
```

### 수집기 유형

1. **Prometheus Collector**
   - Kubernetes 클러스터 모니터링
   - PromQL 쿼리 지원
   - node_exporter 메트릭

2. **CloudWatch Collector**
   - AWS EC2 인스턴스 모니터링
   - CloudWatch API 연동
   - 자동 인스턴스 검색

3. **Custom API Collector**
   - 온프레미스 서버 모니터링
   - REST API 연동
   - 유연한 응답 파싱

## 🚀 시작하기

### 1. 환경 설정
```bash
cp .env.example .env.local
# 환경변수 설정 후
```

### 2. 데이터베이스 설정
```bash
# Supabase 스키마 생성
psql -h [SUPABASE_HOST] -U postgres -d postgres -f scripts/setup-database.sql
```

### 3. 개발 서버 실행
```bash
npm install
npm run dev
```

## 🔧 설정

### 더미 모드 (기본값)
```env
COLLECTOR_MODE=dummy
```

### 프로덕션 모드
```env
COLLECTOR_MODE=production

# Prometheus 설정
PROMETHEUS_URL=http://prometheus:9090

# CloudWatch 설정
AWS_ACCESS_KEY_ID=your_key
AWS_SECRET_ACCESS_KEY=your_secret
AWS_REGION=ap-northeast-2

# Custom API 설정
CUSTOM_API_ENDPOINTS=http://server1:8080/metrics,http://server2:8080/metrics
```

## 📊 모니터링 대상

### Kubernetes 클러스터 (10대)
- 마스터 노드 3대
- 워커 노드 7대

### AWS 인스턴스 (10대)
- EC2 인스턴스 자동 검색
- CloudWatch 메트릭 수집

### 온프레미스 서버 (10대)
- REST API 기반 수집
- 커스텀 메트릭 지원

## 🔍 주요 메트릭

- **시스템 메트릭**: CPU, 메모리, 디스크, 네트워크
- **프로세스 메트릭**: 실행 중인 프로세스 수
- **서비스 메트릭**: 서비스 상태 및 포트 정보
- **성능 메트릭**: 로드 애버리지, 응답 시간

## 🤖 AI 분석

MCP(Model Context Protocol) 기반으로 실시간 인과관계 분석:
- 장애 연관성 분석
- 성능 병목 지점 탐지
- 예측적 장애 방지
- 자동화된 문제 해결 제안

## 📱 사용자 인터페이스

- **대시보드**: 전체 인프라 현황
- **서버 상세**: 개별 서버 심층 분석
- **AI 채팅**: 자연어 기반 인프라 질의
- **데모 모드**: 시나리오 기반 데모

## 🛠️ 개발 도구

- **Next.js 15**: 최신 App Router
- **TypeScript**: 타입 안전성
- **Tailwind CSS**: 유틸리티 퍼스트 CSS
- **Zustand**: 상태 관리
- **Supabase**: 데이터베이스
- **Redis**: 캐싱

## 📚 추가 문서

- `environment-setup.md`: 상세 환경 설정 가이드
- `02-개발가이드.md`: 개발 환경 구축
- `03-API문서.md`: API 엔드포인트 명세
- `04-배포가이드.md`: 프로덕션 배포
- `05-트러블슈팅.md`: 문제 해결

## 🔄 업데이트 정책

앞으로 모든 문서는 **한국어로만** 작성되며, 영어 버전은 생성하지 않습니다. 