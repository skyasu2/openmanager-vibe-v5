# E2E í…ŒìŠ¤íŠ¸ í˜„í™© ë¶„ì„ ë³´ê³ ì„œ

## ğŸ“Š ìš”ì•½ (2025.8.6)

### E2E í…ŒìŠ¤íŠ¸ êµ¬ì„± ìƒíƒœ
- **Playwright ë²„ì „**: 1.54.1 âœ… ì„¤ì¹˜ë¨
- **í…ŒìŠ¤íŠ¸ íŒŒì¼**: 3ê°œ íŒŒì¼
- **ì´ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤**: 68ê°œ (17ê°œ í…ŒìŠ¤íŠ¸ Ã— 4ê°œ ë¸Œë¼ìš°ì €)
- **ì‹¤í–‰ ê°€ëŠ¥ ì—¬ë¶€**: âš ï¸ **ì¡°ê±´ë¶€ ê°€ëŠ¥**

## ğŸ” E2E í…ŒìŠ¤íŠ¸ êµ¬ì„± ë¶„ì„

### 1. í…ŒìŠ¤íŠ¸ íŒŒì¼ êµ¬ì¡°
```
tests/e2e/
â”œâ”€â”€ dashboard.e2e.ts              # ëŒ€ì‹œë³´ë“œ í…ŒìŠ¤íŠ¸ (5ê°œ)
â”œâ”€â”€ system-state-transition.e2e.ts # ì‹œìŠ¤í…œ ìƒíƒœ ì „í™˜ (4ê°œ)  
â”œâ”€â”€ ui-modal-comprehensive.e2e.ts  # UI ëª¨ë‹¬ í…ŒìŠ¤íŠ¸ (8ê°œ)
â”œâ”€â”€ global-setup.ts                # ì „ì—­ ì„¤ì •
â””â”€â”€ global-teardown.ts             # ì „ì—­ ì •ë¦¬
```

### 2. í…ŒìŠ¤íŠ¸ ë‚´ìš©
#### dashboard.e2e.ts (5ê°œ í…ŒìŠ¤íŠ¸)
- âœ… ëŒ€ì‹œë³´ë“œ í˜ì´ì§€ ë¡œë“œ
- âœ… ì„œë²„ ê´€ë ¨ ìš”ì†Œ í‘œì‹œ
- âœ… AI ê´€ë ¨ ê¸°ëŠ¥ ì¡´ì¬
- âœ… ë°˜ì‘í˜• ë™ì‘
- âœ… ê¸°ë³¸ ë„¤ë¹„ê²Œì´ì…˜

#### system-state-transition.e2e.ts (4ê°œ í…ŒìŠ¤íŠ¸)
- âœ… ì‹œìŠ¤í…œ OFF â†’ ON â†’ OFF ì „ì´
- âœ… AI ì—ì´ì „íŠ¸ ê°œë³„ ì‹œì‘/ì¤‘ì§€
- âœ… ìƒíƒœ ì „ì´ ì—ëŸ¬ ì‹œë‚˜ë¦¬ì˜¤
- âœ… 30ë¶„ ìë™ ì¢…ë£Œ íƒ€ì´ë¨¸

#### ui-modal-comprehensive.e2e.ts (8ê°œ í…ŒìŠ¤íŠ¸)
- âœ… AI ì—ì´ì „íŠ¸ ëª¨ë‹¬
- âœ… í†µí•© ì„¤ì • ëª¨ë‹¬
- âœ… ì„œë²„ ìƒì„¸ ì •ë³´ ëª¨ë‹¬
- âœ… ì•Œë¦¼/ê²½ê³  ëª¨ë‹¬
- âœ… í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸ ëª¨ë‹¬
- âœ… ëª¨ë‹¬ ìŠ¤íƒ(ì¤‘ì²©)
- âœ… ëª¨ë‹¬ ì ‘ê·¼ì„±
- âœ… ëª¨ë‹¬ ì„±ëŠ¥

### 3. ë¸Œë¼ìš°ì € ì§€ì›
- **chromium-stable**: Chrome ë¸Œë¼ìš°ì € (ì£¼ë ¥)
- **firefox**: Firefox ë¸Œë¼ìš°ì €
- **webkit**: Safari ë¸Œë¼ìš°ì €
- **Mobile Chrome**: ëª¨ë°”ì¼ ë¸Œë¼ìš°ì €

## âš ï¸ í˜„ì¬ ë¬¸ì œì 

### 1. ì‹¤í–‰ ì‹œ íƒ€ì„ì•„ì›ƒ âŒ
```bash
# ì‹¤í–‰ ì‹œë„
npx playwright test dashboard.e2e.ts:33 --project=chromium-stable
# ê²°ê³¼: 2ë¶„ í›„ íƒ€ì„ì•„ì›ƒ
```

**ì›ì¸ ë¶„ì„**:
- ê°œë°œ ì„œë²„ ì‹œì‘ ì§€ì—° (webServer.timeout: 180000ms = 3ë¶„)
- í™˜ê²½ë³€ìˆ˜ ê²€ì¦ ë¬¸ì œ ê°€ëŠ¥ì„±
- ì˜ì¡´ì„± ë¹Œë“œ ì‹œê°„ ê³¼ë‹¤

### 2. HTML ë¦¬í¬í„° ì„¤ì • ì¶©ëŒ âš ï¸
```
Configuration Error: HTML reporter output folder clashes with the tests output folder
```
- test-results/e2e-reportì™€ test-results í´ë” ì¶©ëŒ
- ì‹¤í–‰ì—ëŠ” ì˜í–¥ ì—†ì§€ë§Œ ë¦¬í¬íŠ¸ ìƒì„± ì‹œ ë¬¸ì œ ê°€ëŠ¥

## âœ… ì¥ì 

### 1. ì™„ë²½í•œ í…ŒìŠ¤íŠ¸ êµ¬ì„±
- 17ê°œì˜ í•µì‹¬ ì‹œë‚˜ë¦¬ì˜¤ ì»¤ë²„
- 4ê°œ ë¸Œë¼ìš°ì € ì§€ì› (í¬ë¡œìŠ¤ ë¸Œë¼ìš°ì €)
- ëª¨ë°”ì¼ í…ŒìŠ¤íŠ¸ í¬í•¨

### 2. ì•ˆì •ì„± ì„¤ì •
- ì¬ì‹œë„ ë¡œì§ (retries: 3 in CI)
- íƒ€ì„ì•„ì›ƒ ì—¬ìœ  (60ì´ˆ)
- ì—ëŸ¬ ëª¨ë‹ˆí„°ë§ ì½”ë“œ í¬í•¨

### 3. ë””ë²„ê¹… ì§€ì›
- trace on failure
- screenshot on failure  
- video on failure
- ìƒì„¸í•œ ë¡œê¹…

## ğŸ”§ í•´ê²° ë°©ë²•

### ì¦‰ì‹œ ì ìš© ê°€ëŠ¥í•œ í•´ê²°ì±…

#### 1. ê°œë°œ ì„œë²„ ë¨¼ì € ì‹¤í–‰
```bash
# í„°ë¯¸ë„ 1
npm run dev

# í„°ë¯¸ë„ 2 (ì„œë²„ ì‹¤í–‰ í›„)
npx playwright test --project=chromium-stable
```

#### 2. í™˜ê²½ë³€ìˆ˜ ì„¤ì •
```bash
export SKIP_ENV_VALIDATION=true
export NODE_ENV=test
```

#### 3. ë‹¨ìˆœí™”ëœ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
```bash
# í—¤ë“œë¦¬ìŠ¤ ëª¨ë“œ ë¹„í™œì„±í™” (ë””ë²„ê¹…ìš©)
npx playwright test --headed --project=chromium-stable dashboard.e2e.ts

# ë‹¨ì¼ í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰
npx playwright test -g "ëŒ€ì‹œë³´ë“œ í˜ì´ì§€ê°€ ì •ìƒì ìœ¼ë¡œ ë¡œë“œëœë‹¤"
```

### ì¥ê¸°ì  ê°œì„ ì‚¬í•­

#### 1. playwright.config.ts ìˆ˜ì •
```typescript
webServer: {
  command: 'npm run dev',
  url: 'http://localhost:3000',
  reuseExistingServer: true,
  timeout: 60000, // 180000 â†’ 60000 (1ë¶„ìœ¼ë¡œ ë‹¨ì¶•)
  env: {
    SKIP_ENV_VALIDATION: 'true',
    NODE_ENV: 'test',
  },
},

// HTML ë¦¬í¬í„° ê²½ë¡œ ìˆ˜ì •
reporter: [
  ['html', { outputFolder: 'playwright-report' }], // ë‹¤ë¥¸ í´ë”ë¡œ ë³€ê²½
],
```

#### 2. í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ ê°œì„ 
```json
// package.json
"test:e2e:setup": "npm run build && npm run dev &",
"test:e2e:run": "playwright test",
"test:e2e": "npm run test:e2e:setup && sleep 10 && npm run test:e2e:run"
```

## ğŸ“ˆ í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€

| ì˜ì—­ | í…ŒìŠ¤íŠ¸ ìˆ˜ | ìƒíƒœ |
|------|----------|------|
| UI ì»´í¬ë„ŒíŠ¸ | 8 | âœ… êµ¬ì„±ë¨ |
| í˜ì´ì§€ ë¡œë“œ | 5 | âœ… êµ¬ì„±ë¨ |
| ìƒíƒœ ê´€ë¦¬ | 4 | âœ… êµ¬ì„±ë¨ |
| ë°˜ì‘í˜• | 1 | âœ… êµ¬ì„±ë¨ |
| ì ‘ê·¼ì„± | 1 | âœ… êµ¬ì„±ë¨ |
| ì„±ëŠ¥ | 1 | âœ… êµ¬ì„±ë¨ |

## ğŸ¯ ê²°ë¡ 

### í˜„ì¬ ìƒíƒœ
- **E2E í…ŒìŠ¤íŠ¸ êµ¬ì„±**: âœ… ì™„ë²½
- **ì‹¤í–‰ ê°€ëŠ¥ì„±**: âš ï¸ ì¡°ê±´ë¶€ (ê°œë°œ ì„œë²„ í•„ìš”)
- **CI/CD í†µí•©**: âŒ ì¶”ê°€ ì„¤ì • í•„ìš”

### ê¶Œì¥ì‚¬í•­
1. **ì¦‰ì‹œ**: ê°œë°œ ì„œë²„ë¥¼ ë¨¼ì € ì‹¤í–‰ í›„ í…ŒìŠ¤íŠ¸
2. **ë‹¨ê¸°**: playwright.config.ts íƒ€ì„ì•„ì›ƒ ì¡°ì •
3. **ì¥ê¸°**: CI/CD íŒŒì´í”„ë¼ì¸ì— E2E í…ŒìŠ¤íŠ¸ í†µí•©

### ì‹¤í–‰ ëª…ë ¹ì–´ (ê¶Œì¥)
```bash
# ê°œë°œ ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì¸ ìƒíƒœì—ì„œ
SKIP_ENV_VALIDATION=true npx playwright test --project=chromium-stable --reporter=list

# ë˜ëŠ” ë””ë²„ê¹… ëª¨ë“œë¡œ
npx playwright test --debug --project=chromium-stable dashboard.e2e.ts
```

---

*ìƒì„±ì¼: 2025.8.6*
*ì‘ì„±ì: Claude Code*