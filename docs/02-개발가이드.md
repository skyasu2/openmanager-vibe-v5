# ğŸ› ï¸ OpenManager AI - ê°œë°œ ê°€ì´ë“œ

## ğŸ¯ ê°œë°œ í™˜ê²½ ê°œìš”

OpenManager AIëŠ” NPUì™€ MCP ì—”ì§„ ê¸°ë°˜ì˜ ì°¨ì„¸ëŒ€ ì„œë²„ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œìœ¼ë¡œ, í†µí•© ì‹œìŠ¤í…œ ì œì–´ì™€ ì ˆì „ ê¸°ëŠ¥ì„ í•µì‹¬ìœ¼ë¡œ í•©ë‹ˆë‹¤.

### ğŸ—ï¸ ê¸°ìˆ  ìŠ¤íƒ
- **Frontend**: Next.js 15, React 19, TypeScript, Tailwind CSS
- **Backend**: Node.js, Next.js API Routes
- **Database**: Supabase (PostgreSQL) + Redis
- **AI Engine**: NPU ì‹œë®¬ë ˆì´ì…˜, MCP í”„ë¡œí† ì½œ
- **Deployment**: Vercel, Docker

## ğŸš€ ê°œë°œ í™˜ê²½ ì„¤ì •

### 1. í•„ìˆ˜ ìš”êµ¬ì‚¬í•­
```bash
Node.js >= 18.0.0
npm >= 9.0.0
Git
```

### 2. í”„ë¡œì íŠ¸ í´ë¡  ë° ì„¤ì¹˜
```bash
git clone https://github.com/skyasu2/openmanager-vibe-v5.git
cd openmanager-vibe-v5
npm install
```

### 3. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
```bash
cp .env.example .env.local
```

#### ê¸°ë³¸ í™˜ê²½ ë³€ìˆ˜
```env
# ê°œë°œ ëª¨ë“œ
NODE_ENV=development

# Supabase ì„¤ì • (ì„ íƒì‚¬í•­)
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key

# Redis ì„¤ì • (ì„ íƒì‚¬í•­)
REDIS_URL=redis://localhost:6379

# í”„ë¡œë•ì…˜ ëª¨ë“œ (ì‹¤ì œ ì„œë²„ ëª¨ë‹ˆí„°ë§)
DEPLOY_MODE=production
PRIMARY_SOURCE=ssh  # ssh, snmp, agent, api
```

### 4. ê°œë°œ ì„œë²„ ì‹¤í–‰
```bash
npm run dev
# http://localhost:3000 ì ‘ì†
```

## ğŸ—ï¸ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
src/
â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”œâ”€â”€ api/               # API ë¼ìš°íŠ¸
â”‚   â”‚   â”œâ”€â”€ power/         # ì‹œìŠ¤í…œ ì œì–´ API
â”‚   â”‚   â”œâ”€â”€ data-generator/ # ë°ì´í„° ìƒì„±ê¸° API
â”‚   â”‚   â”œâ”€â”€ realtime-data/ # ì‹¤ì‹œê°„ ë°ì´í„° API
â”‚   â”‚   â””â”€â”€ servers/       # ì„œë²„ ê´€ë¦¬ API
â”‚   â”œâ”€â”€ dashboard/         # ëŒ€ì‹œë³´ë“œ í˜ì´ì§€
â”‚   â”œâ”€â”€ demo/             # ë°ëª¨ í˜ì´ì§€
â”‚   â””â”€â”€ page.tsx          # ëœë”© í˜ì´ì§€
â”œâ”€â”€ components/            # React ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ ai/               # AI ê´€ë ¨ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ dashboard/        # ëŒ€ì‹œë³´ë“œ ì»´í¬ë„ŒíŠ¸
â”‚   â””â”€â”€ ui/               # ê³µí†µ UI ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ modules/              # ëª¨ë“ˆí™”ëœ ê¸°ëŠ¥
â”‚   â”œâ”€â”€ ai-agent/         # AI ì—ì´ì „íŠ¸ ëª¨ë“ˆ
â”‚   â”œâ”€â”€ ai-sidebar/       # AI ì‚¬ì´ë“œë°” ëª¨ë“ˆ
â”‚   â”œâ”€â”€ mcp/              # MCP í”„ë¡œí† ì½œ ëª¨ë“ˆ
â”‚   â””â”€â”€ shared/           # ê³µìœ  ëª¨ë“ˆ
â”œâ”€â”€ services/             # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”œâ”€â”€ collectors/       # ë°ì´í„° ìˆ˜ì§‘ê¸°
â”‚   â”œâ”€â”€ storage.ts        # ì €ì¥ì†Œ ì„œë¹„ìŠ¤
â”‚   â””â”€â”€ aiAgent.ts        # AI ì—ì´ì „íŠ¸ ì„œë¹„ìŠ¤
â”œâ”€â”€ stores/               # ìƒíƒœ ê´€ë¦¬
â”‚   â”œâ”€â”€ systemStore.ts    # ì‹œìŠ¤í…œ ìƒíƒœ
â”‚   â””â”€â”€ demoStore.ts      # ë°ëª¨ ìƒíƒœ
â””â”€â”€ types/                # TypeScript íƒ€ì… ì •ì˜
```

## âš¡ í†µí•© ì‹œìŠ¤í…œ ì œì–´ ê°œë°œ

### SystemStore êµ¬ì¡°
```typescript
interface SystemStore {
  state: 'stopped' | 'ai-monitoring' | 'active';
  timer: number;
  sessionInfo: SessionInfo;
  
  startSystem: (duration: number) => void;
  stopSystem: () => void;
  getFormattedTime: () => string;
}
```

### ì‹œìŠ¤í…œ í™œì„±í™” í”Œë¡œìš°
```typescript
// 1. ì‹œìŠ¤í…œ í™œì„±í™”
const handleActivateSystem = async () => {
  // ì‹œìŠ¤í…œ ìƒíƒœ ë³€ê²½
  startSystem(20 * 60); // 20ë¶„
  
  // ë°ì´í„° ìƒì„±ê¸° ìë™ ì‹œì‘
  await fetch('/api/data-generator', {
    method: 'POST',
    body: JSON.stringify({ action: 'start-realtime' })
  });
  
  // AI ì—ì´ì „íŠ¸ í™œì„±í™”
  smartAIAgent.generateAutoReport();
  
  // ëŒ€ì‹œë³´ë“œ ê¶Œí•œ ë¶€ì—¬
  localStorage.setItem('dashboard_auth_token', authToken);
};
```

## ğŸ”§ ë¹Œë“œ ì‹œìŠ¤í…œ ìµœì í™”

### Redis ì„œë²„ ì‚¬ì´ë“œ ì²˜ë¦¬
```typescript
// ì„œë²„ ì‚¬ì´ë“œì—ì„œë§Œ Redis í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”
async function getRedisClient() {
  if (typeof window !== 'undefined') {
    return null; // í´ë¼ì´ì–¸íŠ¸ì—ì„œëŠ” Redis ì‚¬ìš© ì•ˆ í•¨
  }
  
  if (!redis) {
    const { Redis } = await import('ioredis'); // ë™ì  import
    redis = new Redis(REDIS_URL);
  }
  
  return redis;
}
```

### API ê¸°ë°˜ ë°ì´í„° ì ‘ê·¼
```typescript
// í´ë¼ì´ì–¸íŠ¸ì—ì„œëŠ” API í˜¸ì¶œë¡œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
const getServersFromAPI = async (): Promise<Server[]> => {
  if (typeof window !== 'undefined') {
    const response = await fetch('/api/servers');
    return response.json();
  }
  return [];
};
```

## ğŸ­ ë°ì´í„° ìƒì„±ê¸° ê°œë°œ

### ServerDataGenerator êµ¬ì¡°
```typescript
export class ServerDataGenerator {
  private isGenerating: boolean = false;
  private realtimeTimer?: NodeJS.Timeout;
  private readonly REALTIME_DURATION = 10 * 60 * 1000; // 10ë¶„
  private readonly REALTIME_INTERVAL = 5 * 1000; // 5ì´ˆ
  
  async startRealtimeGeneration(): Promise<void> {
    // 10ë¶„ê°„ 5ì´ˆ ê°„ê²© ë°ì´í„° ìƒì„±
  }
  
  stopRealtimeGeneration(): void {
    // ë°ì´í„° ìƒì„± ì¤‘ì§€
  }
}
```

### ë°ì´í„° íŒ¨í„´ ì •ì˜
```typescript
const DATA_PATTERNS: DataPattern[] = [
  {
    id: 'normal',
    name: 'ì •ìƒ ìš´ì˜',
    characteristics: {
      cpuBase: 35,
      memoryBase: 60,
      volatility: 'low',
      hasSpikes: false
    }
  },
  {
    id: 'high-load',
    name: 'ê³ ë¶€í•˜',
    characteristics: {
      cpuBase: 70,
      memoryBase: 85,
      volatility: 'high',
      hasSpikes: true
    }
  }
];
```

## ğŸ¤– AI ì—ì´ì „íŠ¸ ëª¨ë“ˆ ê°œë°œ

### ëª¨ë“ˆ êµ¬ì¡°
```
modules/ai-agent/
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ AIAgentEngine.ts      # ë©”ì¸ ì—”ì§„
â”‚   â”œâ”€â”€ IntentClassifier.ts   # ì˜ë„ ë¶„ë¥˜ê¸°
â”‚   â””â”€â”€ ModeManager.ts        # ëª¨ë“œ ê´€ë¦¬
â”œâ”€â”€ processors/
â”‚   â”œâ”€â”€ ResponseGenerator.ts  # ì‘ë‹µ ìƒì„±
â”‚   â”œâ”€â”€ ActionExecutor.ts     # ì•¡ì…˜ ì‹¤í–‰
â”‚   â””â”€â”€ ContextManager.ts     # ì»¨í…ìŠ¤íŠ¸ ê´€ë¦¬
â””â”€â”€ interfaces/
    â””â”€â”€ types.ts              # íƒ€ì… ì •ì˜
```

### NPU ì‹œë®¬ë ˆì´ì…˜ ì—”ì§„
```typescript
class NPUSimulator {
  async processPattern(input: string): Promise<PatternResult> {
    // NPU ê¸°ë°˜ íŒ¨í„´ ë§¤ì¹­ ì‹œë®¬ë ˆì´ì…˜
    const patterns = this.loadPatterns();
    const scores = patterns.map(p => this.calculateSimilarity(input, p));
    return this.selectBestMatch(scores);
  }
}
```

## ğŸ”‹ ì ˆì „ ì‹œìŠ¤í…œ ê°œë°œ

### 3ë‹¨ê³„ ì ˆì „ ëª¨ë“œ
```typescript
type SystemState = 'stopped' | 'ai-monitoring' | 'active';

const POWER_MODES = {
  stopped: {
    dataCollection: false,
    aiAgent: false,
    interval: 0
  },
  'ai-monitoring': {
    dataCollection: true,
    aiAgent: true,
    interval: 5 * 60 * 1000 // 5ë¶„
  },
  active: {
    dataCollection: true,
    aiAgent: true,
    interval: 30 * 1000 // 30ì´ˆ
  }
};
```

### AI ìë™ ê°ì§€ ë¡œì§
```typescript
const detectAnomalies = (metrics: ServerMetrics): boolean => {
  const thresholds = {
    cpuChange: 20,
    memoryChange: 15,
    diskChange: 10,
    cpuCritical: 90,
    memoryCritical: 95
  };
  
  return (
    metrics.cpu.change > thresholds.cpuChange ||
    metrics.memory.change > thresholds.memoryChange ||
    metrics.cpu.usage > thresholds.cpuCritical ||
    metrics.memory.usage > thresholds.memoryCritical
  );
};
```

## ğŸ“Š ë°ì´í„°ë² ì´ìŠ¤ ê°œë°œ

### Supabase ìŠ¤í‚¤ë§ˆ
```sql
-- ì„œë²„ ë©”íŠ¸ë¦­ í…Œì´ë¸”
CREATE TABLE server_metrics (
  id BIGSERIAL PRIMARY KEY,
  server_id VARCHAR(50) NOT NULL,
  hostname VARCHAR(100) NOT NULL,
  timestamp TIMESTAMPTZ NOT NULL,
  cpu_usage DECIMAL(5,2),
  memory_usage DECIMAL(5,2),
  disk_usage DECIMAL(5,2),
  network_bytes_received BIGINT,
  network_bytes_sent BIGINT,
  raw_data JSONB
);

-- ì¸ë±ìŠ¤ ìƒì„±
CREATE INDEX idx_server_metrics_server_id ON server_metrics(server_id);
CREATE INDEX idx_server_metrics_timestamp ON server_metrics(timestamp);
```

### ì´ì¤‘í™” ì €ì¥ ì „ëµ
```typescript
class MetricsStorageService {
  async saveMetrics(metrics: ServerMetrics): Promise<void> {
    // 1. Supabaseì— ì˜êµ¬ ì €ì¥
    await this.saveToSupabase(metrics);
    
    // 2. Redisì— ìºì‹œ ì €ì¥ (ì„œë²„ ì‚¬ì´ë“œì—ì„œë§Œ)
    const redisClient = await getRedisClient();
    if (redisClient) {
      await this.saveToRedis(metrics, redisClient);
    }
  }
}
```

## ğŸ§ª í…ŒìŠ¤íŠ¸ ë° ë””ë²„ê¹…

### ê°œë°œ ë„êµ¬
```bash
# íƒ€ì… ì²´í¬
npm run type-check

# ë¦°íŠ¸ ê²€ì‚¬
npm run lint

# ë¹Œë“œ í…ŒìŠ¤íŠ¸
npm run build

# í”„ë¡œë•ì…˜ ë¯¸ë¦¬ë³´ê¸°
npm run start
```

### ë””ë²„ê¹… íŒ
1. **ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸**: ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ì—ì„œ SystemStore ìƒíƒœ ëª¨ë‹ˆí„°ë§
2. **API ì‘ë‹µ í™•ì¸**: Network íƒ­ì—ì„œ API í˜¸ì¶œ ìƒíƒœ í™•ì¸
3. **Redis ì—°ê²° í™•ì¸**: ì„œë²„ ë¡œê·¸ì—ì„œ Redis ì—°ê²° ìƒíƒœ í™•ì¸
4. **ë°ì´í„° ìƒì„±ê¸° ìƒíƒœ**: ì½˜ì†”ì—ì„œ ìƒì„±ê¸° ë¡œê·¸ í™•ì¸

### í™˜ê²½ë³„ í…ŒìŠ¤íŠ¸
```bash
# ê°œë°œ í™˜ê²½ (ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œ)
NODE_ENV=development npm run dev

# í”„ë¡œë•ì…˜ í™˜ê²½ (ì‹¤ì œ ì„œë²„ ì—°ë™)
NODE_ENV=production DEPLOY_MODE=production npm run build
```

## ğŸš€ ë°°í¬ ì¤€ë¹„

### Vercel ë°°í¬ ì„¤ì •
```json
// vercel.json
{
  "buildCommand": "npm run build",
  "outputDirectory": ".next",
  "framework": "nextjs",
  "functions": {
    "app/api/**/*.ts": {
      "maxDuration": 30
    }
  }
}
```

### í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
```bash
# Vercel í™˜ê²½ ë³€ìˆ˜
vercel env add NODE_ENV production
vercel env add DEPLOY_MODE production
vercel env add DATABASE_URL [your-database-url]
vercel env add REDIS_URL [your-redis-url]
```

## ğŸ”§ ë¬¸ì œ í•´ê²°

### ì¼ë°˜ì ì¸ ë¬¸ì œë“¤

#### 1. Redis ì—°ê²° ì˜¤ë¥˜
```bash
# í•´ê²°: Redisë¥¼ ì„œë²„ ì‚¬ì´ë“œì—ì„œë§Œ ì‚¬ìš©í•˜ë„ë¡ ìˆ˜ì •ë¨
# í´ë¼ì´ì–¸íŠ¸ì—ì„œëŠ” ìë™ìœ¼ë¡œ Supabase fallback ì‚¬ìš©
```

#### 2. ë¹Œë“œ ì˜¤ë¥˜
```bash
# Node.js ëª¨ë“ˆ í´ë¼ì´ì–¸íŠ¸ import ì˜¤ë¥˜
# í•´ê²°: ë™ì  importì™€ í™˜ê²½ ê°ì§€ ì‚¬ìš©
```

#### 3. íƒ€ì… ì˜¤ë¥˜
```bash
# TypeScript íƒ€ì… ë¶ˆì¼ì¹˜
npm run type-check
# íƒ€ì… ì •ì˜ íŒŒì¼ í™•ì¸ ë° ìˆ˜ì •
```

## ğŸ“š ì¶”ê°€ ë¦¬ì†ŒìŠ¤

- [Next.js 15 ë¬¸ì„œ](https://nextjs.org/docs)
- [TypeScript í•¸ë“œë¶](https://www.typescriptlang.org/docs/)
- [Tailwind CSS ê°€ì´ë“œ](https://tailwindcss.com/docs)
- [Supabase ë¬¸ì„œ](https://supabase.com/docs)
- [Redis ê°€ì´ë“œ](https://redis.io/docs/)

---

**Copyright(c) ì €ì‘ì. All rights reserved.** 