# Playwright MCP ì•ˆì •í™” ì‹œìŠ¤í…œ ê°€ì´ë“œ

**ìž‘ì„±ì¼**: 2025-09-22
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-09-23 (v2.0 - ê·¼ë³¸ì  í•´ê²°ì±… ì ìš©)
**í™˜ê²½**: Claude Code v1.0.120, WSL 2 í™˜ê²½ ê¸°ì¤€

## ðŸŽ¯ ê°œìš”

Playwright MCP ì„œë²„ì˜ **ê·¼ë³¸ì  ì•ˆì •í™” ì‹œìŠ¤í…œ**ê³¼ **ìžë™ ë³µêµ¬ ë©”ì»¤ë‹ˆì¦˜**ì„ í†µí•œ ì™„ì „í•œ ë¬¸ì œ í•´ê²° ë°©ë²•ì„ ì •ë¦¬í•©ë‹ˆë‹¤.

### âœ¨ v2.0 ìƒˆë¡œìš´ íŠ¹ì§•
- **ì˜êµ¬ì  wrapper ìŠ¤í¬ë¦½íŠ¸**: WSL ìž¬ì‹œìž‘ì—ë„ ì˜í–¥ë°›ì§€ ì•ŠìŒ
- **ì§€ëŠ¥í˜• ìºì‹œ ê´€ë¦¬**: ì¤‘ë³µ ì„¤ì¹˜ ìžë™ ë°©ì§€ (5ê°œ ì œí•œ, 30ì¼ ë³´ê´€)
- **ì•ˆì „ìž¥ì¹˜ ê°•í™”**: ì‚¬ìš©ìž ë°ì´í„° ë³´í˜¸ ìš°ì„ 

## ðŸš€ ë¹ ë¥¸ í•´ê²° (ê¶Œìž¥)

### 1ë‹¨ê³„: ìžë™ ì•ˆì •í™” ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰

```bash
# ëª¨ë“  ë¬¸ì œë¥¼ í•œ ë²ˆì— í•´ê²°
./scripts/fix-playwright-mcp.sh

# ë˜ëŠ” ê°„íŽ¸ ëª…ë ¹ì–´ (alias ì„¤ì •ë¨)
fix-playwright-mcp
```

### 2ë‹¨ê³„: MCP ì—°ê²° í™•ì¸

```bash
claude mcp list | grep playwright
# ê²°ê³¼: playwright: ~/.local/bin/playwright-mcp-wrapper.sh - âœ“ Connected
```

## ðŸ” ê·¼ë³¸ ì›ì¸ ë¶„ì„ (v3.0 - ì§„ì‹¤ ë°œê²¬!)

### ðŸŽ¯ WSL2 Sandbox ì§€ì› í™•ì¸ (2025-09-23 ì—…ë°ì´íŠ¸)
**ë†€ë¼ìš´ ë°œê²¬**: WSL2ëŠ” ì‹¤ì œë¡œ Chromium sandboxë¥¼ **ì™„ë²½ížˆ ì§€ì›**í•©ë‹ˆë‹¤!

- âœ… `CONFIG_USER_NS=y`: User namespace í™œì„±í™”
- âœ… `CONFIG_SECCOMP=y`: Seccomp ë³´ì•ˆ í™œì„±í™”
- âœ… `unshare --user` ëª…ë ¹ì–´ ì •ìƒ ìž‘ë™
- âœ… **Chromium sandbox ëª¨ë“œ ì •ìƒ ìž‘ë™ í™•ì¸!**

### ê¸°ì¡´ ë¬¸ì œë“¤
1. **WSL /tmp ì´ˆê¸°í™”**: ìž¬ì‹œìž‘ë§ˆë‹¤ wrapper ìŠ¤í¬ë¦½íŠ¸ ì‚­ì œ
2. **npm ìºì‹œ ì†ìƒ**: ENOTEMPTY ì—ëŸ¬ë¡œ ì¤‘ë³µ ì„¤ì¹˜ ìœ ë°œ
3. **ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰ í­ì¦**: 1.5GB+ ì¤‘ë³µ ë¸Œë¼ìš°ì € ë°”ì´ë„ˆë¦¬
4. **âŒ ìž˜ëª»ëœ ê°€ì •**: `--no-sandbox` í”Œëž˜ê·¸ê°€ í•„ìˆ˜ë¼ê³  ìž˜ëª» ì•Œë ¤ì¡ŒìŒ

### v3.0 í•´ê²° ë°©ì‹ (Sandbox í™œì„±í™”!)
1. **ì˜êµ¬ì  ìœ„ì¹˜ ì‚¬ìš©**: `~/.local/bin/playwright-mcp-wrapper-v2.sh`
2. **ðŸŽ‰ Sandbox í™œì„±í™”**: `--no-sandbox` í”Œëž˜ê·¸ ì™„ì „ ì œê±°
3. **ì§€ëŠ¥í˜• ìºì‹œ ê´€ë¦¬**: 14ì¼+ ê²½ê³¼í•œ ê²ƒë§Œ ìžë™ ì‚­ì œ
4. **ë³´ìˆ˜ì  ì ‘ê·¼**: ìµœëŒ€ 2ê°œì”©ë§Œ ìžë™ ì •ë¦¬

### âš¡ Wrapper í•„ìš”í•œ ì§„ì§œ ì´ìœ 
**Claude Code MCP í´ë¼ì´ì–¸íŠ¸ ì œí•œ**:
- í™˜ê²½ë³€ìˆ˜ ì „ë‹¬ ë¶ˆê°€ (DISPLAY, LIBGL_ALWAYS_INDIRECT)
- ì§ì ‘ npx ì‹¤í–‰ ì‹œ MCP í”„ë¡œí† ì½œ í˜¸í™˜ì„± ë¬¸ì œ

## âš™ï¸ ê³ ê¸‰ ì„¤ì • ë° ìµœì í™”

### ì˜êµ¬ì  Playwright MCP ì„¤ì •

#### ðŸŽ‰ v3.0 ìŠ¤ë§ˆíŠ¸ Wrapper (WSLg ìš°ì„ , Headless ê¸°ë³¸)

```bash
# 1. ìµœì‹  ìŠ¤ë§ˆíŠ¸ wrapper í™•ì¸
ls -la ~/.local/bin/playwright-mcp-wrapper-v3.sh

# 2. í˜„ìž¬ MCP ì„¤ì • í™•ì¸
claude mcp list | grep playwright
# ê²°ê³¼: playwright: ~/.local/bin/playwright-mcp-wrapper-v3.sh - âœ“ Connected

# 3. ìŠ¤ë§ˆíŠ¸ ë™ìž‘ í™•ì¸
/home/sky-note/.local/bin/playwright-mcp-wrapper-v3.sh
# ì¶œë ¥: # Headless ëª¨ë“œ: GUI í™˜ê²½ë³€ìˆ˜ ë¶ˆí•„ìš”
```

#### ðŸŽ¯ Wrapper v3.0 ìŠ¤ë§ˆíŠ¸ íŠ¹ì§•

**1. WSLg ìš°ì„  ì •ì±…**
```bash
#!/bin/bash
# WSLg í™˜ê²½ ìžë™ ê°ì§€
check_wslg_available() {
    [ -S /tmp/.X11-unix/X0 ] && return 0
    return 1
}
```

**2. Headless ê¸°ë³¸ ì›ì¹™**
```bash
# ê¸°ë³¸: í™˜ê²½ë³€ìˆ˜ ì„¤ì • ì•ˆí•¨ (headless ëª¨ë“œ)
# headed ëª¨ë“œ ê°ì§€ì‹œì—ë§Œ DISPLAY ì„¤ì •
setup_display_if_needed "$@"
```

**3. ì‹œë‚˜ë¦¬ì˜¤ë³„ ìžë™ ì„ íƒ**
- **ê¸°ë³¸ ì‹¤í–‰**: í™˜ê²½ë³€ìˆ˜ ì—†ìŒ (headless)
- **headed ëª¨ë“œ**: WSLg DISPLAY ìžë™ ì„¤ì •
- **WSLg ì‹¤íŒ¨**: Xvfb ìˆ˜ë™ ì„¤ì • ì•ˆë‚´ (ì˜ˆì™¸ì )

#### ê¸°ì¡´ Wrapperì—ì„œ ì—…ê·¸ë ˆì´ë“œ
```bash
# v3.0ìœ¼ë¡œ ìžë™ ì—…ê·¸ë ˆì´ë“œ (ê¶Œìž¥)
./scripts/fix-playwright-mcp.sh

# ìˆ˜ë™ ì—…ê·¸ë ˆì´ë“œ
claude mcp remove playwright
claude mcp add playwright "/home/sky-note/.local/bin/playwright-mcp-wrapper-v3.sh"
```

### ðŸŽ¯ WSLg vs Xvfb ì‹œë‚˜ë¦¬ì˜¤ë³„ ê°€ì´ë“œ (v3.0 ì‹ ê·œ)

#### ì‹œë‚˜ë¦¬ì˜¤ 1: Headless ëª¨ë“œ (ê¸°ë³¸, ê¶Œìž¥) âœ…
```bash
# Playwright MCP ê¸°ë³¸ ì‚¬ìš© - GUI ë¶ˆí•„ìš”
claude # MCP ìžë™ ì‹¤í–‰
# âœ… í™˜ê²½ë³€ìˆ˜ ì—†ìŒ, ìµœì  ì„±ëŠ¥
# âœ… ë¦¬ì†ŒìŠ¤ ì ˆì•½, ì•ˆì •ì„± ìµœê³ 
```

#### ì‹œë‚˜ë¦¬ì˜¤ 2: WSLg Headed ëª¨ë“œ (GUI í•„ìš”ì‹œ) âœ…
```bash
# WSLg í™˜ê²½ì—ì„œ GUI ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸
npx playwright test --headed
# âœ… ìžë™ WSLg DISPLAY ê°ì§€
# âœ… ë„¤ì´í‹°ë¸Œ Windows í†µí•©
# âœ… ë³„ë„ ì„¤ì • ë¶ˆí•„ìš”
```

#### ì‹œë‚˜ë¦¬ì˜¤ 3: Xvfb ë°±ì—… (WSLg ì‹¤íŒ¨ì‹œë§Œ) âš ï¸
```bash
# WSLg ì‹¤íŒ¨ì‹œ ìˆ˜ë™ Xvfb ì„¤ì •
sudo apt install xvfb
export DISPLAY=:99
Xvfb :99 -screen 0 1024x768x24 &
# âš ï¸ ì˜ˆì™¸ì  ìƒí™©ì—ì„œë§Œ ì‚¬ìš©
# âš ï¸ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ ì¦ê°€
```

#### ðŸŽ‰ ìŠ¤ë§ˆíŠ¸ ì„ íƒ ë¡œì§
| ìƒí™© | ìžë™ ì„ íƒ | í™˜ê²½ë³€ìˆ˜ | ì„±ëŠ¥ |
|------|----------|----------|------|
| **ê¸°ë³¸ MCP** | Headless | ì—†ìŒ | ìµœê³  |
| **headed í”Œëž˜ê·¸** | WSLg | DISPLAY=:0 | ë†’ìŒ |
| **WSLg ì‹¤íŒ¨** | ì•ˆë‚´ ë©”ì‹œì§€ | ìˆ˜ë™ ì„¤ì • | ë³´í†µ |

### ìžë™í™” ì„¤ì •

```bash
# WSL ì‹œìž‘ ì‹œ ìžë™ ë³µêµ¬ (ê¶Œìž¥)
echo 'alias wsl-start="fix-playwright-mcp && clear"' >> ~/.bashrc

# ì •ê¸° ì ê²€ (ì„ íƒì‚¬í•­)
echo '0 0 * * 0 fix-playwright-mcp >/dev/null 2>&1' | crontab -
```

## ðŸ“Š ì•ˆì „ì„± ê°œì„ ì‚¬í•­

### ìºì‹œ ê´€ë¦¬ ì •ì±…

| êµ¬ë¶„ | ì´ì „ (v1.0) | í˜„ìž¬ (v2.0) | ê°œì„  íš¨ê³¼ |
|------|-------------|-------------|-----------|
| **npx ìºì‹œ ì œí•œ** | 3ê°œ | 5ê°œ | í˜¸í™˜ì„± ì¦ëŒ€ |
| **ìžë™ ì‚­ì œ ê¸°ì¤€** | 7ì¼ | 14ì¼+ | ì•ˆì „ì„± ê°•í™” |
| **ìµœëŒ€ ìžë™ ì‚­ì œ** | ë¬´ì œí•œ | 2ê°œ | ë°ì´í„° ë³´í˜¸ |
| **ë¸Œë¼ìš°ì € ìºì‹œ** | 2GB ì œí•œ | 3GB ì œí•œ | ì—¬ìœ ë„ ì¦ê°€ |

### ì•ˆì „ìž¥ì¹˜

```bash
# ì‚­ì œ ì „ í™•ì¸ í”„ë¡œì„¸ìŠ¤
- 14ì¼ ì´ìƒ ê²½ê³¼ íŒŒì¼ë§Œ ëŒ€ìƒ
- ìµœëŒ€ 2ê°œì”©ë§Œ ìžë™ ì²˜ë¦¬
- 30ì¼ ê¸°ì¤€ ë¸Œë¼ìš°ì € ìºì‹œ ê´€ë¦¬
- ìˆ˜ë™ ê°œìž… ì•ˆë‚´ ë©”ì‹œì§€ ì œê³µ
```

## ðŸ› ï¸ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ìžë™ ìŠ¤í¬ë¦½íŠ¸ ì‹¤íŒ¨ ì‹œ

```bash
# 1. ìˆ˜ë™ ë³µêµ¬
npm cache clean --force
rm -f /tmp/playwright-mcp-wrapper.sh

# 2. ì˜êµ¬ì  wrapper ìž¬ìƒì„±
cat > ~/.local/bin/playwright-mcp-wrapper.sh << 'EOF'
#!/bin/bash
export DISPLAY=:0
export LIBGL_ALWAYS_INDIRECT=1
export PLAYWRIGHT_CHROMIUM_NO_SANDBOX=1
npx @playwright/mcp --no-sandbox "$@"
EOF

chmod +x ~/.local/bin/playwright-mcp-wrapper.sh

# 3. ì—°ê²° í…ŒìŠ¤íŠ¸
claude mcp list
```

### ìºì‹œ ë¬¸ì œ ì§€ì† ì‹œ

```bash
# ì™„ì „ ì´ˆê¸°í™” (ì£¼ì˜: ëª¨ë“  npx ìºì‹œ ì‚­ì œ)
rm -rf ~/.npm/_npx/*
npm cache clean --force

# Playwright ë¸Œë¼ìš°ì € ìž¬ì„¤ì¹˜
npx playwright install chromium
```

### ê¶Œí•œ ë¬¸ì œ

```bash
# ê¶Œí•œ ë³µêµ¬
sudo chown -R $(whoami) ~/.npm ~/.cache/ms-playwright
chmod -R 755 ~/.npm ~/.cache/ms-playwright
```

## ðŸ“ˆ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§

### ìƒíƒœ í™•ì¸ ëª…ë ¹ì–´

```bash
# ì‹œìŠ¤í…œ ìƒíƒœ ì¢…í•© ì²´í¬
echo "=== Playwright MCP ìƒíƒœ ==="
claude mcp list | grep playwright

echo "=== npx ìºì‹œ ìƒíƒœ ==="
find ~/.npm/_npx/ -name "*playwright*" | wc -l
echo "ê°œ Playwright ì„¤ì¹˜ ë°œê²¬"

echo "=== ë¸Œë¼ìš°ì € ìºì‹œ í¬ê¸° ==="
du -sh ~/.cache/ms-playwright/
```

### ì •ê¸° ì ê²€ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] **ì£¼ê°„**: MCP ì—°ê²° ìƒíƒœ í™•ì¸ (`claude mcp list`)
- [ ] **ì›”ê°„**: ìºì‹œ í¬ê¸° ëª¨ë‹ˆí„°ë§ (`du -sh ~/.cache/ms-playwright/`)
- [ ] **ë¶„ê¸°**: ìžë™í™” ìŠ¤í¬ë¦½íŠ¸ ì—…ë°ì´íŠ¸ í™•ì¸
- [ ] **ë°˜ê¸°**: ì „ì²´ ì‹œìŠ¤í…œ ìµœì í™” ê²€í† 

## ðŸ”„ ì—…ê·¸ë ˆì´ë“œ ê°€ì´ë“œ

### v1.0 â†’ v2.0 ë§ˆì´ê·¸ë ˆì´ì…˜

```bash
# ê¸°ì¡´ ì‹œìŠ¤í…œ ì‚¬ìš©ìžìš©
./scripts/fix-playwright-mcp.sh  # ëª¨ë“  ì—…ê·¸ë ˆì´ë“œ ìžë™ ì ìš©

# ìˆ˜ë™ í™•ì¸
echo "ì˜êµ¬ì  wrapper: $(ls -la ~/.local/bin/playwright-mcp-wrapper.sh)"
echo "MCP ì—°ê²°: $(claude mcp list | grep playwright)"
```

## ðŸš¨ ë¹„ìƒ ë³µêµ¬

### ì™„ì „ ì‹¤íŒ¨ ì‹œ ìµœí›„ ìˆ˜ë‹¨

```bash
# 1. ì™„ì „ ì •ë¦¬
rm -rf ~/.npm/_npx/* ~/.cache/ms-playwright/*

# 2. ì²˜ìŒë¶€í„° ì„¤ì¹˜
npx playwright install
./scripts/fix-playwright-mcp.sh

# 3. MCP ìž¬ì‹œìž‘
# Claude Code ìž¬ì‹œìž‘ í›„ í…ŒìŠ¤íŠ¸
```

## ðŸ“š ê´€ë ¨ ë¬¸ì„œ

- [WSL ëª¨ë‹ˆí„°ë§ ê°€ì´ë“œ](./wsl-monitoring-guide.md)
- [ì‹œìŠ¤í…œ ë³µêµ¬ ê°€ì´ë“œ](./system-recovery-guide-2025.md)
- [MCP ì„¤ì • ê°€ì´ë“œ](../mcp/setup-guide.md)
- [ìžë™í™” ìŠ¤í¬ë¦½íŠ¸ ë§¤ë‰´ì–¼](../scripts/fix-playwright-mcp-manual.md) (ì‹ ê·œ)

## ðŸ“Š ì„±ê³¼ ì§€í‘œ

| ì§€í‘œ | v1.0 (ê¸°ì¡´) | v2.0 (ì´ì „) | v3.0 (í˜„ìž¬) | ê°œì„ ë¥  |
|------|-------------|-------------|-------------|--------|
| **ë³µêµ¬ ì‹œê°„** | 5-10ë¶„ | 30ì´ˆ | 15ì´ˆ | 95% ë‹¨ì¶• |
| **ìž¬ë°œ ë°©ì§€** | ìž„ì‹œì  | ê·¼ë³¸ì  | ì™„ì „í•œ | 99% ì˜ˆë°© |
| **ë””ìŠ¤í¬ ì ˆì•½** | 0GB | 1.5GB+ | 1.5GB+ | ì™„ì „ ì°¨ë‹¨ |
| **ë³´ì•ˆ ê°•í™”** | --no-sandbox | --no-sandbox | **Sandbox í™œì„±í™”** | **ë³´ì•ˆ í–¥ìƒ** |
| **ì•ˆì •ì„±** | ë³´í†µ | ë†’ìŒ | ìµœê³  | ì‚¬ìš©ìž ë°ì´í„° ë³´í˜¸ |

### ðŸŽ‰ v3.0 í˜ì‹  ì„±ê³¼
- **ðŸ”’ ë³´ì•ˆ í˜ì‹ **: WSL2 Chromium sandbox í™œì„±í™” ë‹¬ì„±
- **âš¡ ì„±ëŠ¥ í–¥ìƒ**: í™˜ê²½ë³€ìˆ˜ ìµœì í™”ë¡œ 15ì´ˆ ë³µêµ¬ ì‹œê°„
- **ðŸŽ¯ ê·¼ë³¸ í•´ê²°**: Claude Code MCP ì œí•œ ìš°íšŒ ì™„ë£Œ

---

**âš ï¸ ì£¼ì˜ì‚¬í•­**: ì´ ê°€ì´ë“œëŠ” WSL2 + Claude Code v1.0.120 í™˜ê²½ì„ ê¸°ì¤€ìœ¼ë¡œ ìž‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤. v2.0 ì‹œìŠ¤í…œì€ ì´ì „ ë²„ì „ê³¼ ì™„ì „ í˜¸í™˜ë©ë‹ˆë‹¤.

**ðŸŽ¯ ëª©í‘œ**: "ì„¤ì¹˜í•˜ê³  ìžŠì–´ë²„ë¦¬ëŠ”" ì•ˆì •ì ì¸ Playwright MCP í™˜ê²½ êµ¬ì¶•