# ğŸ”§ ë°ì´í„° íë¦„ ê°œì„  ë°©ì•ˆ

> **ë¶„ì„ ì¼ì**: 2025ë…„ 6ì›” 19ì¼  
> **ë¶„ì„ ë²”ìœ„**: í”„ë¡ íŠ¸ì—”ë“œ ì‹œì‘ë²„íŠ¼ â†’ ì„œë²„ ë°ì´í„° ìƒì„± â†’ AI ë¶„ì„ â†’ í”„ë¡ íŠ¸ì—”ë“œ ìˆ˜ì‹ 

## ğŸ“Š í˜„ì¬ ìƒíƒœ ìš”ì•½

### âœ… ì •ìƒ ë™ì‘ ë¶€ë¶„

- **ì„œë²„ ë°ì´í„° ìƒì„±**: 15ê°œ ì„œë²„, 418ms ì‘ë‹µì‹œê°„
- **AI ì˜ˆì¸¡ ì‹œìŠ¤í…œ**: 80% ì‹ ë¢°ë„, 33ms ì‘ë‹µì‹œê°„
- **AI ì¶”ì²œ ì‹œìŠ¤í…œ**: 3ê°œ ì¹´í…Œê³ ë¦¬, 239ms ì‘ë‹µì‹œê°„
- **ëŒ€ì‹œë³´ë“œ í†µí•©**: 615ms ì‘ë‹µì‹œê°„

### âš ï¸ ê°œì„  í•„ìš” ë¶€ë¶„

- **í—¬ìŠ¤ì²´í¬**: 5020ms (ëª©í‘œ: 1000ms ì´í•˜)
- **ì‹œìŠ¤í…œ ì´ˆê¸°í™”**: ì§€ì—° ë°œìƒ
- **ì‹¤ì‹œê°„ ì—°ë™**: AI-ì„œë²„ ë°ì´í„° ê°„ ë™ê¸°í™” ë¶€ì¡±

## ğŸ¯ ê°œì„  ë°©ì•ˆ

### 1. í—¬ìŠ¤ì²´í¬ ìµœì í™”

#### **ë¬¸ì œì **

```javascript
// í˜„ì¬: MCP ì„œë²„ ì—°ê²° íƒ€ì„ì•„ì›ƒìœ¼ë¡œ 5ì´ˆ ì§€ì—°
{"mcp":{"status":"degraded","details":{"error":"This operation was aborted"}}}
```

#### **í•´ê²°ì±…**

```javascript
// src/app/api/health/route.ts ê°œì„ 
export async function GET() {
  const checks = await Promise.allSettled([
    checkEnvironment(),
    checkRedis(),
    checkGenerator(),
    // MCP ì²´í¬ë¥¼ ë³‘ë ¬ë¡œ ì²˜ë¦¬í•˜ë˜ íƒ€ì„ì•„ì›ƒ ë‹¨ì¶•
    Promise.race([
      checkMCP(),
      new Promise(resolve =>
        setTimeout(
          () =>
            resolve({
              status: 'degraded',
              details: { message: 'íƒ€ì„ì•„ì›ƒ (3ì´ˆ)' },
            }),
          3000
        )
      ),
    ]),
  ]);

  // ê²°ê³¼ ì²˜ë¦¬...
}
```

### 2. ë°ì´í„° ìƒì„±ê¸° ì‚¬ì „ ì´ˆê¸°í™”

#### **ë¬¸ì œì **

```javascript
// í˜„ì¬: API ì²« í˜¸ì¶œ ì‹œì—ë§Œ ì´ˆê¸°í™”
if (generator.getAllServers().length === 0) {
  await generator.initialize(); // ì§€ì—° ë°œìƒ
}
```

#### **í•´ê²°ì±…**

```javascript
// src/app/layout.tsxì— ì´ˆê¸°í™” ë¡œì§ ì¶”ê°€
'use client';

import { useEffect } from 'react';
import { RealServerDataGenerator } from '@/services/data-generator/RealServerDataGenerator';

export default function RootLayout({ children }) {
  useEffect(() => {
    // ì•± ì‹œì‘ ì‹œ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ë°ì´í„° ìƒì„±ê¸° ì´ˆê¸°í™”
    const initializeDataGenerator = async () => {
      try {
        const generator = RealServerDataGenerator.getInstance();
        await generator.initialize();
        generator.startAutoGeneration();
        console.log('âœ… ë°ì´í„° ìƒì„±ê¸° ì‚¬ì „ ì´ˆê¸°í™” ì™„ë£Œ');
      } catch (error) {
        console.warn('âš ï¸ ë°ì´í„° ìƒì„±ê¸° ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
      }
    };

    initializeDataGenerator();
  }, []);

  return (
    <QueryClientProvider client={queryClient}>{children}</QueryClientProvider>
  );
}
```

### 3. AI-ì„œë²„ ë°ì´í„° ì‹¤ì‹œê°„ ì—°ë™ ê°•í™”

#### **ë¬¸ì œì **

```javascript
// í˜„ì¬: AI ì˜ˆì¸¡ì´ ìƒ˜í”Œ ë°ì´í„° ê¸°ë°˜
const history = await this.collectServerHistory(serverId);
if (history.length === 0) {
  return this.generateSampleHistory(serverId); // ì‹¤ì œ ë°ì´í„° ë¯¸ì‚¬ìš©
}
```

#### **í•´ê²°ì±…**

```javascript
// src/services/ai/PredictiveAnalytics.ts ê°œì„ 
class PredictiveAnalytics {
  private realTimeDataFeed: Map<string, ServerMetricPoint[]> = new Map();

  async collectServerHistory(serverId: string): Promise<ServerMetricPoint[]> {
    // 1. ì‹¤ì‹œê°„ ë°ì´í„° ìš°ì„  ì‚¬ìš©
    const realtimeData = this.realTimeDataFeed.get(serverId);
    if (realtimeData && realtimeData.length > 10) {
      return realtimeData;
    }

    // 2. APIì—ì„œ ì‹¤ì œ ì„œë²„ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
    try {
      const response = await fetch('/api/servers');
      const data = await response.json();
      const server = data.servers.find(s => s.id === serverId);

      if (server) {
        return this.convertToMetricPoints(server);
      }
    } catch (error) {
      console.warn('ì‹¤ì‹œê°„ ë°ì´í„° ìˆ˜ì§‘ ì‹¤íŒ¨:', error);
    }

    // 3. í´ë°±: ìƒ˜í”Œ ë°ì´í„°
    return this.generateSampleHistory(serverId);
  }

  // ì‹¤ì‹œê°„ ë©”íŠ¸ë¦­ í”¼ë“œ ë“±ë¡
  subscribeToServerMetrics(serverId: string, callback: (metrics: ServerMetricPoint) => void) {
    // WebSocket ë˜ëŠ” í´ë§ìœ¼ë¡œ ì‹¤ì‹œê°„ ë°ì´í„° ìˆ˜ì§‘
    const interval = setInterval(async () => {
      const response = await fetch(`/api/servers/${serverId}/metrics`);
      const metrics = await response.json();

      if (metrics.success) {
        const point = this.convertToMetricPoint(metrics.data);

        // íˆìŠ¤í† ë¦¬ ì—…ë°ì´íŠ¸
        const history = this.realTimeDataFeed.get(serverId) || [];
        history.push(point);

        // ìµœëŒ€ 100ê°œ í¬ì¸íŠ¸ ìœ ì§€
        if (history.length > 100) {
          history.shift();
        }

        this.realTimeDataFeed.set(serverId, history);
        callback(point);
      }
    }, 15000); // 15ì´ˆ ê°„ê²©

    return () => clearInterval(interval);
  }
}
```

### 4. í”„ë¡ íŠ¸ì—”ë“œ ì„±ëŠ¥ ìµœì í™”

#### **ë¬¸ì œì **

```javascript
// í˜„ì¬: ë¶ˆí•„ìš”í•œ ì¬ë Œë”ë§ê³¼ ì¤‘ë³µ API í˜¸ì¶œ
const { servers, isLoading: realtimeLoading } = useRealtimeServers();
// ë§¤ë²ˆ ìƒˆë¡œìš´ ê°ì²´ ìƒì„±ìœ¼ë¡œ ë¬´í•œ ì¬ë Œë”ë§ ìœ„í—˜
```

#### **í•´ê²°ì±…**

```javascript
// src/hooks/api/useRealtimeServers.ts ê°œì„ 
export function useRealtimeServers(options: UseRealtimeServersOptions = {}) {
  const [servers, setServers] = useState<ServerInstance[]>([]);
  const [lastFetch, setLastFetch] = useState<number>(0);
  const cacheRef = useRef<Map<string, any>>(new Map());

  const fetchServers = useCallback(async () => {
    const now = Date.now();

    // ìºì‹œ í™•ì¸ (30ì´ˆ ì´ë‚´ ì¬ì‚¬ìš©)
    if (now - lastFetch < 30000 && cacheRef.current.has('servers')) {
      return cacheRef.current.get('servers');
    }

    try {
      const response = await fetch('/api/servers', {
        headers: {
          'Cache-Control': 'max-age=30'
        }
      });

      const data = await response.json();

      if (data.success) {
        // ìºì‹œ ì €ì¥
        cacheRef.current.set('servers', data.servers);
        setLastFetch(now);
        setServers(data.servers);
        return data.servers;
      }
    } catch (error) {
      console.error('ì„œë²„ ë°ì´í„° ì¡°íšŒ ì‹¤íŒ¨:', error);
    }

    return [];
  }, [lastFetch]);

  // ì¤‘ë³µ í˜¸ì¶œ ë°©ì§€ë¥¼ ìœ„í•œ ë””ë°”ìš´ì‹±
  const debouncedFetch = useMemo(
    () => debounce(fetchServers, 1000),
    [fetchServers]
  );

  useEffect(() => {
    debouncedFetch();

    if (options.autoRefresh) {
      const interval = setInterval(debouncedFetch, options.refreshInterval || 30000);
      return () => clearInterval(interval);
    }
  }, [debouncedFetch, options.autoRefresh, options.refreshInterval]);

  return {
    servers: useMemo(() => servers, [servers]), // ë©”ëª¨ì´ì œì´ì…˜ìœ¼ë¡œ ë¶ˆí•„ìš”í•œ ì¬ë Œë”ë§ ë°©ì§€
    isLoading: false,
    refresh: debouncedFetch
  };
}
```

### 5. ì—ëŸ¬ ì²˜ë¦¬ ë° í´ë°± ê°•í™”

#### **í•´ê²°ì±…**

```javascript
// src/components/ErrorBoundary.tsx ê°œì„ 
class DataFlowErrorBoundary extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      hasError: false,
      errorType: null,
      retryCount: 0,
    };
  }

  static getDerivedStateFromError(error) {
    // ì—ëŸ¬ íƒ€ì…ë³„ ë¶„ë¥˜
    if (error.message.includes('fetch')) {
      return { hasError: true, errorType: 'network' };
    } else if (error.message.includes('timeout')) {
      return { hasError: true, errorType: 'timeout' };
    }
    return { hasError: true, errorType: 'unknown' };
  }

  handleRetry = () => {
    if (this.state.retryCount < 3) {
      this.setState({
        hasError: false,
        retryCount: this.state.retryCount + 1,
      });
    }
  };

  render() {
    if (this.state.hasError) {
      return (
        <div className='error-fallback'>
          <h2>ë°ì´í„° ë¡œë”© ì¤‘ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤</h2>
          <p>ì—ëŸ¬ íƒ€ì…: {this.state.errorType}</p>
          <button onClick={this.handleRetry}>
            ë‹¤ì‹œ ì‹œë„ ({3 - this.state.retryCount}íšŒ ë‚¨ìŒ)
          </button>
        </div>
      );
    }

    return this.props.children;
  }
}
```

## ğŸ“ˆ ì˜ˆìƒ ê°œì„  íš¨ê³¼

| **í•­ëª©**           | **í˜„ì¬** | **ê°œì„  í›„** | **ê°œì„ ìœ¨**      |
| ------------------ | -------- | ----------- | --------------- |
| í—¬ìŠ¤ì²´í¬ ì‘ë‹µì‹œê°„  | 5020ms   | 1000ms      | **80% ê°œì„ **    |
| ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì‹œê°„ | 3-5ì´ˆ    | ì¦‰ì‹œ        | **100% ê°œì„ **   |
| AI ì˜ˆì¸¡ ì •í™•ë„     | 80%      | 90%+        | **12% ê°œì„ **    |
| í”„ë¡ íŠ¸ì—”ë“œ ë Œë”ë§  | ë¶ˆì•ˆì •   | ì•ˆì •ì       | **ì•ˆì •ì„± í–¥ìƒ** |

## ğŸ¯ êµ¬í˜„ ìš°ì„ ìˆœìœ„

### **Phase 1 (ì¦‰ì‹œ ì ìš© ê°€ëŠ¥)**

1. âœ… í—¬ìŠ¤ì²´í¬ íƒ€ì„ì•„ì›ƒ ë‹¨ì¶• (3ì´ˆ)
2. âœ… ë°ì´í„° ìƒì„±ê¸° ì‚¬ì „ ì´ˆê¸°í™”
3. âœ… API ì‘ë‹µ ìºì‹± êµ¬í˜„

### **Phase 2 (1ì£¼ ë‚´ êµ¬í˜„)**

1. ğŸ”„ AI-ì„œë²„ ë°ì´í„° ì‹¤ì‹œê°„ ì—°ë™
2. ğŸ”„ í”„ë¡ íŠ¸ì—”ë“œ ì„±ëŠ¥ ìµœì í™”
3. ğŸ”„ ì—ëŸ¬ ì²˜ë¦¬ ê°•í™”

### **Phase 3 (ì¥ê¸° ê°œì„ )**

1. ğŸ“Š WebSocket ê¸°ë°˜ ì‹¤ì‹œê°„ í†µì‹ 
2. ğŸ“Š AI ëª¨ë¸ ì •í™•ë„ í–¥ìƒ
3. ğŸ“Š ì‚¬ìš©ì ê²½í—˜ ëª¨ë‹ˆí„°ë§

## ğŸ§ª í…ŒìŠ¤íŠ¸ ë°©ë²•

### **ì„±ëŠ¥ í…ŒìŠ¤íŠ¸**

```bash
# ê°œì„  ì „í›„ ì„±ëŠ¥ ë¹„êµ
node scripts/test-data-flow.js

# ë¶€í•˜ í…ŒìŠ¤íŠ¸
npm run test:load

# ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ê²€ì‚¬
npm run test:memory
```

### **í’ˆì§ˆ ê²€ì¦**

```bash
# TypeScript ì»´íŒŒì¼ ê²€ì¦
npm run type-check

# ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
npm run test:unit

# í†µí•© í…ŒìŠ¤íŠ¸
npm run test:integration
```

---

**ğŸ“ ì‘ì„±ì**: AI ë¶„ì„ ì‹œìŠ¤í…œ  
**ğŸ”„ ì—…ë°ì´íŠ¸**: ì‹¤ì‹œê°„ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ê¸°ë°˜  
**ğŸ¯ ëª©í‘œ**: ì‚¬ìš©ì ê²½í—˜ ìµœì í™” ë° ì‹œìŠ¤í…œ ì•ˆì •ì„± í–¥ìƒ
