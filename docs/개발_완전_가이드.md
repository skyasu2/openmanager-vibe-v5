# ğŸ› ï¸ OpenManager Vibe v5 - ê°œë°œ ì™„ì „ ê°€ì´ë“œ

## ğŸ“‹ ëª©ì°¨

1. [AI ì—ì´ì „íŠ¸ ì•„í‚¤í…ì²˜](#ai-ì—ì´ì „íŠ¸-ì•„í‚¤í…ì²˜)
2. [ê°œë°œ í™˜ê²½ ì„¤ì •](#ê°œë°œ-í™˜ê²½-ì„¤ì •)
3. [ìƒíƒœ ê´€ë¦¬ ì‹œìŠ¤í…œ](#ìƒíƒœ-ê´€ë¦¬-ì‹œìŠ¤í…œ)
4. [ì¸ì¦ ì‹œìŠ¤í…œ](#ì¸ì¦-ì‹œìŠ¤í…œ)
5. [ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°](#ì»´í¬ë„ŒíŠ¸-êµ¬ì¡°)
6. [API ë¼ìš°íŠ¸](#api-ë¼ìš°íŠ¸)
7. [ë³´ì•ˆ êµ¬í˜„](#ë³´ì•ˆ-êµ¬í˜„)

---

## ğŸ¤– AI ì—ì´ì „íŠ¸ ì•„í‚¤í…ì²˜

### v5.41.3 ì£¼ìš” ë³€ê²½ì‚¬í•­ (2025-01-09)

**AI ì—ì´ì „íŠ¸ ì ‘ê·¼ ê¶Œí•œ êµ¬ì¡° ê°œì„ **

#### ë³€ê²½ ì „ (Legacy)

```typescript
// ê¸°ì¡´: AI ì—ì´ì „íŠ¸ ì‚¬ìš©ì„ ìœ„í•´ PIN ì¸ì¦ í•„ìš”
aiAgent: {
  isEnabled: false,        // ê¸°ë³¸ ë¹„í™œì„±í™”
  isAuthenticated: false,  // PIN ì¸ì¦ í•„ìš”
  state: 'disabled'
}
```

#### ë³€ê²½ í›„ (Current)

```typescript
// ì‹ ê·œ: AI ì—ì´ì „íŠ¸ ê¸°ë³¸ í™œì„±í™”, ê´€ë¦¬ì ê¸°ëŠ¥ë§Œ ì¸ì¦ í•„ìš”
aiAgent: {
  isEnabled: true,         // ê¸°ë³¸ í™œì„±í™” - ëˆ„êµ¬ë‚˜ ì‚¬ìš© ê°€ëŠ¥
  state: 'enabled'
}

// ìƒˆë¡œìš´ ê´€ë¦¬ì ëª¨ë“œ ë¶„ë¦¬
adminMode: {
  isAuthenticated: false,  // ê´€ë¦¬ì ê¸°ëŠ¥ë§Œ PIN ì¸ì¦
  lastLoginTime: null
}
```

### ì‚¬ìš©ì ì ‘ê·¼ ê¶Œí•œ ë§¤íŠ¸ë¦­ìŠ¤

| ê¸°ëŠ¥ | ì¼ë°˜ ì‚¬ìš©ì | ê´€ë¦¬ì (PIN ì¸ì¦) |
|------|-------------|-------------------|
| AI ì—ì´ì „íŠ¸ ê¸°ë³¸ ì‚¬ìš© | âœ… ì¦‰ì‹œ ê°€ëŠ¥ | âœ… ê°€ëŠ¥ |
| AI ì‚¬ì´ë“œë°” | âœ… ì‚¬ìš© ê°€ëŠ¥ | âœ… ì‚¬ìš© ê°€ëŠ¥ |
| AI ì§ˆì˜ ì‘ë‹µ | âœ… ì‚¬ìš© ê°€ëŠ¥ | âœ… ì‚¬ìš© ê°€ëŠ¥ |
| AI ê´€ë¦¬ì í˜ì´ì§€ | âŒ ì°¨ë‹¨ | âœ… ì ‘ê·¼ ê°€ëŠ¥ |
| AI ì„¤ì • ë³€ê²½ | âŒ ì°¨ë‹¨ | âœ… ê°€ëŠ¥ |
| íŒ¨í„´ ë¶„ì„ ê´€ë¦¬ | âŒ ì°¨ë‹¨ | âœ… ê°€ëŠ¥ |
| ìŠ¤ë§ˆíŠ¸ ì§ˆì˜ ì¶”ì²œ | âŒ ì°¨ë‹¨ | âœ… ê°€ëŠ¥ |

---

## âš™ï¸ ê°œë°œ í™˜ê²½ ì„¤ì •

### í•„ìˆ˜ ìš”êµ¬ì‚¬í•­

```bash
# Node.js & íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €
Node.js >= 18.17.0
npm >= 9.0.0

# ê°œë°œ ë„êµ¬
Cursor IDE (ê¶Œì¥)
Git >= 2.34.0
```

### ë¡œì»¬ ê°œë°œ í™˜ê²½ êµ¬ì¶•

```bash
# 1. ì €ì¥ì†Œ í´ë¡ 
git clone <repository-url>
cd openmanager-vibe-v5

# 2. ì˜ì¡´ì„± ì„¤ì¹˜
npm install

# 3. í™˜ê²½ë³€ìˆ˜ ì„¤ì •
cp .env.example .env.local
# .env.local íŒŒì¼ì„ í¸ì§‘í•˜ì—¬ í•„ìš”í•œ í™˜ê²½ë³€ìˆ˜ ì„¤ì •

# 4. ê°œë°œ ì„œë²„ ì‹œì‘
npm run dev
```

---

## ğŸ—ƒï¸ ìƒíƒœ ê´€ë¦¬ ì‹œìŠ¤í…œ

### useUnifiedAdminStore êµ¬ì¡°

`src/stores/useUnifiedAdminStore.ts`

```typescript
interface UnifiedAdminState {
  // ì‹œìŠ¤í…œ ìƒíƒœ
  isSystemStarted: boolean;
  systemStartTime: number | null;
  
  // AI ì—ì´ì „íŠ¸ (ê¸°ë³¸ í™œì„±í™”)
  aiAgent: {
    isEnabled: boolean;  // ê¸°ë³¸ true
    state: 'enabled' | 'disabled' | 'processing' | 'idle';
  };
  
  // ê´€ë¦¬ì ëª¨ë“œ (PIN ì¸ì¦ í•„ìš”)
  adminMode: {
    isAuthenticated: boolean;
    lastLoginTime: number | null;
  };
  
  // ë³´ì•ˆ
  attempts: number;
  isLocked: boolean;
  lockoutEndTime: number | null;
}
```

### ì£¼ìš” ì•¡ì…˜ ë©”ì„œë“œ

```typescript
// ì‹œìŠ¤í…œ ì œì–´
startSystem(): void
stopSystem(): void

// ê´€ë¦¬ì ì¸ì¦
authenticateAdmin(password: string): Promise<{success: boolean, message: string}>
logoutAdmin(): void

// ìƒíƒœ í™•ì¸
checkLockStatus(): boolean
getRemainingLockTime(): number
```

---

## ğŸ” ì¸ì¦ ì‹œìŠ¤í…œ

### ê´€ë¦¬ì PIN ì¸ì¦

- **PIN ì½”ë“œ**: `4231` (í•˜ë“œì½”ë”©)
- **ìµœëŒ€ ì‹œë„**: 5íšŒ
- **ì ê¸ˆ ì‹œê°„**: 10ì´ˆ
- **ì €ì¥ì†Œ**: Zustand persist

### ì¸ì¦ í”Œë¡œìš°

```typescript
// 1. ì‚¬ìš©ìê°€ PIN ì…ë ¥
const result = await authenticateAdmin(pin);

// 2. ì„±ê³µ ì‹œ ê´€ë¦¬ì ëª¨ë“œ í™œì„±í™”
if (result.success) {
  adminMode.isAuthenticated = true;
  adminMode.lastLoginTime = Date.now();
}

// 3. ì‹¤íŒ¨ ì‹œ ì‹œë„ íšŸìˆ˜ ì¦ê°€
else {
  attempts++;
  if (attempts >= 5) {
    isLocked = true;
    lockoutEndTime = Date.now() + 10000;
  }
}
```

### ë³´í˜¸ ë¼ìš°íŠ¸ êµ¬í˜„

```typescript
// src/app/admin/ai-agent/page.tsx
useEffect(() => {
  if (!adminMode.isAuthenticated) {
    router.push('/');
    return;
  }
}, [adminMode.isAuthenticated, router]);
```

---

## ğŸ§© ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

### ì¸ì¦ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸

```
src/components/unified-profile/
â”œâ”€â”€ UnifiedProfileComponent.tsx     # ë©”ì¸ í”„ë¡œí•„ ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ UnifiedSettingsPanel.tsx        # ì„¤ì • íŒ¨ë„ (AI ê´€ë¦¬ì ë¡œê·¸ì¸)
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ useAuthentication.ts        # ì¸ì¦ í›…
â”œâ”€â”€ components/
â”‚   â””â”€â”€ ProfileDropdown.tsx         # ë“œë¡­ë‹¤ìš´ (ë¡œê·¸ì•„ì›ƒ ì˜µì…˜)
â””â”€â”€ types/
    â””â”€â”€ ProfileTypes.ts             # íƒ€ì… ì •ì˜
```

### í•µì‹¬ ì»´í¬ë„ŒíŠ¸ ì‚¬ìš©ë²•

```typescript
// ê´€ë¦¬ì ìƒíƒœ í™•ì¸
const { adminMode } = useUnifiedAdminStore();

// ê´€ë¦¬ì ê¸°ëŠ¥ ì¡°ê±´ë¶€ ë Œë”ë§
{adminMode.isAuthenticated && (
  <AdminOnlyComponent />
)}

// ì¸ì¦ í›… ì‚¬ìš©
const { handleAIAuthentication } = useAuthentication();
await handleAIAuthentication(pin);
```

---

## ğŸ“Š API ë¼ìš°íŠ¸

### AI ì—ì´ì „íŠ¸ ê´€ë ¨ API

```
/api/ai-agent/
â”œâ”€â”€ power/              # AI ì—ì´ì „íŠ¸ ì „ì› ê´€ë¦¬ (ê´€ë¦¬ì ì „ìš©)
â”œâ”€â”€ admin/
â”‚   â”œâ”€â”€ logs/          # ê´€ë¦¬ì ë¡œê·¸ ì¡°íšŒ
â”‚   â””â”€â”€ stats/         # ê´€ë¦¬ì í†µê³„
â””â”€â”€ learning/
    â””â”€â”€ analysis/      # í•™ìŠµ ë¶„ì„ (ê´€ë¦¬ì ì „ìš©)
```

### ì¸ì¦ì´ í•„ìš”í•œ API

- âœ… `/api/ai-agent/power` (activate ì•¡ì…˜)
- âœ… `/api/ai-agent/admin/*`
- âœ… `/api/ai-agent/learning/*`

### ê°œë°©ëœ API

- âœ… `/api/ai/*` (ê¸°ë³¸ AI ê¸°ëŠ¥)
- âœ… `/api/system/status`
- âœ… `/api/health`

---

## ğŸ›¡ï¸ ë³´ì•ˆ êµ¬í˜„

### í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ë³´ì•ˆ

1. **ë¼ìš°íŠ¸ ë³´í˜¸**: ê´€ë¦¬ì í˜ì´ì§€ ì ‘ê·¼ ì‹œ ì¸ì¦ í™•ì¸
2. **UI ì¡°ê±´ë¶€ ë Œë”ë§**: ì¸ì¦ ìƒíƒœì— ë”°ë¥¸ ë²„íŠ¼/ë©”ë‰´ í‘œì‹œ
3. **ìƒíƒœ ì§€ì†ì„±**: ìƒˆë¡œê³ ì¹¨ í›„ì—ë„ ê´€ë¦¬ì ìƒíƒœ ìœ ì§€

### ì„œë²„ ì‚¬ì´ë“œ ë³´ì•ˆ

```typescript
// API ë¼ìš°íŠ¸ì—ì„œ ê´€ë¦¬ì ì¸ì¦ í™•ì¸
const adminStore = useUnifiedAdminStore.getState();
if (!adminStore.adminMode.isAuthenticated) {
  return NextResponse.json({
    success: false,
    error: 'AI ê´€ë¦¬ì ê¸°ëŠ¥ ì‚¬ìš©ì„ ìœ„í•´ì„œëŠ” ê´€ë¦¬ì ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤.',
    code: 'ADMIN_AUTHENTICATION_REQUIRED'
  }, { status: 401 });
}
```

---

## ğŸ”§ ê°œë°œ íŒ

### ë””ë²„ê¹…

```typescript
// ê´€ë¦¬ì ìƒíƒœ í™•ì¸
console.log('Admin Mode:', useUnifiedAdminStore.getState().adminMode);

// ì¸ì¦ ìƒíƒœ ëª¨ë‹ˆí„°ë§
useEffect(() => {
  console.log('Auth changed:', adminMode.isAuthenticated);
}, [adminMode.isAuthenticated]);
```

### í…ŒìŠ¤íŠ¸

```bash
# ë¹Œë“œ í…ŒìŠ¤íŠ¸
npm run build

# íƒ€ì… ì²´í¬
npm run type-check

# ë¦°íŒ…
npm run lint
```

### ë¬¸ì œ í•´ê²°

1. **ì¸ì¦ ì‹¤íŒ¨**: PIN 4231 í™•ì¸, ì ê¸ˆ ìƒíƒœ í™•ì¸
2. **ë¼ìš°íŠ¸ ì ‘ê·¼ ë¶ˆê°€**: ê´€ë¦¬ì ì¸ì¦ ìƒíƒœ í™•ì¸
3. **ìƒíƒœ ì´ˆê¸°í™”**: localStorage í´ë¦¬ì–´ í›„ ì¬ì‹œì‘

---

*ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: 2025-01-09 v5.41.3*
*AI ì—ì´ì „íŠ¸ ì ‘ê·¼ ê¶Œí•œ êµ¬ì¡° ê°œì„  ë°˜ì˜*
