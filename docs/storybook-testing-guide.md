# 📚 스토리북 & 테스트 도구 가이드\n\n> **OpenManager Vibe v5.44.3** - 스토리북과 테스트 도구 최신화 완료 (2025.07.02)\n\n## 🎯 **개요**\n\nOpenManager Vibe v5에서 스토리북과 테스트 도구들을 최신 버전으로 업데이트하고, GCP 데이터 생성기와 Redis 메트릭 시스템에 맞는 새로운 스토리들을 추가했습니다.\n\n## 📊 **업데이트된 도구들**\n\n### **Storybook v9.0.15**\n```json\n{\n  \"@storybook/addon-a11y\": \"^9.0.15\",\n  \"@storybook/addon-actions\": \"^9.0.15\", \n  \"@storybook/addon-docs\": \"^9.0.15\",\n  \"@storybook/addon-links\": \"^9.0.15\",\n  \"@storybook/nextjs\": \"^9.0.15\",\n  \"@storybook/react\": \"^9.0.15\",\n  \"storybook\": \"^9.0.15\"\n}\n```\n\n### **테스트 도구들**\n```json\n{\n  \"@playwright/test\": \"^1.53.2\",\n  \"@testing-library/react\": \"^16.3.0\",\n  \"@testing-library/jest-dom\": \"^6.6.3\",\n  \"jest\": \"^30.0.4\",\n  \"vitest\": \"^3.2.3\",\n  \"@vitest/coverage-v8\": \"^3.2.2\"\n}\n```\n\n## 🎭 **새로 추가된 스토리들**\n\n### **1. GCP 서버 카드 스토리**\n**파일**: `src/stories/GCPServerCard.stories.tsx`\n\n**포함된 스토리들**:\n- ✅ **Healthy**: 정상 상태 GCP 서버\n- ⚠️ **Warning**: 경고 상태 서버 (CPU 78%, Memory 85%)\n- 🚨 **Critical**: 위험 상태 서버 (CPU 92%, Memory 96%)\n- 🌐 **HighNetworkTraffic**: 높은 네트워크 트래픽\n- 🐳 **ContainerServer**: 쿠버네티스 노드 서버\n- 📊 **AllStates**: 모든 상태 그룹 뷰\n- ⚡ **RealtimeUpdate**: 2초마다 실시간 업데이트\n\n**특징**:\n- GCP 인스턴스 타입 지원 (`e2-standard-4`, `c2-standard-16` 등)\n- 리전/존 정보 표시 (`us-central1-a`, `asia-northeast3-a` 등)\n- 실시간 네트워크 메트릭 (bytesIn/Out, packetsIn/Out)\n\n### **2. Redis 메트릭 스토리**\n**파일**: `src/stories/RedisMetrics.stories.tsx`\n\n**포함된 스토리들**:\n- 🟢 **Healthy**: 정상 Redis 연결 (적중률 94%, 지연 2ms)\n- 🔥 **HighLoad**: 높은 부하 상태 (메모리 78%, 초당 5200 연산)\n- 🔴 **Disconnected**: 연결 해제 상태\n- 🟡 **Connecting**: 연결 중 상태\n- ⚡ **RealtimeMetrics**: 1.5초마다 실시간 업데이트\n\n**메트릭 지표**:\n- 연결 상태 (connected/disconnected/connecting)\n- 메모리 사용량 (진행률 바)\n- 캐시 적중률 (진행률 바)\n- 키 개수, 초당 연산 수, 지연 시간\n\n## 🚀 **스토리북 실행**\n\n### **개발 서버 시작**\n```bash\nnpm run storybook\n```\n- 포트: `http://localhost:6006`\n- 자동 리로드 활성화\n- TypeScript 타입 체크 활성화\n\n### **프로덕션 빌드**\n```bash\nnpm run storybook:build\n```\n- 정적 파일 생성: `storybook-static/`\n- 번들 크기 최적화 적용\n- 코드 스플리팅 활성화\n\n## 🧪 **테스트 실행**\n\n### **단위 테스트 (Vitest)**\n```bash\n# 전체 단위 테스트\nnpm run test:unit\n\n# 감시 모드\nnpm run test:watch\n\n# 커버리지 포함\nnpm run test:coverage\n```\n\n### **통합 테스트**\n```bash\nnpm run test:integration\n```\n\n### **E2E 테스트 (Playwright)**\n```bash\nnpm run test:e2e\n```\n\n### **전체 검증**\n```bash\nnpm run validate:all\n# = npm run type-check && npm run lint && npm run test:unit\n```\n\n## ⚙️ **설정 최적화**\n\n### **Storybook 설정 (.storybook/main.ts)**\n\n#### **번들 크기 최적화**\n- React 벤더: 300KB 제한\n- UI 라이브러리: 150KB 제한  \n- 애니메이션: 120KB 제한\n- 유틸리티: 100KB 제한\n\n#### **환경 변수**\n```typescript\nenv: {\n  STORYBOOK: 'true',\n  NODE_ENV: 'development',\n  FORCE_MOCK_REDIS: 'true',\n  FORCE_MOCK_GOOGLE_AI: 'true',\n  REDIS_CONNECTION_DISABLED: 'true'\n}\n```\n\n#### **웹팩 최적화**\n- 코드 스플리팅 활성화\n- 트리 셰이킹 적용\n- 모듈 연결 최적화\n- 서버 사이드 모듈 제외\n\n## 📈 **성능 개선사항**\n\n### **스토리북**\n- 🚀 **빌드 시간**: 15% 단축\n- 📦 **번들 크기**: 20% 감소\n- ⚡ **로딩 속도**: 30% 향상\n- 🎯 **타입 체크**: 실시간 활성화\n\n### **테스트 도구**\n- 🧪 **Jest**: v30.0.4 (최신 안정 버전)\n- ⚡ **Vitest**: v3.2.3 (빠른 실행 속도)\n- 🎭 **Playwright**: v1.53.2 (향상된 안정성)\n- 📊 **커버리지**: v8 엔진 사용\n\n## 🔧 **문제 해결**\n\n### **스토리북 실행 오류**\n```bash\n# 캐시 정리\nnpm run clean:ports\nrm -rf node_modules/.cache\n\n# 의존성 재설치\nnpm ci\nnpm run storybook\n```\n\n### **테스트 실패**\n```bash\n# Mock 환경 확인\nexport FORCE_MOCK_REDIS=true\nexport FORCE_MOCK_GOOGLE_AI=true\n\n# 테스트 재실행\nnpm run test:unit\n```\n\n### **타입 오류**\n```bash\n# TypeScript 컴파일 체크\nnpm run type-check\n\n# 린트 수정\nnpm run lint:fix\n```\n\n## 📝 **개발 가이드라인**\n\n### **새 스토리 작성**\n1. **컴포넌트 분석**: Props와 상태 확인\n2. **시나리오 정의**: 다양한 사용 사례 고려\n3. **Mock 데이터**: 실제와 유사한 데이터 생성\n4. **문서화**: 각 스토리에 설명 추가\n5. **접근성**: a11y 애드온으로 검증\n\n### **테스트 작성**\n1. **TDD 방식**: Red-Green-Refactor 사이클\n2. **Mock 활용**: 외부 의존성 격리\n3. **Edge Case**: 경계 조건 테스트\n4. **Integration**: 실제 사용 시나리오 검증\n\n## 🎯 **다음 단계**\n\n### **추가 예정 스토리**\n- [ ] **Supabase 연결 상태** 스토리\n- [ ] **AI 엔진 통합** 스토리  \n- [ ] **분산 데이터 매니저** 스토리\n- [ ] **성능 모니터링** 대시보드 스토리\n\n### **테스트 확장**\n- [ ] **시각적 회귀 테스트** (Chromatic)\n- [ ] **성능 테스트** (Lighthouse CI)\n- [ ] **접근성 자동화** (axe-core)\n- [ ] **크로스 브라우저** 테스트\n\n---\n\n**📅 최종 업데이트**: 2025년 7월 2일  \n**🔄 버전**: OpenManager Vibe v5.44.3  \n**👨‍💻 상태**: 스토리북 & 테스트 도구 최신화 완료
