# 문제 해결 가이드

## 🚨 일반적인 문제 및 해결 방법

### 1. 빌드 에러

#### TypeScript 타입 에러

**증상**: `Type 'any' is not assignable to type...` 또는 `any 타입은 허용되지 않습니다` 등의 에러

**해결 방법**:
1. `any` 타입을 구체적인 타입으로 변경
   ```typescript
   // 변경 전
   const data: any = fetchData();
   
   // 변경 후
   const data: Record<string, unknown> = fetchData();
   ```

2. 알 수 없는 타입에 대해서는 `unknown` 사용
   ```typescript
   // 변경 전
   function processData(data: any) {...}
   
   // 변경 후
   function processData(data: unknown) {...}
   ```

#### 환경 변수 관련 에러

**증상**: `Error: 환경 변수가 로드되지 않았습니다`

**해결 방법**:
1. `.env.local` 파일이 존재하는지 확인
2. 필요한 환경 변수가 모두 정의되어 있는지 확인
3. 배포 환경의 경우 Vercel 대시보드에서 환경 변수 설정 확인

### 2. 런타임 에러

#### Redis 연결 오류

**증상**: `ECONNREFUSED: Connection refused to Upstash Redis`

**해결 방법**:
1. Upstash Redis URL 및 토큰이 올바른지 확인
2. Upstash 대시보드에서 데이터베이스 상태 확인
3. IP 액세스 제한이 있는 경우 개발 환경 IP 추가

#### API 타임아웃 

**증상**: `Error: Function execution timed out after 10 seconds`

**해결 방법**:
1. 서버리스 함수 로직 최적화
2. `vercel.json`에서 `maxDuration` 값 조정
   ```json
   "functions": {
     "src/app/api/**/*.ts": {
       "maxDuration": 15
     }
   }
   ```

### 3. 배포 문제

#### 배포 실패

**증상**: Vercel에서 배포 실패 메시지 표시

**해결 방법**:
1. 배포 로그 검토
2. `.gitignore`에 `.env.local`이 포함되어 있는지 확인
3. 패키지 의존성 문제인 경우 `package-lock.json` 삭제 후 다시 시도

#### 성능 저하

**증상**: 배포 후 성능이 느려지거나 응답 시간이 증가

**해결 방법**:
1. 코드 스플리팅 및 지연 로딩 적용
2. 이미지 및 정적 자산 최적화
3. Vercel Analytics로 병목 현상 식별

## 🔍 문제 진단 도구

### 상태 확인 API

**기본 상태 확인**:
```bash
curl https://openmanager-vibe-v5.vercel.app/api/health
```

**상세 시스템 진단**:
```bash
curl https://openmanager-vibe-v5.vercel.app/api/health/detailed
```

### 로그 확인

1. **Vercel 로그 확인**:
   - Vercel 대시보드 → 프로젝트 → Deployments → 배포 선택 → Functions
   - 서버리스 함수별 로그 및 오류 확인

2. **클라이언트 오류 확인**:
   - 브라우저 개발자 도구의 콘솔 확인
   - 네트워크 탭에서 API 응답 확인

## 📊 성능 모니터링

### 리소스 사용량 확인

**Redis 사용량 확인**:
```bash
curl https://openmanager-vibe-v5.vercel.app/api/monitoring/redis-stats
```

**Supabase 사용량 확인**:
```bash
curl https://openmanager-vibe-v5.vercel.app/api/monitoring/supabase-stats
```

### 성능 메트릭 수집

- 서버 응답 시간 추적
- API 호출 빈도 모니터링
- 오류 발생률 추적

## 🛠 일반적인 해결 작업

### 캐시 초기화

Redis 캐시를 초기화하려면:
```bash
curl -X POST https://openmanager-vibe-v5.vercel.app/api/admin/clear-cache \
  -H "Authorization: Bearer YOUR_ADMIN_TOKEN"
```

### 데이터 백업

Supabase 데이터 백업 생성:
```bash
curl -X POST https://openmanager-vibe-v5.vercel.app/api/admin/backup \
  -H "Authorization: Bearer YOUR_ADMIN_TOKEN"
```

### 서버 재시작

모니터링 중인 서버 재시작:
```bash
curl -X POST https://openmanager-vibe-v5.vercel.app/api/servers/{server_id}/restart \
  -H "Authorization: Bearer YOUR_API_KEY"
```

## 🆘 지원 및 커뮤니티

### 이슈 보고

문제 발생 시 GitHub 이슈를 생성해 주세요:
1. 문제 증상 상세 설명
2. 재현 단계
3. 환경 정보 (브라우저, OS 등)
4. 오류 메시지 및 스크린샷

### 추가 지원

심각한 문제나 추가 지원이 필요한 경우:
- 프로젝트 관리자에게 연락
- 개발 팀 슬랙 채널에서 문의
- 정기 개발 회의에서 논의 