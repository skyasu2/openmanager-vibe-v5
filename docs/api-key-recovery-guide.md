# π” μ•”νΈν™”λ API ν‚¤ λ³µμ› κ°€μ΄λ“

## κ°μ”

OpenManager Vibe v5 ν”„λ΅μ νΈλ” **EnhancedEnvCryptoManager**λ¥Ό μ‚¬μ©ν•μ—¬ λ¨λ“  API ν‚¤μ™€ λ―Όκ°ν• ν™κ²½λ³€μλ¥Ό μ•”νΈν™”ν•μ—¬ μ•μ „ν•κ² κ΄€λ¦¬ν•©λ‹λ‹¤. μ΄ κ°€μ΄λ“λ” μ•”νΈν™”λ API ν‚¤λ¥Ό λ³µμ›ν•κ³  μ‚¬μ©ν•λ” λ°©λ²•μ„ μ„¤λ…ν•©λ‹λ‹¤.

## π—οΈ λ§μ¤ν„° λΉ„λ°€λ²νΈ ν™•μΈ

API ν‚¤ λ³µνΈν™”λ¥Ό μ„ν•΄μ„λ” **λ§μ¤ν„° λΉ„λ°€λ²νΈ**κ°€ ν•„μ”ν•©λ‹λ‹¤:

1. **ν™κ²½λ³€μ**: `ENV_MASTER_PASSWORD`
2. **νμΌ**: `.env.key` (ν”„λ΅μ νΈ λ£¨νΈ)
3. **ν€ λΉ„λ°€λ²νΈ**: ν€μ—μ„ κ³µμ ν•λ” λ³µνΈν™” λΉ„λ°€λ²νΈ

## π€ API ν‚¤ λ³µμ› λ°©λ²•

### 1. λ¨λ“  API ν‚¤ ν™•μΈ

```bash
npm run decrypt:keys
```

- λ§μ¤ν„° λΉ„λ°€λ²νΈλ¥Ό μ…λ ¥ν•λ©΄ λ¨λ“  μ•”νΈν™”λ ν™κ²½λ³€μλ¥Ό λ³µνΈν™”ν•©λ‹λ‹¤
- λ―Όκ°ν• ν‚¤λ” μΌλ¶€λ§ ν‘μ‹λ©λ‹λ‹¤ (μ²μ 10μ + λ§μ§€λ§‰ 5μ)

### 2. νΉμ • API ν‚¤λ§ λ³µμ›

```bash
npm run decrypt:keys GOOGLE_AI_API_KEY
```

### 3. .env νμΌλ΅ λ‚΄λ³΄λ‚΄κΈ°

```bash
npm run decrypt:keys:export
```

- `.env.decrypted` νμΌλ΅ λ¨λ“  ν™κ²½λ³€μλ¥Ό λ‚΄λ³΄λƒ…λ‹λ‹¤
- **β οΈ μ£Όμ**: μ‚¬μ© ν›„ λ°λ“μ‹ νμΌμ„ μ‚­μ ν•μ„Έμ”!

### 4. MCP μ„¤μ • μλ™ μ—…λ°μ΄νΈ

```bash
npm run decrypt:mcp-update
```

- Claude Desktopμ MCP μ„¤μ •μ— μλ™μΌλ΅ API ν‚¤λ¥Ό μ μ©ν•©λ‹λ‹¤
- GitHub ν† ν° λ“±μ΄ μλ™ μ—…λ°μ΄νΈλ©λ‹λ‹¤

## π“‹ μ•”νΈν™”λ API ν‚¤ λ©λ΅

ν„μ¬ ν”„λ΅μ νΈμ— μ•”νΈν™”λμ–΄ μλ” μ£Όμ” API ν‚¤:

| ν‚¤ μ΄λ¦„                     | μ©λ„                 | μΉ΄ν…κ³ λ¦¬ |
| --------------------------- | -------------------- | -------- |
| `GOOGLE_AI_API_KEY`         | Google AI/Gemini API | ai       |
| `GITHUB_TOKEN`              | GitHub API μ•΅μ„Έμ¤    | vcs      |
| `SUPABASE_SERVICE_ROLE_KEY` | Supabase κ΄€λ¦¬μ ν‚¤   | database |
| `UPSTASH_REDIS_REST_TOKEN`  | Redis μΊμ‹ μ•΅μ„Έμ¤    | cache    |
| `NEXTAUTH_SECRET`           | μΈμ¦ μ‹ν¬λ¦Ώ          | auth     |

## π”’ λ³΄μ• μ£Όμμ‚¬ν•­

### DO:

- β… λ§μ¤ν„° λΉ„λ°€λ²νΈλ¥Ό μ•μ „ν•κ² λ³΄κ΄€
- β… λ³µνΈν™”λ νμΌμ€ μ‚¬μ© ν›„ μ¦‰μ‹ μ‚­μ 
- β… ν€μ›κ³Ό λ§μ¤ν„° λΉ„λ°€λ²νΈ μ•μ „ν•κ² κ³µμ 
- β… μ •κΈ°μ μΌλ΅ API ν‚¤ λ΅ν…μ΄μ…

### DON'T:

- β λ³µνΈν™”λ ν‚¤λ¥Ό ν‰λ¬ΈμΌλ΅ μ €μ¥
- β Gitμ— .env νμΌ μ»¤λ°‹
- β κ³µκ° μ±„λ„μ—μ„ λ§μ¤ν„° λΉ„λ°€λ²νΈ κ³µμ 
- β λ³µνΈν™” λ΅κ·Έλ¥Ό λ‚¨κΈ°κΈ°

## π› οΈ λ¬Έμ  ν•΄κ²°

### λ³µνΈν™” μ‹¤ν¨ μ‹

1. λ§μ¤ν„° λΉ„λ°€λ²νΈκ°€ μ •ν™•ν•μ§€ ν™•μΈ
2. `config/encrypted-env-config.ts` νμΌμ΄ μ΅΄μ¬ν•λ”μ§€ ν™•μΈ
3. Node.js λ²„μ „μ΄ 22.0.0 μ΄μƒμΈμ§€ ν™•μΈ

### ν™κ²½λ³€μκ°€ λ΅λ“λμ§€ μ•μ„ λ•

```bash
# μλ™μΌλ΅ ν™κ²½λ³€μ μ„¤μ •
export ENV_MASTER_PASSWORD="your-master-password"
npm run dev
```

## π”„ API ν‚¤ μ—…λ°μ΄νΈ

### μƒ API ν‚¤ μ¶”κ°€

```bash
# 1. ν† ν° κ΄€λ¦¬ λ„κµ¬ μ‚¬μ©
npm run secure:add NEW_API_KEY

# 2. μ•”νΈν™”λ μ„¤μ • μ¬μƒμ„±
npm run encrypt:env
```

### κΈ°μ΅΄ API ν‚¤ λ³€κ²½

1. λ³µνΈν™”: `npm run decrypt:keys:export`
2. `.env.decrypted` νμΌμ—μ„ κ°’ μμ •
3. μ¬μ•”νΈν™”: `npm run encrypt:env`
4. `.env.decrypted` νμΌ μ‚­μ 

## π“ κ΄€λ ¨ νμΌ

- **μ•”νΈν™”λ μ„¤μ •**: `/config/encrypted-env-config.ts`
- **μ•”νΈν™” λ§¤λ‹μ €**: `/src/lib/crypto/EnhancedEnvCryptoManager.ts`
- **ν™κ²½λ³€μ λ΅λ”**: `/src/lib/environment/encrypted-env-loader.ts`
- **λ³µνΈν™” μ¤ν¬λ¦½νΈ**: `/scripts/decrypt-api-keys.ts`

## π€ λΉ λ¥Έ μ‹μ‘

```bash
# 1. API ν‚¤ ν™•μΈ
npm run decrypt:keys

# 2. κ°λ° μ„λ²„ μ‹μ‘ (μλ™ λ³µνΈν™”)
echo "your-master-password" > .env.key
npm run dev

# 3. ν”„λ΅λ•μ… λ°°ν¬
# Vercelμ— ENV_MASTER_PASSWORD ν™κ²½λ³€μ μ„¤μ •
```

## π’΅ ν

1. **VSCode μ‚¬μ©μ**: `.env.key` νμΌμ„ `.gitignore`μ— μ¶”κ°€ν•κ³  ν€μ›κ³Ό λ³„λ„λ΅ κ³µμ 
2. **CI/CD**: GitHub Secretsμ— `ENV_MASTER_PASSWORD` μ €μ¥
3. **λ΅μ»¬ κ°λ°**: `.env.key` νμΌ μ‚¬μ©μ΄ κ°€μ¥ νΈλ¦¬
4. **Vercel λ°°ν¬**: ν™κ²½λ³€μλ΅ `ENV_MASTER_PASSWORD` μ„¤μ •

---

μ΄ μ‹μ¤ν…μ€ API ν‚¤λ¥Ό μ•μ „ν•κ² κ΄€λ¦¬ν•λ©΄μ„λ„ κ°λ° νΈμμ„±μ„ μ κ³µν•©λ‹λ‹¤.
μ§λ¬Έμ΄λ‚ λ¬Έμ κ°€ μμΌλ©΄ ν€ λ¦¬λ”μ—κ² λ¬Έμν•μ„Έμ”.
