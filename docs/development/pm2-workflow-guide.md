# PM2 í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬ ì›Œí¬í”Œë¡œìš° ê°€ì´ë“œ

**ì‘ì„±ì¼**: 2025-11-28
**ë²„ì „**: 1.0.0
**ëŒ€ìƒ**: OpenManager VIBE v5.80.0 ê°œë°œ í™˜ê²½

---

## ğŸ“‹ ëª©ì°¨

1. [ê°œìš”](#-ê°œìš”)
2. [PM2 vs Claude Code ë°±ê·¸ë¼ìš´ë“œ íƒœìŠ¤í¬](#-pm2-vs-claude-code-ë°±ê·¸ë¼ìš´ë“œ-íƒœìŠ¤í¬)
3. [PM2 ê¸°ë³¸ ëª…ë ¹ì–´](#-pm2-ê¸°ë³¸-ëª…ë ¹ì–´)
4. [Claude Code í†µí•© ì›Œí¬í”Œë¡œìš°](#-claude-code-í†µí•©-ì›Œí¬í”Œë¡œìš°)
5. [ëª¨ë‹ˆí„°ë§ ë° ë¡œê·¸ ê´€ë¦¬](#-ëª¨ë‹ˆí„°ë§-ë°-ë¡œê·¸-ê´€ë¦¬)
6. [íŠ¸ëŸ¬ë¸”ìŠˆíŒ…](#-íŠ¸ëŸ¬ë¸”ìŠˆíŒ…)

---

## ğŸ¯ ê°œìš”

ì´ ê°€ì´ë“œëŠ” WSL í™˜ê²½ì—ì„œ Claude Codeë¥¼ ì‚¬ìš©í•˜ì—¬ ê°œë°œí•  ë•Œ PM2 í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬ìë¥¼ íš¨ê³¼ì ìœ¼ë¡œ í™œìš©í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤.

### êµ¬í˜„ ë°°ê²½

ì´ì „ ìƒíƒœ (Ad-hoc í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬):

- 6ê°œì˜ ê°œë³„ Node.js í”„ë¡œì„¸ìŠ¤ ìˆ˜ë™ ê´€ë¦¬
- ë¶ˆê·œì¹™í•œ ì¬ì‹œì‘ ë° ì¢…ë£Œ íŒ¨í„´
- í”„ë¡œì„¸ìŠ¤ ì¶”ì  ì–´ë ¤ì›€

í˜„ì¬ ìƒíƒœ (PM2 í†µí•©):

- ë‹¨ì¼ PM2 í”„ë¡œì„¸ìŠ¤ë¡œ í†µí•© ê´€ë¦¬
- ìë™ ì¬ì‹œì‘ ë° ë©”ëª¨ë¦¬ ê´€ë¦¬
- ì¤‘ì•™í™”ëœ ë¡œê·¸ ì‹œìŠ¤í…œ
- Claude Code ì„¸ì…˜ ê°„ ì§€ì†ì„± ë³´ì¥

---

## ğŸ”„ PM2 vs Claude Code ë°±ê·¸ë¼ìš´ë“œ íƒœìŠ¤í¬

### PM2ê°€ ë‹´ë‹¹í•˜ëŠ” ì‘ì—…

âœ… **ì¥ê¸° ì‹¤í–‰ ê°œë°œ ì„œë²„**

- Next.js ê°œë°œ ì„œë²„ (24ì‹œê°„ ì´ìƒ ì‹¤í–‰)
- ìë™ ì¬ì‹œì‘ (í¬ë˜ì‹œ ë°œìƒ ì‹œ)
- ë©”ëª¨ë¦¬ ì œí•œ (2GB ì´ˆê³¼ ì‹œ ì¬ì‹œì‘)

```bash
# PM2ë¡œ ê°œë°œ ì„œë²„ ì‹œì‘
pm2 start ecosystem.config.js

# PM2ë¡œ ê°œë°œ ì„œë²„ ì¤‘ì§€
pm2 stop openmanager-dev

# PM2ë¡œ ê°œë°œ ì„œë²„ ì¬ì‹œì‘
pm2 restart openmanager-dev
```

### Claude Code ë°±ê·¸ë¼ìš´ë“œ íƒœìŠ¤í¬ê°€ ë‹´ë‹¹í•˜ëŠ” ì‘ì—…

âœ… **ë‹¨ê¸° ì‹¤í–‰ ë¹Œë“œ/í…ŒìŠ¤íŠ¸ ì‘ì—…**

- `npm run build` (1-2ë¶„ ì†Œìš”)
- `npm run test` (30ì´ˆ-1ë¶„ ì†Œìš”)
- Git push (5-10ì´ˆ ì†Œìš”)

**ì‚¬ìš© ë°©ë²•**:
Claude Codeì—ì„œ `Ctrl+B`ë¥¼ ëˆ„ë¥´ë©´ ëª…ë ¹ì´ ë°±ê·¸ë¼ìš´ë“œë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤.

```bash
# Claude Code ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰ ì˜ˆì‹œ
# (Ctrl+B í›„ ëª…ë ¹ì–´ ì…ë ¥)
npm run build          # ë°±ê·¸ë¼ìš´ë“œ ë¹Œë“œ
npm run test:quick     # ë°±ê·¸ë¼ìš´ë“œ í…ŒìŠ¤íŠ¸
git push               # ë°±ê·¸ë¼ìš´ë“œ í‘¸ì‹œ
```

---

## ğŸ›  PM2 ê¸°ë³¸ ëª…ë ¹ì–´

### í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬

```bash
# ê°œë°œ ì„œë²„ ì‹œì‘
pm2 start ecosystem.config.js

# ìƒíƒœ í™•ì¸
pm2 status

# ë¡œê·¸ í™•ì¸ (ì‹¤ì‹œê°„)
pm2 logs openmanager-dev

# ë¡œê·¸ í™•ì¸ (ìµœê·¼ 30ì¤„)
pm2 logs openmanager-dev --lines 30 --nostream

# ì„œë²„ ì¤‘ì§€
pm2 stop openmanager-dev

# ì„œë²„ ì¬ì‹œì‘
pm2 restart openmanager-dev

# ì„œë²„ ì‚­ì œ (ì¤‘ì§€ + í”„ë¡œì„¸ìŠ¤ ëª©ë¡ì—ì„œ ì œê±°)
pm2 delete openmanager-dev
```

### ëª¨ë‹ˆí„°ë§

```bash
# ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ (CPU, ë©”ëª¨ë¦¬, ë¡œê·¸)
pm2 monit

# í”„ë¡œì„¸ìŠ¤ ì •ë³´ ìƒì„¸ ì¡°íšŒ
pm2 info openmanager-dev

# ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ í™•ì¸
pm2 status
```

### ìë™ ì‹œì‘ ì„¤ì •

```bash
# ì‹œìŠ¤í…œ ë¶€íŒ… ì‹œ ìë™ ì‹œì‘ ì„¤ì • (sudo í•„ìš”)
pm2 startup

# í˜„ì¬ í”„ë¡œì„¸ìŠ¤ ëª©ë¡ ì €ì¥
pm2 save

# ì €ì¥ëœ í”„ë¡œì„¸ìŠ¤ ëª©ë¡ ë³µì›
pm2 resurrect
```

---

## ğŸ¤ Claude Code í†µí•© ì›Œí¬í”Œë¡œìš°

### ì‹œë‚˜ë¦¬ì˜¤ 1: ê°œë°œ ì‹œì‘

```bash
# 1. PM2ë¡œ ê°œë°œ ì„œë²„ ì‹œì‘
pm2 start ecosystem.config.js

# 2. Claude Code ì„¸ì…˜ ì‹œì‘
# (ê°œë°œ ì„œë²„ëŠ” ë°±ê·¸ë¼ìš´ë“œì—ì„œ ê³„ì† ì‹¤í–‰)

# 3. ìƒíƒœ í™•ì¸
pm2 status
```

### ì‹œë‚˜ë¦¬ì˜¤ 2: ì½”ë“œ ë³€ê²½ í›„ í…ŒìŠ¤íŠ¸

```bash
# 1. Claude Codeì—ì„œ ì½”ë“œ ìˆ˜ì • ì™„ë£Œ

# 2. ë°±ê·¸ë¼ìš´ë“œë¡œ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ (Ctrl+B)
npm run test:quick

# 3. ê°œë°œ ì„œë²„ëŠ” PM2ê°€ ìë™ìœ¼ë¡œ ìœ ì§€
# (Next.js HMRë¡œ ìë™ ë¦¬ë¡œë“œ)
```

### ì‹œë‚˜ë¦¬ì˜¤ 3: ë¹Œë“œ ë° ë°°í¬

```bash
# 1. Claude Code ë°±ê·¸ë¼ìš´ë“œë¡œ ë¹Œë“œ (Ctrl+B)
npm run build

# 2. ë¹Œë“œ ì™„ë£Œ í›„ ë°±ê·¸ë¼ìš´ë“œë¡œ í‘¸ì‹œ (Ctrl+B)
git push

# 3. ê°œë°œ ì„œë²„ëŠ” PM2ê°€ ê³„ì† ìœ ì§€
pm2 status
```

### ì‹œë‚˜ë¦¬ì˜¤ 4: ê°œë°œ ì¢…ë£Œ

```bash
# 1. ê°œë°œ ì„œë²„ ì¤‘ì§€ (ì„ íƒì‚¬í•­ - í•„ìš” ì‹œ)
pm2 stop openmanager-dev

# ë˜ëŠ” ê³„ì† ì‹¤í–‰ ìœ ì§€ (ê¶Œì¥)
# - WSL ì„¸ì…˜ ì¢…ë£Œí•´ë„ PM2ëŠ” ê³„ì† ì‹¤í–‰
# - ë‹¤ìŒ ì„¸ì…˜ì—ì„œ pm2 statusë¡œ ìƒíƒœ í™•ì¸
```

---

## ğŸ“Š ëª¨ë‹ˆí„°ë§ ë° ë¡œê·¸ ê´€ë¦¬

### ë¡œê·¸ íŒŒì¼ ìœ„ì¹˜

```
logs/pm2/
â”œâ”€â”€ error.log     # ì—ëŸ¬ ë¡œê·¸ (npm timing, stderr)
â””â”€â”€ out.log       # ì¶œë ¥ ë¡œê·¸ (Next.js ì„œë²„ ë©”ì‹œì§€, stdout)
```

### ë¡œê·¸ í™•ì¸ ë°©ë²•

```bash
# ì‹¤ì‹œê°„ ë¡œê·¸ ìŠ¤íŠ¸ë¦¬ë°
pm2 logs openmanager-dev

# ì—ëŸ¬ ë¡œê·¸ë§Œ í™•ì¸
pm2 logs openmanager-dev --err

# ì¶œë ¥ ë¡œê·¸ë§Œ í™•ì¸
pm2 logs openmanager-dev --out

# ë¡œê·¸ íŒŒì¼ ì§ì ‘ í™•ì¸
tail -f logs/pm2/error.log
tail -f logs/pm2/out.log
```

### ë¡œê·¸ íšŒì „ (ì„ íƒì‚¬í•­)

```bash
# pm2-logrotate ì„¤ì¹˜ (ìë™ ë¡œê·¸ íšŒì „)
pm2 install pm2-logrotate

# ë¡œê·¸ í¬ê¸° ì œí•œ ì„¤ì • (10MB)
pm2 set pm2-logrotate:max_size 10M

# ë¡œê·¸ íŒŒì¼ ë³´ê´€ ê°œìˆ˜ ì„¤ì • (ìµœê·¼ 10ê°œ)
pm2 set pm2-logrotate:retain 10
```

---

## ğŸ› íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ë¬¸ì œ 1: ì„œë²„ê°€ ê³„ì† ì¬ì‹œì‘ë¨

**ì¦ìƒ**:

```bash
pm2 status
# â†º (ì¬ì‹œì‘ íšŸìˆ˜)ê°€ ê³„ì† ì¦ê°€
```

**í•´ê²°ì±…**:

```bash
# 1. ì—ëŸ¬ ë¡œê·¸ í™•ì¸
pm2 logs openmanager-dev --err --lines 50

# 2. ë©”ëª¨ë¦¬ ë¬¸ì œì¸ ê²½ìš°
pm2 info openmanager-dev
# max_memory_restart ê°’ í™•ì¸

# 3. ecosystem.config.jsì—ì„œ ë©”ëª¨ë¦¬ ì œí•œ ì¦ê°€
# max_memory_restart: '2G' â†’ '3G'

# 4. ì„œë²„ ì¬ì‹œì‘
pm2 restart openmanager-dev
```

### ë¬¸ì œ 2: í¬íŠ¸ ì¶©ëŒ

**ì¦ìƒ**:

```
Port 3000 is in use by an unknown process
```

**í•´ê²°ì±…**:

```bash
# 1. í¬íŠ¸ ì‚¬ìš© í”„ë¡œì„¸ìŠ¤ í™•ì¸
lsof -ti:3000

# 2. PM2 ì™¸ í”„ë¡œì„¸ìŠ¤ê°€ ì‚¬ìš© ì¤‘ì¸ ê²½ìš° ì¢…ë£Œ
lsof -ti:3000 | xargs kill -9

# 3. PM2 ì¬ì‹œì‘
pm2 restart openmanager-dev
```

### ë¬¸ì œ 3: WSL ì¬ì‹œì‘ í›„ PM2ê°€ ì‹œì‘ë˜ì§€ ì•ŠìŒ

**ì¦ìƒ**:

```bash
pm2 status
# PM2 daemon not running
```

**í•´ê²°ì±…**:

```bash
# 1. PM2 ì¬ì‹œì‘
pm2 resurrect

# 2. ì €ì¥ëœ í”„ë¡œì„¸ìŠ¤ ëª©ë¡ í™•ì¸
pm2 list

# 3. ì—†ìœ¼ë©´ ìˆ˜ë™ ì‹œì‘
pm2 start ecosystem.config.js
```

---

## ğŸ’¡ ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤

1. **ê°œë°œ ì„œë²„ëŠ” PM2ë¡œ ê´€ë¦¬**
   - 24ì‹œê°„ ì‹¤í–‰ì´ í•„ìš”í•œ ì‘ì—…
   - ìë™ ì¬ì‹œì‘ì´ í•„ìš”í•œ ì‘ì—…
   - ë©”ëª¨ë¦¬ ê´€ë¦¬ê°€ í•„ìš”í•œ ì‘ì—…

2. **ë¹Œë“œ/í…ŒìŠ¤íŠ¸ëŠ” Claude Code ë°±ê·¸ë¼ìš´ë“œ ì‚¬ìš©**
   - 1-2ë¶„ ë‚´ ì™„ë£Œë˜ëŠ” ë‹¨ê¸° ì‘ì—…
   - Git ëª…ë ¹ì–´
   - npm ìŠ¤í¬ë¦½íŠ¸ (build, test ë“±)

3. **ë¡œê·¸ ì •ê¸° í™•ì¸**
   - ì£¼ 1íšŒ `pm2 logs` í™•ì¸
   - ì—ëŸ¬ íŒ¨í„´ íŒŒì•…
   - í•„ìš” ì‹œ ë¡œê·¸ íšŒì „ ì„¤ì •

4. **ì„¸ì…˜ ê°„ ì§€ì†ì„± ë³´ì¥**
   - `pm2 save`ë¡œ í˜„ì¬ ìƒíƒœ ì €ì¥
   - WSL ì¬ì‹œì‘ í›„ `pm2 resurrect` ì‹¤í–‰

---

## ğŸ“š ê´€ë ¨ ë¬¸ì„œ

- [PM2 ê³µì‹ ë¬¸ì„œ](https://pm2.keymetrics.io/docs/usage/quick-start/)
- [ecosystem.config.js ì„¤ì • ê°€ì´ë“œ](https://pm2.keymetrics.io/docs/usage/application-declaration/)
- [WSL ìµœì í™” ê°€ì´ë“œ](../environment/wsl-optimization.md) (ë³„ë„ ë¬¸ì„œ)

---

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-11-28
**ì‘ì„±ì**: Claude Code
**ë²„ì „**: 1.0.0
