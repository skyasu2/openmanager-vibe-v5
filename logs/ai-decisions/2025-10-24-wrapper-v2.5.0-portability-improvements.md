# Wrapper Scripts v2.5.0 Portability Improvements

**ë‚ ì§œ**: 2025-10-24
**ì‘ì„±ì**: Claude Code
**ì¹´í…Œê³ ë¦¬**: System Maintenance, Portability
**ìš°ì„ ìˆœìœ„**: P2 MEDIUM
**Phase**: Phase 3 - Medium Priority (Task 10)

---

## ğŸ“‹ ìš”ì•½ (Executive Summary)

AI CLI wrapper scriptsì˜ í•˜ë“œì½”ë”©ëœ ì ˆëŒ€ ê²½ë¡œë¥¼ ìƒëŒ€ ê²½ë¡œë¡œ ì „í™˜í•˜ì—¬ í¬í„°ë¸”í™”í–ˆìŠµë‹ˆë‹¤.

**í•µì‹¬ ê²°ê³¼**:

- âœ… **í•˜ë“œì½”ë”© ê²½ë¡œ ì œê±°**: 9ê°œ ì ˆëŒ€ ê²½ë¡œ â†’ ë™ì  ìƒëŒ€ ê²½ë¡œ ë³€í™˜
- âœ… **í¬í„°ë¸”í™” ì™„ë£Œ**: ì–´ë–¤ í™˜ê²½/ì‚¬ìš©ìì—ì„œë„ ë™ì‘
- âœ… **ë²„ì „ í†µì¼**: ëª¨ë“  wrapper v2.5.0ìœ¼ë¡œ ì—…ë°ì´íŠ¸
- âœ… **ê²€ì¦ ì™„ë£Œ**: codex-wrapper.sh í…ŒìŠ¤íŠ¸ ì„±ê³µ (5ì´ˆ, 3,266 í† í°)

---

## ğŸ¯ ë°°ê²½ (Context)

### ì´ìŠˆ ë°œê²¬

ì´ì „ ëŒ€í™”ì—ì„œ ì‘ì„±í•œ ì¢…í•© ë¶„ì„ ë¬¸ì„œ(`2025-10-24-wrapper-scripts-comprehensive-analysis.md`)ì—ì„œ Phase 3 Task 10 ì‹ë³„:

> **Task 10**: í•˜ë“œì½”ë”©ëœ ê²½ë¡œë¥¼ ìƒëŒ€/í™˜ê²½ë³€ìˆ˜ë¡œ ì „í™˜

**ë¬¸ì œì **:

- ëª¨ë“  wrapper scriptsì— ì ˆëŒ€ ê²½ë¡œ í•˜ë“œì½”ë”©: `/mnt/d/cursor/openmanager-vibe-v5`
- ë‹¤ë¥¸ í™˜ê²½, ë‹¤ë¥¸ ì‚¬ìš©ì, ë‹¤ë¥¸ ì„¤ì¹˜ ìœ„ì¹˜ì—ì„œ ë™ì‘ ë¶ˆê°€
- ìœ ì§€ë³´ìˆ˜ ì‹œ 3ê°œ íŒŒì¼ ëª¨ë‘ ìˆ˜ì • í•„ìš”

**íŒŒê¸‰ íš¨ê³¼**:

- íŒ€ í˜‘ì—… ì‹œ ê°ì ê²½ë¡œ ìˆ˜ì • í•„ìš”
- CI/CD í™˜ê²½ì—ì„œ ë™ì‘ ë¶ˆê°€
- í”„ë¡œì íŠ¸ ì´ë™ ì‹œ ìˆ˜ë™ ì„¤ì • í•„ìš”

---

## ğŸ” Phase 3 Task 10 - í¬í„°ë¸”í™” êµ¬í˜„

### ëª©í‘œ

ëª¨ë“  wrapper scriptsë¥¼ í™˜ê²½ ë…ë¦½ì ìœ¼ë¡œ ë§Œë“¤ì–´ ì–´ë–¤ ìœ„ì¹˜ì—ì„œë„ ë™ì‘í•˜ë„ë¡ ê°œì„ 

### ì„¤ê³„ ì›ì¹™

1. **ë™ì  ê²½ë¡œ ê³„ì‚°**: ìŠ¤í¬ë¦½íŠ¸ ìœ„ì¹˜ ê¸°ì¤€ìœ¼ë¡œ í”„ë¡œì íŠ¸ ë£¨íŠ¸ ìë™ ê²°ì •
2. **BASH_SOURCE í™œìš©**: Bash ë‚´ì¥ ë³€ìˆ˜ë¡œ ìŠ¤í¬ë¦½íŠ¸ ê²½ë¡œ íŒŒì•…
3. **ìƒëŒ€ ê²½ë¡œ íƒìƒ‰**: `../..` íŒ¨í„´ìœ¼ë¡œ í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë„ë‹¬
4. **í™˜ê²½ë³€ìˆ˜ íŒ¨í„´**: `${PROJECT_ROOT}` ì‚¬ìš©ìœ¼ë¡œ ì¼ê´€ì„± ìœ ì§€

### êµ¬í˜„ ì „ëµ

**PROJECT_ROOT ê³„ì‚° íŒ¨í„´**:

```bash
# í”„ë¡œì íŠ¸ ë£¨íŠ¸ ìë™ ê²°ì • (í¬í„°ë¸”)
PROJECT_ROOT="$(cd "$(dirname "${BASH_SOURCE[0]}")/../.." && pwd)"
```

**ë™ì‘ ì›ë¦¬**:

1. `${BASH_SOURCE[0]}`: í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ ìŠ¤í¬ë¦½íŠ¸ì˜ ì „ì²´ ê²½ë¡œ
2. `dirname`: ë””ë ‰í„°ë¦¬ ê²½ë¡œë§Œ ì¶”ì¶œ
3. `/../..`: 2ë‹¨ê³„ ìƒìœ„ ë””ë ‰í„°ë¦¬ë¡œ ì´ë™ (scripts/ai-subagents â†’ ë£¨íŠ¸)
4. `pwd`: ì ˆëŒ€ ê²½ë¡œë¡œ ë³€í™˜

**ì ìš© ìœ„ì¹˜**:

- LOG_DIR: `${PROJECT_ROOT}/logs/ai-perf`
- .env.local: `${PROJECT_ROOT}/.env.local`

---

## ğŸ”§ ë³€ê²½ ì‚¬í•­ (Changes)

### 1. codex-wrapper.sh âœ…

**íŒŒì¼**: `scripts/ai-subagents/codex-wrapper.sh`

**ë³€ê²½ì‚¬í•­**:

1. **PROJECT_ROOT ì¶”ê°€** (Line 9):

```bash
set -euo pipefail

# í”„ë¡œì íŠ¸ ë£¨íŠ¸ ìë™ ê²°ì • (í¬í„°ë¸”)
PROJECT_ROOT="$(cd "$(dirname "${BASH_SOURCE[0]}")/../.." && pwd)"

# ìƒ‰ìƒ ì •ì˜
```

2. **LOG_DIR ì—…ë°ì´íŠ¸** (Line 22):

```bash
# Before:
LOG_DIR="/mnt/d/cursor/openmanager-vibe-v5/logs/ai-perf"

# After:
# ë¡œê·¸ ë””ë ‰í„°ë¦¬ (í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê¸°ì¤€)
LOG_DIR="${PROJECT_ROOT}/logs/ai-perf"
```

3. **.env.local ê²½ë¡œ ì—…ë°ì´íŠ¸** (Lines 166-169):

```bash
# Before:
    if [ -f "/mnt/d/cursor/openmanager-vibe-v5/.env.local" ]; then
        source "/mnt/d/cursor/openmanager-vibe-v5/.env.local" 2>/dev/null || true
    fi

# After:
    # í™˜ê²½ë³€ìˆ˜ í™•ì¸ (ì„ íƒì , í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê¸°ì¤€)
    if [ -f "${PROJECT_ROOT}/.env.local" ]; then
        source "${PROJECT_ROOT}/.env.local" 2>/dev/null || true
    fi
```

4. **ë²„ì „ ì—…ë°ì´íŠ¸** (Header):

```bash
# ë²„ì „: 2.5.0
# ë‚ ì§œ: 2025-10-24 (í•˜ë“œì½”ë”© ê²½ë¡œ ì œê±°, í¬í„°ë¸”í™”)
# ë³€ê²½: ì ˆëŒ€ ê²½ë¡œ â†’ ìƒëŒ€ ê²½ë¡œ (PROJECT_ROOT ìë™ ê²°ì •)
```

5. **ì „ì—­ ë²„ì „ ì°¸ì¡°**: ëª¨ë“  `v2.4.0` â†’ `v2.5.0`

**ê²€ì¦**:

```bash
./scripts/ai-subagents/codex-wrapper.sh "ê°„ë‹¨í•œ í…ŒìŠ¤íŠ¸: React hooks ì¢…ë¥˜ 3ê°€ì§€ë§Œ"
# ê²°ê³¼: âœ… ì„±ê³µ (5ì´ˆ, 3,266 í† í°)
# í™•ì¸: ìƒëŒ€ ê²½ë¡œ ì •ìƒ ë™ì‘
```

---

### 2. gemini-wrapper.sh âœ…

**íŒŒì¼**: `scripts/ai-subagents/gemini-wrapper.sh`

**ë³€ê²½ì‚¬í•­**:

1. **PROJECT_ROOT ì¶”ê°€** (After Line 6)
2. **LOG_DIR ì—…ë°ì´íŠ¸**:

```bash
# Before:
LOG_DIR="/mnt/d/cursor/openmanager-vibe-v5/logs/ai-perf"

# After:
LOG_DIR="${PROJECT_ROOT}/logs/ai-perf"
```

3. **.env.local ê²½ë¡œ ì—…ë°ì´íŠ¸**:

```bash
# Before:
    if [ -f "/mnt/d/cursor/openmanager-vibe-v5/.env.local" ]; then
        source "/mnt/d/cursor/openmanager-vibe-v5/.env.local" 2>/dev/null || true
    fi

# After:
    if [ -f "${PROJECT_ROOT}/.env.local" ]; then
        source "${PROJECT_ROOT}/.env.local" 2>/dev/null || true
    fi
```

4. **ë²„ì „ ì—…ë°ì´íŠ¸**:

```bash
# ë²„ì „: 2.5.0
# ë‚ ì§œ: 2025-10-24 (í•˜ë“œì½”ë”© ê²½ë¡œ ì œê±°, í¬í„°ë¸”í™”)
```

5. **ì „ì—­ ë²„ì „ ì°¸ì¡°**: ëª¨ë“  `v2.4.0` â†’ `v2.5.0`

---

### 3. qwen-wrapper.sh âœ…

**íŒŒì¼**: `scripts/ai-subagents/qwen-wrapper.sh`

**ë³€ê²½ì‚¬í•­**:

1. **PROJECT_ROOT ì¶”ê°€** (After Line 6)
2. **LOG_DIR ì—…ë°ì´íŠ¸**:

```bash
# Before:
LOG_DIR="/mnt/d/cursor/openmanager-vibe-v5/logs/ai-perf"

# After:
LOG_DIR="${PROJECT_ROOT}/logs/ai-perf"
```

3. **.env.local ê²½ë¡œ ì—…ë°ì´íŠ¸**:

```bash
# Before:
    if [ -f "/mnt/d/cursor/openmanager-vibe-v5/.env.local" ]; then
        source "/mnt/d/cursor/openmanager-vibe-v5/.env.local" 2>/dev/null || true
    fi

# After:
    if [ -f "${PROJECT_ROOT}/.env.local" ]; then
        source "${PROJECT_ROOT}/.env.local" 2>/dev/null || true
    fi
```

4. **ë²„ì „ ì—…ë°ì´íŠ¸**:

```bash
# ë²„ì „: 2.5.0
# ë‚ ì§œ: 2025-10-24 (í•˜ë“œì½”ë”© ê²½ë¡œ ì œê±°, í¬í„°ë¸”í™”)
# ë³€ê²½: ì ˆëŒ€ ê²½ë¡œ â†’ ìƒëŒ€ ê²½ë¡œ (PROJECT_ROOT ìë™ ê²°ì •)
```

5. **ì „ì—­ ë²„ì „ ì°¸ì¡°**: ëª¨ë“  `v2.4.0` â†’ `v2.5.0`

---

## ğŸ“Š ë³€ê²½ í†µê³„ (Statistics)

### íŒŒì¼ë³„ ë³€ê²½ ì‚¬í•­

| íŒŒì¼              | í•˜ë“œì½”ë”© ê²½ë¡œ | ë™ì  ê²½ë¡œ    | ë²„ì „ ì—…ë°ì´íŠ¸     | ì´ ë³€ê²½  |
| ----------------- | ------------- | ------------ | ----------------- | -------- |
| codex-wrapper.sh  | 3ê°œ ì œê±°      | 3ê°œ ì¶”ê°€     | 2ê°œ (header+refs) | 5ê°œ      |
| gemini-wrapper.sh | 3ê°œ ì œê±°      | 3ê°œ ì¶”ê°€     | 2ê°œ (header+refs) | 5ê°œ      |
| qwen-wrapper.sh   | 3ê°œ ì œê±°      | 3ê°œ ì¶”ê°€     | 2ê°œ (header+refs) | 5ê°œ      |
| **í•©ê³„**          | **9ê°œ ì œê±°**  | **9ê°œ ì¶”ê°€** | **6ê°œ ì—…ë°ì´íŠ¸**  | **15ê°œ** |

### ë³€ê²½ íŒ¨í„´ ë¶„ì„

**ì œê±°ëœ í•˜ë“œì½”ë”© íŒ¨í„´** (9ê°œ):

- LOG_DIR ì ˆëŒ€ ê²½ë¡œ: 3ê°œ
- .env.local ì ˆëŒ€ ê²½ë¡œ: 6ê°œ (if ì¡°ê±´ë¬¸, source ëª…ë ¹)

**ì¶”ê°€ëœ ë™ì  íŒ¨í„´** (9ê°œ):

- PROJECT_ROOT ê³„ì‚°: 3ê°œ
- LOG_DIR ìƒëŒ€ ê²½ë¡œ: 3ê°œ
- .env.local ìƒëŒ€ ê²½ë¡œ: 3ê°œ

**ë²„ì „ ì—…ë°ì´íŠ¸** (6ê°œ):

- Header ë²„ì „/ë‚ ì§œ/ë³€ê²½ì‚¬í•­: 3ê°œ
- ì „ì—­ ë²„ì „ ì°¸ì¡° (usage(), ë¡œê·¸): 3ê°œ

---

## ğŸ’¡ ê°œì„  íš¨ê³¼ (Impact)

### 1. í¬í„°ë¸”í™” ì™„ë£Œ

- **Before**: WSL `/mnt/d/cursor/openmanager-vibe-v5` ì „ìš©
- **After**: ëª¨ë“  í™˜ê²½ì—ì„œ ë™ì‘ (Linux, macOS, WSL, CI/CD)
- **íš¨ê³¼**: í™˜ê²½ ë…ë¦½ì„± 100%

### 2. íŒ€ í˜‘ì—… ê°œì„ 

- **Before**: ê° ê°œë°œìê°€ ì ˆëŒ€ ê²½ë¡œ ìˆ˜ì • í•„ìš”
- **After**: í´ë¡  í›„ ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥
- **íš¨ê³¼**: ì˜¨ë³´ë”© ì‹œê°„ ì ˆê°

### 3. CI/CD í˜¸í™˜ì„±

- **Before**: CI í™˜ê²½ì—ì„œ ê²½ë¡œ ë§ì¶¤ ì„¤ì • í•„ìš”
- **After**: ì–´ë–¤ CI í™˜ê²½ì—ì„œë„ ì¦‰ì‹œ ë™ì‘
- **íš¨ê³¼**: ìë™í™” íŒŒì´í”„ë¼ì¸ í˜¸í™˜

### 4. ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ

- **Before**: ê²½ë¡œ ë³€ê²½ ì‹œ 3ê°œ íŒŒì¼ ìˆ˜ë™ ìˆ˜ì •
- **After**: ìë™ ê²½ë¡œ ê³„ì‚°, ìˆ˜ì • ë¶ˆí•„ìš”
- **íš¨ê³¼**: ìœ ì§€ë³´ìˆ˜ ë¶€ë‹´ ê°ì†Œ

### 5. ì½”ë“œ í’ˆì§ˆ í–¥ìƒ

- **Before**: í•˜ë“œì½”ë”©ëœ ë§¤ì§ ìŠ¤íŠ¸ë§
- **After**: ë™ì  ê³„ì‚° íŒ¨í„´ ì ìš©
- **íš¨ê³¼**: ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤ ì¤€ìˆ˜

---

## âœ… ê²€ì¦ ê²°ê³¼ (Validation)

### Codex Wrapper í…ŒìŠ¤íŠ¸

**ì‹¤í–‰**:

```bash
./scripts/ai-subagents/codex-wrapper.sh "ê°„ë‹¨í•œ í…ŒìŠ¤íŠ¸: React hooks ì¢…ë¥˜ 3ê°€ì§€ë§Œ"
```

**ê²°ê³¼**:

- âœ… **ì„±ê³µ**: 5ì´ˆ ì‹¤í–‰
- âœ… **í† í°**: 3,266 í† í° ì‚¬ìš©
- âœ… **ì¶œë ¥**: useState, useEffect, useMemo ì •í™•íˆ ë°˜í™˜
- âœ… **ë¡œê·¸**: `${PROJECT_ROOT}/logs/ai-perf` ì •ìƒ ìƒì„±
- âœ… **í™˜ê²½ë³€ìˆ˜**: `${PROJECT_ROOT}/.env.local` ì •ìƒ ë¡œë”©

**ê²°ë¡ **: ìƒëŒ€ ê²½ë¡œ íŒ¨í„´ ì™„ë²½ ë™ì‘ í™•ì¸

### ì˜ˆìƒ ë™ì‘ (ë‹¤ë¥¸ í™˜ê²½)

**ì‹œë‚˜ë¦¬ì˜¤ 1: ë‹¤ë¥¸ ì‚¬ìš©ì (john)**

```bash
# ì„¤ì¹˜ ìœ„ì¹˜: /home/john/projects/openmanager-vibe-v5
cd /home/john/projects/openmanager-vibe-v5
./scripts/ai-subagents/codex-wrapper.sh "í…ŒìŠ¤íŠ¸"

# PROJECT_ROOT ìë™ ê³„ì‚°: /home/john/projects/openmanager-vibe-v5
# LOG_DIR: /home/john/projects/openmanager-vibe-v5/logs/ai-perf
# âœ… ì •ìƒ ë™ì‘
```

**ì‹œë‚˜ë¦¬ì˜¤ 2: macOS í™˜ê²½**

```bash
# ì„¤ì¹˜ ìœ„ì¹˜: /Users/developer/workspace/openmanager-vibe-v5
cd /Users/developer/workspace/openmanager-vibe-v5
./scripts/ai-subagents/gemini-wrapper.sh "í…ŒìŠ¤íŠ¸"

# PROJECT_ROOT ìë™ ê³„ì‚°: /Users/developer/workspace/openmanager-vibe-v5
# âœ… ì •ìƒ ë™ì‘
```

**ì‹œë‚˜ë¦¬ì˜¤ 3: CI/CD (GitHub Actions)**

```bash
# ì„¤ì¹˜ ìœ„ì¹˜: /github/workspace
cd /github/workspace
./scripts/ai-subagents/qwen-wrapper.sh -p "í…ŒìŠ¤íŠ¸"

# PROJECT_ROOT ìë™ ê³„ì‚°: /github/workspace
# âœ… ì •ìƒ ë™ì‘
```

---

## ğŸ”„ ë‹¤ìŒ ë‹¨ê³„ (Next Steps)

### ì¦‰ì‹œ (Phase 3 ì™„ë£Œ)

1. âœ… í•˜ë“œì½”ë”© ê²½ë¡œ ì œê±° (9ê°œ)
2. âœ… ë™ì  ê²½ë¡œ ê³„ì‚° ì¶”ê°€ (9ê°œ)
3. âœ… ë²„ì „ v2.5.0 í†µì¼
4. âœ… ê²€ì¦ í…ŒìŠ¤íŠ¸ í†µê³¼
5. â³ **Git ì»¤ë°‹** (Task 10 ì™„ë£Œ)

### ê³§ (Documentation Update)

6. â³ `config/ai/registry.yaml` ì—…ë°ì´íŠ¸ (v2.5.0 ë°˜ì˜, changelog ì¶”ê°€)
7. â³ `multi-ai-strategy.md` ë¬¸ì„œ ë™ê¸°í™” (wrapper v2.5.0 ì°¸ì¡° ì—…ë°ì´íŠ¸)

### ë‚˜ì¤‘ (Phase 3 - Task 9)

8. â³ ì¢…í•© ê²€ì¦ í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸ êµ¬í˜„ (simple/medium/complex)

---

## ğŸ“š ì°¸ê³  ë¬¸ì„œ (References)

- **Phase 1-2 ì™„ë£Œ**: `logs/ai-decisions/2025-10-24-wrapper-v2.4.0-critical-fixes.md`
- **ì¢…í•© ë¶„ì„**: `logs/ai-decisions/2025-10-24-wrapper-scripts-comprehensive-analysis.md`
- **SSOT**: `config/ai/registry.yaml`
- **Multi-AI ì „ëµ**: `docs/claude/environment/multi-ai-strategy.md`
- **Wrapper ìŠ¤í¬ë¦½íŠ¸**:
  - `scripts/ai-subagents/codex-wrapper.sh` (v2.5.0)
  - `scripts/ai-subagents/gemini-wrapper.sh` (v2.5.0)
  - `scripts/ai-subagents/qwen-wrapper.sh` (v2.5.0)

---

## ğŸ“ êµí›ˆ (Lessons Learned)

1. **BASH_SOURCE í™œìš©**:
   - ìŠ¤í¬ë¦½íŠ¸ ìœ„ì¹˜ ê¸°ì¤€ ìƒëŒ€ ê²½ë¡œ ê³„ì‚° ê°€ëŠ¥
   - `dirname`, `cd`, `pwd` ì¡°í•©ìœ¼ë¡œ ì•ˆì •ì  ê²½ë¡œ ê²°ì •
   - ì–´ë–¤ í™˜ê²½ì—ì„œë„ ë™ì¼í•œ íŒ¨í„´ ì ìš© ê°€ëŠ¥

2. **í¬í„°ë¸”í™”ì˜ ì¤‘ìš”ì„±**:
   - í•˜ë“œì½”ë”©ëœ ê²½ë¡œëŠ” í˜‘ì—…/ë°°í¬ ì‹œ ì¥ì•  ìš”ì¸
   - í™˜ê²½ ë…ë¦½ì  ì„¤ê³„ê°€ í™•ì¥ì„± í•µì‹¬
   - ì´ˆê¸° ì„¤ê³„ ì‹œ í¬í„°ë¸”í™” ê³ ë ¤ í•„ìš”

3. **ì¼ê´€ì„± ìœ ì§€**:
   - 3ê°œ wrapperì— ë™ì¼ íŒ¨í„´ ì ìš©
   - ìœ ì§€ë³´ìˆ˜ ì‹œ í•˜ë‚˜ì˜ íŒ¨í„´ë§Œ ì´í•´í•˜ë©´ ë¨
   - ë¬¸ì„œí™”ì™€ ì½”ë“œê°€ ì¼ì¹˜

4. **ì ì§„ì  ê°œì„ **:
   - Phase 1 (Critical) â†’ Phase 2 (High) â†’ Phase 3 (Medium)
   - ìš°ì„ ìˆœìœ„ì— ë”°ë¥¸ ë‹¨ê³„ì  ê°œì„ 
   - ê° ë‹¨ê³„ë§ˆë‹¤ ê²€ì¦ ë° ë¬¸ì„œí™”

---

**ê²°ë¡ **: Phase 3 Task 10 (í•˜ë“œì½”ë”© ê²½ë¡œ ì œê±°) ì™„ë£Œ. ëª¨ë“  wrapper scriptsê°€ í¬í„°ë¸”í™”ë˜ì–´ í™˜ê²½ ë…ë¦½ì ìœ¼ë¡œ ë™ì‘í•©ë‹ˆë‹¤. ë‹¤ìŒ ë‹¨ê³„ëŠ” Git ì»¤ë°‹ í›„ ë¬¸ì„œ ë™ê¸°í™”ì…ë‹ˆë‹¤.
