<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenManager Vibe v5 - Vercel AI í…ŒìŠ¤íŠ¸</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
        }

        .container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        h1 {
            color: #4a5568;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
        }

        .test-section {
            margin: 30px 0;
            padding: 20px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            background: #f8fafc;
        }

        .test-section h2 {
            color: #2d3748;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .input-group {
            margin: 15px 0;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #4a5568;
        }

        input,
        textarea,
        select {
            width: 100%;
            padding: 12px;
            border: 2px solid #cbd5e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        input:focus,
        textarea:focus,
        select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: transform 0.2s, box-shadow 0.2s;
            margin: 10px 5px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        button:disabled {
            background: #a0aec0;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            white-space: pre-wrap;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            max-height: 400px;
            overflow-y: auto;
        }

        .success {
            background: #f0fff4;
            border: 2px solid #68d391;
            color: #22543d;
        }

        .error {
            background: #fed7d7;
            border: 2px solid #fc8181;
            color: #742a2a;
        }

        .info {
            background: #ebf8ff;
            border: 2px solid #63b3ed;
            color: #2a4365;
        }

        .loading {
            background: #fefcbf;
            border: 2px solid #f6e05e;
            color: #744210;
        }

        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-online {
            background: #48bb78;
        }

        .status-offline {
            background: #f56565;
        }

        .status-warning {
            background: #ed8936;
        }

        .query-examples {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }

        .example-query {
            background: #e6fffa;
            border: 1px solid #81e6d9;
            padding: 10px;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.2s;
            font-size: 14px;
        }

        .example-query:hover {
            background: #b2f5ea;
        }

        .summary-card {
            background: linear-gradient(135deg, #4299e1 0%, #3182ce 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
        }

        .summary-card h3 {
            margin: 0 0 10px 0;
            font-size: 1.3em;
        }

        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>ğŸš€ OpenManager Vibe v5 - Vercel AI í…ŒìŠ¤íŠ¸</h1>

        <div class="summary-card">
            <h3>ğŸ¯ ë°°í¬ ì‚¬ì´íŠ¸ AI ê¸°ëŠ¥ ì¢…í•© í…ŒìŠ¤íŠ¸</h3>
            <p>Vercel ë°°í¬ëœ OpenManager Vibe v5ì˜ AI ìì—°ì–´ ì§ˆì˜ ê¸°ëŠ¥ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤</p>
            <p><strong>ë°°í¬ URL:</strong> https://openmanager-vibe-v5-kj9e04tmd-skyasus-projects.vercel.app</p>
        </div>

        <div class="test-grid">
            <!-- 1. í™˜ê²½ ë³€ìˆ˜ ë° AI ìƒíƒœ í™•ì¸ -->
            <div class="test-section">
                <h2>ğŸ”§ 1. AI ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸</h2>
                <button onclick="checkAIStatus()">AI ìƒíƒœ í™•ì¸</button>
                <button onclick="checkEnvironment()">í™˜ê²½ ë³€ìˆ˜ í™•ì¸</button>
                <div id="aiStatusResult" class="result info" style="display:none;"></div>
            </div>

            <!-- 2. ìì—°ì–´ ì§ˆì˜ í…ŒìŠ¤íŠ¸ -->
            <div class="test-section">
                <h2>ğŸ¤– 2. AI ìì—°ì–´ ì§ˆì˜ í…ŒìŠ¤íŠ¸</h2>
                <div class="input-group">
                    <label for="naturalQuery">ìì—°ì–´ ì§ˆì˜:</label>
                    <textarea id="naturalQuery" rows="3" placeholder="ì˜ˆ: CPU ì‚¬ìš©ë¥ ì´ ë†’ì€ ì„œë²„ë¥¼ ì°¾ì•„ì¤˜"></textarea>
                </div>

                <div class="query-examples">
                    <div class="example-query" onclick="setQuery('CPU ì‚¬ìš©ë¥ ì´ ë†’ì€ ì„œë²„ë¥¼ ì°¾ì•„ì¤˜')">
                        CPU ì‚¬ìš©ë¥ ì´ ë†’ì€ ì„œë²„ë¥¼ ì°¾ì•„ì¤˜
                    </div>
                    <div class="example-query" onclick="setQuery('ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ 80% ì´ìƒì¸ ì„œë²„ ëª©ë¡')">
                        ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ 80% ì´ìƒì¸ ì„œë²„ ëª©ë¡
                    </div>
                    <div class="example-query" onclick="setQuery('ë””ìŠ¤í¬ ê³µê°„ì´ ë¶€ì¡±í•œ ì„œë²„ëŠ”?')">
                        ë””ìŠ¤í¬ ê³µê°„ì´ ë¶€ì¡±í•œ ì„œë²„ëŠ”?
                    </div>
                    <div class="example-query" onclick="setQuery('ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ì´ ë§ì€ ì„œë²„ ë¶„ì„')">
                        ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ì´ ë§ì€ ì„œë²„ ë¶„ì„
                    </div>
                </div>

                <button onclick="testNaturalLanguageQuery()">ì§ˆì˜ ì‹¤í–‰</button>
                <div id="queryResult" class="result info" style="display:none;"></div>
            </div>
        </div>

        <div class="test-grid">
            <!-- 3. API ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸ -->
            <div class="test-section">
                <h2>ğŸ”— 3. í•µì‹¬ API ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸</h2>
                <button onclick="testHealthAPI()">Health Check</button>
                <button onclick="testSmartFallbackAPI()">Smart Fallback</button>
                <button onclick="testLogsAPI()">Logs API</button>
                <button onclick="testStreamAPI()">Stream API</button>
                <div id="apiTestResult" class="result info" style="display:none;"></div>
            </div>

            <!-- 4. AI ì—”ì§„ í†µí•© í…ŒìŠ¤íŠ¸ -->
            <div class="test-section">
                <h2>âš¡ 4. AI ì—”ì§„ í†µí•© í…ŒìŠ¤íŠ¸</h2>
                <button onclick="testUnifiedAI()">Unified AI í…ŒìŠ¤íŠ¸</button>
                <button onclick="testGoogleAI()">Google AI í…ŒìŠ¤íŠ¸</button>
                <button onclick="testRAGEngine()">RAG ì—”ì§„ í…ŒìŠ¤íŠ¸</button>
                <div id="aiEngineResult" class="result info" style="display:none;"></div>
            </div>
        </div>

        <!-- 5. ì¢…í•© ê²°ê³¼ ìš”ì•½ -->
        <div class="test-section">
            <h2>ğŸ“Š 5. í…ŒìŠ¤íŠ¸ ê²°ê³¼ ìš”ì•½</h2>
            <button onclick="runAllTests()">ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
            <button onclick="clearResults()">ê²°ê³¼ ì´ˆê¸°í™”</button>
            <div id="summaryResult" class="result info" style="display:none;"></div>
        </div>
    </div>

    <script>
        const BASE_URL = 'https://openmanager-vibe-v5-kj9e04tmd-skyasus-projects.vercel.app';
        let testResults = {};

        function setQuery(query) {
            document.getElementById('naturalQuery').value = query;
        }

        function showResult(elementId, content, type = 'info') {
            const element = document.getElementById(elementId);
            element.className = `result ${type}`;
            element.style.display = 'block';
            element.textContent = content;
        }

        function showLoading(elementId, message = 'í…ŒìŠ¤íŠ¸ ì§„í–‰ ì¤‘...') {
            showResult(elementId, message, 'loading');
        }

        async function makeRequest(url, options = {}) {
            try {
                const response = await fetch(url, {
                    ...options,
                    headers: {
                        'Content-Type': 'application/json',
                        ...options.headers
                    }
                });

                const data = await response.json();
                return {
                    success: response.ok,
                    status: response.status,
                    data: data,
                    error: response.ok ? null : data.error || 'ìš”ì²­ ì‹¤íŒ¨'
                };
            } catch (error) {
                return {
                    success: false,
                    status: 0,
                    data: null,
                    error: error.message
                };
            }
        }

        async function checkAIStatus() {
            showLoading('aiStatusResult', 'AI ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸ ì¤‘...');

            const result = await makeRequest(`${BASE_URL}/api/health`);

            if (result.success) {
                const statusText = `âœ… AI ì‹œìŠ¤í…œ ìƒíƒœ: ì •ìƒ
ì‘ë‹µ ì‹œê°„: ${Date.now() - performance.now()}ms
ìƒíƒœ ì½”ë“œ: ${result.status}
ë°ì´í„°: ${JSON.stringify(result.data, null, 2)}`;
                showResult('aiStatusResult', statusText, 'success');
                testResults.aiStatus = true;
            } else {
                const errorText = `âŒ AI ì‹œìŠ¤í…œ ìƒíƒœ: ì˜¤ë¥˜
ì˜¤ë¥˜ ë©”ì‹œì§€: ${result.error}
ìƒíƒœ ì½”ë“œ: ${result.status}`;
                showResult('aiStatusResult', errorText, 'error');
                testResults.aiStatus = false;
            }
        }

        async function checkEnvironment() {
            showLoading('aiStatusResult', 'í™˜ê²½ ë³€ìˆ˜ í™•ì¸ ì¤‘...');

            const result = await makeRequest(`${BASE_URL}/api/ai/unified/status`);

            if (result.success) {
                const envText = `âœ… í™˜ê²½ ë³€ìˆ˜ ìƒíƒœ: ì •ìƒ
AI ì—”ì§„ í™œì„±í™”: ${result.data.enabled ? 'âœ…' : 'âŒ'}
ì„¤ì •ëœ ì—”ì§„ ìˆ˜: ${result.data.engines?.length || 0}
í™˜ê²½ ì„¤ì •: ${JSON.stringify(result.data, null, 2)}`;
                showResult('aiStatusResult', envText, 'success');
                testResults.environment = true;
            } else {
                const errorText = `âŒ í™˜ê²½ ë³€ìˆ˜ í™•ì¸ ì‹¤íŒ¨
ì˜¤ë¥˜: ${result.error}`;
                showResult('aiStatusResult', errorText, 'error');
                testResults.environment = false;
            }
        }

        async function testNaturalLanguageQuery() {
            const query = document.getElementById('naturalQuery').value.trim();
            if (!query) {
                showResult('queryResult', 'âŒ ì§ˆì˜ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.', 'error');
                return;
            }

            showLoading('queryResult', `ìì—°ì–´ ì§ˆì˜ ì²˜ë¦¬ ì¤‘: "${query}"`);

            const result = await makeRequest(`${BASE_URL}/api/ai/smart-query`, {
                method: 'POST',
                body: JSON.stringify({ query: query })
            });

            if (result.success) {
                const queryText = `âœ… ìì—°ì–´ ì§ˆì˜ ì„±ê³µ!
ì§ˆì˜: "${query}"
ì‘ë‹µ: ${JSON.stringify(result.data, null, 2)}
ì²˜ë¦¬ ì‹œê°„: ${Date.now() - performance.now()}ms`;
                showResult('queryResult', queryText, 'success');
                testResults.naturalQuery = true;
            } else {
                const errorText = `âŒ ìì—°ì–´ ì§ˆì˜ ì‹¤íŒ¨
ì§ˆì˜: "${query}"
ì˜¤ë¥˜: ${result.error}
ìƒíƒœ ì½”ë“œ: ${result.status}`;
                showResult('queryResult', errorText, 'error');
                testResults.naturalQuery = false;
            }
        }

        async function testHealthAPI() {
            showLoading('apiTestResult', 'Health API í…ŒìŠ¤íŠ¸ ì¤‘...');

            const result = await makeRequest(`${BASE_URL}/api/health`);

            const healthText = result.success
                ? `âœ… Health API: ì •ìƒ (${result.status})`
                : `âŒ Health API: ì‹¤íŒ¨ (${result.status}) - ${result.error}`;

            showResult('apiTestResult', healthText, result.success ? 'success' : 'error');
            testResults.healthAPI = result.success;
        }

        async function testSmartFallbackAPI() {
            showLoading('apiTestResult', 'Smart Fallback API í…ŒìŠ¤íŠ¸ ì¤‘...');

            const result = await makeRequest(`${BASE_URL}/api/ai/smart-fallback`, {
                method: 'POST',
                body: JSON.stringify({ query: 'í…ŒìŠ¤íŠ¸ ì§ˆì˜' })
            });

            const fallbackText = result.success
                ? `âœ… Smart Fallback API: ì •ìƒ (${result.status})`
                : `âŒ Smart Fallback API: ì‹¤íŒ¨ (${result.status}) - ${result.error}`;

            showResult('apiTestResult', fallbackText, result.success ? 'success' : 'error');
            testResults.smartFallback = result.success;
        }

        async function testLogsAPI() {
            showLoading('apiTestResult', 'Logs API í…ŒìŠ¤íŠ¸ ì¤‘...');

            const result = await makeRequest(`${BASE_URL}/api/logs?limit=5`);

            const logsText = result.success
                ? `âœ… Logs API: ì •ìƒ (${result.status}) - ${result.data?.logs?.length || 0}ê°œ ë¡œê·¸ ë°˜í™˜`
                : `âŒ Logs API: ì‹¤íŒ¨ (${result.status}) - ${result.error}`;

            showResult('apiTestResult', logsText, result.success ? 'success' : 'error');
            testResults.logsAPI = result.success;
        }

        async function testStreamAPI() {
            showLoading('apiTestResult', 'Stream API í…ŒìŠ¤íŠ¸ ì¤‘...');

            const result = await makeRequest(`${BASE_URL}/api/stream`);

            const streamText = result.success
                ? `âœ… Stream API: ì •ìƒ (${result.status})`
                : `âŒ Stream API: ì‹¤íŒ¨ (${result.status}) - ${result.error}`;

            showResult('apiTestResult', streamText, result.success ? 'success' : 'error');
            testResults.streamAPI = result.success;
        }

        async function testUnifiedAI() {
            showLoading('aiEngineResult', 'Unified AI ì—”ì§„ í…ŒìŠ¤íŠ¸ ì¤‘...');

            const result = await makeRequest(`${BASE_URL}/api/ai/unified/status`);

            const unifiedText = result.success
                ? `âœ… Unified AI: ì •ìƒ - ${result.data?.engines?.length || 0}ê°œ ì—”ì§„ í™œì„±í™”`
                : `âŒ Unified AI: ì‹¤íŒ¨ - ${result.error}`;

            showResult('aiEngineResult', unifiedText, result.success ? 'success' : 'error');
            testResults.unifiedAI = result.success;
        }

        async function testGoogleAI() {
            showLoading('aiEngineResult', 'Google AI í…ŒìŠ¤íŠ¸ ì¤‘...');

            const result = await makeRequest(`${BASE_URL}/api/ai/google-ai/status`);

            const googleText = result.success
                ? `âœ… Google AI: ì •ìƒ - ${result.data?.status || 'í™œì„±í™”'}`
                : `âŒ Google AI: ì‹¤íŒ¨ - ${result.error}`;

            showResult('aiEngineResult', googleText, result.success ? 'success' : 'error');
            testResults.googleAI = result.success;
        }

        async function testRAGEngine() {
            showLoading('aiEngineResult', 'RAG ì—”ì§„ í…ŒìŠ¤íŠ¸ ì¤‘...');

            const result = await makeRequest(`${BASE_URL}/api/ai/query`, {
                method: 'POST',
                body: JSON.stringify({ query: 'RAG í…ŒìŠ¤íŠ¸ ì§ˆì˜' })
            });

            const ragText = result.success
                ? `âœ… RAG ì—”ì§„: ì •ìƒ - ì‘ë‹µ ìƒì„± ì„±ê³µ`
                : `âŒ RAG ì—”ì§„: ì‹¤íŒ¨ - ${result.error}`;

            showResult('aiEngineResult', ragText, result.success ? 'success' : 'error');
            testResults.ragEngine = result.success;
        }

        async function runAllTests() {
            showLoading('summaryResult', 'ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì¤‘...');

            // ëª¨ë“  í…ŒìŠ¤íŠ¸ ìˆœì°¨ ì‹¤í–‰
            await checkAIStatus();
            await checkEnvironment();
            await testHealthAPI();
            await testSmartFallbackAPI();
            await testLogsAPI();
            await testStreamAPI();
            await testUnifiedAI();
            await testGoogleAI();
            await testRAGEngine();

            // ìì—°ì–´ ì§ˆì˜ í…ŒìŠ¤íŠ¸ (ê¸°ë³¸ ì§ˆì˜ë¡œ)
            document.getElementById('naturalQuery').value = 'CPU ì‚¬ìš©ë¥ ì´ ë†’ì€ ì„œë²„ë¥¼ ì°¾ì•„ì¤˜';
            await testNaturalLanguageQuery();

            // ê²°ê³¼ ìš”ì•½
            const totalTests = Object.keys(testResults).length;
            const passedTests = Object.values(testResults).filter(result => result).length;
            const failedTests = totalTests - passedTests;

            const summaryText = `ğŸ¯ ì „ì²´ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ìš”ì•½

ì´ í…ŒìŠ¤íŠ¸: ${totalTests}ê°œ
âœ… ì„±ê³µ: ${passedTests}ê°œ
âŒ ì‹¤íŒ¨: ${failedTests}ê°œ
ì„±ê³µë¥ : ${Math.round((passedTests / totalTests) * 100)}%

ìƒì„¸ ê²°ê³¼:
${Object.entries(testResults).map(([test, result]) =>
                `${result ? 'âœ…' : 'âŒ'} ${test}: ${result ? 'ì„±ê³µ' : 'ì‹¤íŒ¨'}`
            ).join('\n')}

${passedTests === totalTests ?
                    'ğŸ‰ ëª¨ë“  í…ŒìŠ¤íŠ¸ê°€ ì„±ê³µí–ˆìŠµë‹ˆë‹¤! Vercel ë°°í¬ê°€ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ê³  ìˆìŠµë‹ˆë‹¤.' :
                    'âš ï¸ ì¼ë¶€ í…ŒìŠ¤íŠ¸ê°€ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •ì„ í™•ì¸í•´ì£¼ì„¸ìš”.'}`;

            showResult('summaryResult', summaryText, passedTests === totalTests ? 'success' : 'error');
        }

        function clearResults() {
            const resultElements = document.querySelectorAll('.result');
            resultElements.forEach(element => {
                element.style.display = 'none';
            });
            testResults = {};
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ê¸°ë³¸ ìƒíƒœ í™•ì¸
        window.addEventListener('load', () => {
            console.log('OpenManager Vibe v5 - Vercel AI í…ŒìŠ¤íŠ¸ í˜ì´ì§€ ë¡œë“œë¨');
            console.log('ë°°í¬ URL:', BASE_URL);
        });
    </script>
</body>

</html>